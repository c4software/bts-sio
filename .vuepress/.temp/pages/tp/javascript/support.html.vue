<template><h1 id="complement-du-cours-javascript" tabindex="-1"><a class="header-anchor" href="#complement-du-cours-javascript" aria-hidden="true">#</a> ComplÃ©ment du cours JavaScript</h1>
<p>Ce document est un complÃ©ment du cours. Il vous permettra de revenir sur les diffÃ©rentes notions avec diffÃ©rents exemples.</p>
<details class="custom-container details"><summary>Table des matiÃ¨res</summary>
<nav class="table-of-contents"><ul><li><RouterLink to="#introduction">Introduction</RouterLink></li><li><RouterLink to="#le-fonctionnement">Le fonctionnement</RouterLink><ul><li><RouterLink to="#moteur-javascript">Moteur JavaScript</RouterLink></li><li><RouterLink to="#pourquoi-le-javascript-est-il-donc-incontournable">Pourquoi le JavaScript est-il donc incontournable.</RouterLink></li></ul></li><li><RouterLink to="#les-navigateurs">Les navigateurs</RouterLink></li><li><RouterLink to="#librairies-or-not">Librairies or not ?</RouterLink></li><li><RouterLink to="#les-animations">Les animations</RouterLink></li><li><RouterLink to="#javascript-do-you-speak-javascript">JavaScript do you speak JavaScript ?</RouterLink></li><li><RouterLink to="#les-outils-du-developpeur">Les outils du dÃ©veloppeur</RouterLink><ul><li><RouterLink to="#les-ide">Les IDE</RouterLink></li><li><RouterLink to="#la-console">La console</RouterLink></li></ul></li><li><RouterLink to="#votre-premier-hello-world">Votre premier Hello World</RouterLink><ul><li><RouterLink to="#mise-en-pratique">Mise en pratique</RouterLink></li></ul></li><li><RouterLink to="#plusieurs-lignes">Plusieurs lignes ?</RouterLink></li><li><RouterLink to="#les-commentaires">Les commentaires</RouterLink></li><li><RouterLink to="#les-variables">Les variables</RouterLink><ul><li><RouterLink to="#les-variables-1">Les variables</RouterLink></li><li><RouterLink to="#les-constantes">Les constantes</RouterLink></li><li><RouterLink to="#les-types">Les types</RouterLink></li><li><RouterLink to="#a-faire">Ã€ faire</RouterLink></li></ul></li><li><RouterLink to="#manipuler-les-donnees">Manipuler les donnÃ©es</RouterLink><ul><li><RouterLink to="#les-conditions">Les conditions</RouterLink></li><li><RouterLink to="#les-boucles">Les boucles</RouterLink></li><li><RouterLink to="#les-fonctions">Les fonctions</RouterLink></li><li><RouterLink to="#a-faire-1">Ã€ faire</RouterLink></li></ul></li><li><RouterLink to="#manipuler-le-html-et-la-css">Manipuler le HTML et la CSS</RouterLink><ul><li><RouterLink to="#creer-des-elements-dans-la-page">CrÃ©er des Ã©lÃ©ments dans la page</RouterLink></li><li><RouterLink to="#le-dom">Le DOM</RouterLink></li><li><RouterLink to="#exemple-de-creation-d-elements">Exemple de crÃ©ation d&#39;Ã©lÃ©ments</RouterLink></li><li><RouterLink to="#exemple-de-creation-d-elements-version-alternative">Exemple de crÃ©ation d&#39;Ã©lÃ©ments version alternative</RouterLink></li><li><RouterLink to="#les-selecteurs">Les sÃ©lecteurs</RouterLink></li><li><RouterLink to="#les-selecteurs-et-jquery">Les sÃ©lecteurs et jQuery</RouterLink></li><li><RouterLink to="#utiliser-le-resultat-d-un-selecteur">Utiliser le rÃ©sultat d&#39;un sÃ©lecteur</RouterLink></li><li><RouterLink to="#jouer-sur-la-visibilite">Jouer sur la visibilitÃ©</RouterLink></li><li><RouterLink to="#une-petite-mise-en-pratique-simple">Une petite mise en pratique simple</RouterLink></li><li><RouterLink to="#mise-en-pratique-1">Mise en pratique</RouterLink></li></ul></li><li><RouterLink to="#obtenir-les-valeurs-d-un-input">Obtenir les valeurs d&#39;un input</RouterLink></li><li><RouterLink to="#les-evenements">Les Ã©vÃ¨nements</RouterLink><ul><li><RouterLink to="#dans-le-dom">Dans le DOM</RouterLink></li><li><RouterLink to="#en-javascript">En JavaScript</RouterLink></li></ul></li><li><RouterLink to="#mise-en-pratique-2">Mise en pratique</RouterLink></li><li><RouterLink to="#l-ajax">L&#39;Ajax</RouterLink><ul><li><RouterLink to="#l-asynchrone-c-est-quoi">L&#39;asynchrone c&#39;est quoi ?</RouterLink></li><li><RouterLink to="#charger-du-contenu-Â«-a-la-demande-Â»">Charger du contenu Â« Ã  la demande Â»</RouterLink></li><li><RouterLink to="#mettre-en-pratique-l-ajax">Mettre en pratique l&#39;Ajax</RouterLink></li></ul></li><li><RouterLink to="#allons-un-peu-plus-loin">Allons un peu plus loin</RouterLink><ul><li><RouterLink to="#se-Â«-balader-Â»-dans-le-dom">Se Â« balader Â» dans le DOM</RouterLink></li><li><RouterLink to="#les-selecteurs-jquery-Â«-avances-Â»">Les sÃ©lecteurs jQuery Â« avancÃ©s Â»</RouterLink></li><li><RouterLink to="#l-inspecteur-d-elements">L&#39;inspecteur d&#39;Ã©lÃ©ments</RouterLink></li></ul></li></ul></nav>
</details>
<h2 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction" aria-hidden="true">#</a> Introduction</h2>
<p>Le JavaScriptâ€¦ Vous allez l'aimerâ€¦ Ou le dÃ©tester ! Mais en tout cas c'est l'incontournable du dÃ©veloppeur Web. Le JavaScript est maintenant partout, dans votre navigateur bien Ã©videmment, mais Ã©galement sur nos serveurs, mais aussi dans nos applications! Bref il est littÃ©ralement partout.</p>
<p>Dans ce cours nous allons voir les bases du JavaScript, nous ne reverrons pas ici <RouterLink to="/tp/php/support.html">les bases du dÃ©veloppement comme ce que nous avons fait en PHP</RouterLink>.</p>
<p><img src="@source/tp/javascript/res/logo.svg" alt="Logo JavaScript"></p>
<div class="custom-container warning"><p class="custom-container-title">PrÃ©requis</p>
<p>Le cours fait rÃ©fÃ©rence Ã  des notions de programmation orientÃ©e-objet, je ne couvrirais pas les bases de la programmation objet.</p>
</div>
<h2 id="le-fonctionnement" tabindex="-1"><a class="header-anchor" href="#le-fonctionnement" aria-hidden="true">#</a> Le fonctionnement</h2>
<p>Le JavaScript est un langage de programmation relativement rÃ©cent il date de <strong>1994</strong>. Cependant il a connu une Ã©volution assez rapide ces derniÃ¨res annÃ©es et ne ressemble plus vraiment au JavaScript du dÃ©but.</p>
<p>Le JavaScript est une implÃ©mentation d'une norme plus large l'ECMAScript (aussi appelÃ© ES20XX, mais Ã©galement ESX), cette norme dÃ©finit le fonctionnement du langage aussi bien dans un navigateur, mais Ã©galement sur d'autres supports comme les serveurs.</p>
<p>Nous allons utiliser au maximum les derniÃ¨res fonctionnalitÃ©s de la norme (ES6), celle-ci est maintenant largement compatible avec le parc de navigateur actuel. Si par hasard vous devez supporter un navigateur incompatible, nous aborderons les options pour Â« le gÃ©rer Â».</p>
<p>Le JavaScript qui fonctionne dans votre navigateur est un langage <strong>client</strong> il est donc exÃ©cutÃ© <em>dans votre navigateur</em> ce dÃ©tail est important. Ã‡a veut dire que votre serveur ne sera pas du tout sollicitÃ© lors de l'exÃ©cution d'un programme codÃ© en JavaScript.</p>
<p>Votre navigateur est trÃ¨s puissant, tellement puissant que nous allons pouvoir faire Ã©normÃ©ment de choses en JavaScript :</p>
<ul>
<li>ContrÃ´le de saisie.</li>
<li>InteractivitÃ© avec le client (interaction avec l'utilisateur, clic, clavier, mouvement de la souris).</li>
<li>Afficher / masquÃ© des Ã©lÃ©ments aux cliques.</li>
<li>Ajouter des Ã©lÃ©ments dans une page, manipuler la CSS.</li>
<li>Charger des Ã©lÃ©ments de maniÃ¨re asynchrone via le RÃ©seau (Ajax)</li>
<li>Utiliser les Cookies (comme en PHP).</li>
<li>Sauvegarder des donnÃ©es sur le poste du client (LocalStorage).</li>
</ul>
<p>Maisâ€¦ Ce nâ€™est pas tout ! Votre navigateur est tellement puissant que vous allez pouvoir faire :</p>
<ul>
<li>Des applications en JavaScript</li>
<li>AccÃ©der au Bluetooth de votre appareil</li>
<li>AccÃ©der au GPS</li>
<li>La liste est vraiment infinie !</li>
</ul>
<div class="custom-container tip"><p class="custom-container-title">TIP</p>
<p>Le JavaScript est vraiment le miroir de la vitesse avec laquelle Web est une plateforme qui va trÃ¨s vite. Il ne se passe pas 6 mois sans que vous puissiez faire encore plus.</p>
<p>La veille dans ce domaine est donc primordiale. Nous allons voir ici seulement les bases de ce qui vous servira plus tard dans votre mÃ©tier.</p>
</div>
<div class="custom-container warning"><p class="custom-container-title">WARNING</p>
<p>Le JavaScript est puissant, tellement puissant que votre navigateur Â« vous bridera Â». Afin que vous n'abusiez pas des fonctionnalitÃ©s, certaines d'entre elles sont soumises Ã  permission / validation. Comme votre mobile donc :</p>
<p><img src="@source/tp/javascript/res/permissions.png" alt="Permissions chrome Exemple"></p>
<p>Autres limitations, votre code JavaScript ne peut pas accÃ©der :</p>
<ul>
<li>Aux autres onglets actuellement ouverts.</li>
<li>Aux domaines autres que celui sur lequel vous vous trouvez (Ajax).</li>
</ul>
<p><img src="@source/tp/javascript/res/permissions2.png" alt="Permissions 2"></p>
</div>
<h3 id="moteur-javascript" tabindex="-1"><a class="header-anchor" href="#moteur-javascript" aria-hidden="true">#</a> Moteur JavaScript</h3>
<p>Votre navigateur possÃ¨de donc un Â« Moteur JavaScript Â» que l'on appelle parfois la Â« JavaScript Virtual Machine Â» (rien Ã  voir avec <em>le Java</em>). Chaque moteur JavaScript est donc diffÃ©rent, et fonctionne diffÃ©remment, ils ont des noms comme vos navigateurs. Par exemple :</p>
<ul>
<li>V8 : Chrome, OpÃ©ra, Edge.</li>
<li>SpiderMonkey : Firefox.</li>
<li>Chakra pour Internet Explorer.</li>
<li>ChakraCore Microsoft Edge (avant l'Ã©vÃ¨nement Â« Chromium Â»)</li>
<li>Nitro et SquirrelFish pour Safari.</li>
</ul>
<div class="custom-container tip"><p class="custom-container-title">Un Moteur ?</p>
<p>Le moteur a pour but de :</p>
<ul>
<li>Lis le JavaScript.</li>
<li>Compile le JavaScript en langage machine (et le valide).</li>
<li>Votre ordinateur exÃ©cute le langage machine (trÃ¨s rapide)</li>
</ul>
</div>
<h3 id="pourquoi-le-javascript-est-il-donc-incontournable" tabindex="-1"><a class="header-anchor" href="#pourquoi-le-javascript-est-il-donc-incontournable" aria-hidden="true">#</a> Pourquoi le JavaScript est-il donc incontournable.</h3>
<ul>
<li>IntÃ©gration avec le HTML/CSS.</li>
<li>Simple d'apprentissage et dans la manipulation.</li>
<li>Actif par dÃ©faut, et supportÃ© par l'ensemble des navigateurs.</li>
</ul>
<h2 id="les-navigateurs" tabindex="-1"><a class="header-anchor" href="#les-navigateurs" aria-hidden="true">#</a> Les navigateurs</h2>
<p>L'autre gros sujet du JS est le supportâ€¦ Vous Ãªtes certainement jeunes, vous n'avez connu <em>que Google Chrome</em>, la rÃ©alitÃ© est plus complexe que Ã§a (surtout en entreprise). Dans votre carriÃ¨re vous allez rencontrer des blocages et obligations de support. MÃªme en 2020 nous avons des navigateurs diffÃ©rents (pourvu que Ã§a dure) :</p>
<ul>
<li>Google Chrome</li>
<li>Safari</li>
<li>Firefox</li>
<li>Edge</li>
<li>Internet Explorer <code>&gt; 11</code></li>
<li>Interne Explorer <code>&lt; 10</code></li>
</ul>
<p>Ã‡a vous parait trÃ¨s certainement anecdotique, mais les navigateurs n'interprÃ¨tent pas vraiment de la mÃªme faÃ§on le code, le JavaScript en fait parti. En fonction des navigateurs, le support sera plus ou moins complet. En 2020 nous n'avons plus trop de problÃ¨mes. L'ensemble des navigateurs support Â« Ã  peu prÃ¨s lÃ  mÃªme choses Â». Mais avant ce n'Ã©tait clairement pas le cas.</p>
<p>Nous allons donc avoir besoin de <a href="https://polyfill.io/v3/" target="_blank" rel="noopener noreferrer"><em>librairies</em> (appelÃ© polyfill)<ExternalLinkIcon/></a>, ces librairies ont pour but d'ajouter le support de fonctionnalitÃ© moderne sur dâ€™anciens navigateurs. Le support n'est Ã©videmment pas total, et souvent les performances sont un peu moins bonnes. Mais cette solution est souvent la meilleure pour supporter les anciens navigateurs.</p>
<h2 id="librairies-or-not" tabindex="-1"><a class="header-anchor" href="#librairies-or-not" aria-hidden="true">#</a> Librairies or not ?</h2>
<p>C'est lÃ  grande question ! En JS nous avons la possibilitÃ© de nous passer complÃ¨tement de librairie afin d'utiliser uniquement ce que propose le navigateur, c'est ce que l'on appelle <code>VanillaJS</code>. En 2020 Ã§a fonctionne trÃ¨s bien! C'est mÃªme ce que j'aurais tendance Ã  conseillerâ€¦ Mais (oui il y a toujours un mais) la rÃ©alitÃ© est quâ€™en agence vous allez rencontrer des projets qui utiliseront <a href="https://jquery.com/" target="_blank" rel="noopener noreferrer">jQuery<ExternalLinkIcon/></a>.</p>
<p>Au vu du temps que nous allons avoir Ã  consacrer au JS Ã§a me semble important de vous parler un peu de <code>jQuery</code> mais Ã©galement des Ã©quivalents <code>VanillaJS</code>.</p>
<p>Je ne dis pas que <code>jQuery</code> est un mauvais choixâ€¦ Je pense par contre que celui-ci n'est plus forcÃ©ment un Â« obligatoire Â» Ã  partir de maintenant.</p>
<div class="custom-container tip"><p class="custom-container-title">Et les Frameworks alors ?</p>
<p>Ah en voilÃ  une bonne question ! Les frameworks JS sont un sujet aussi vaste que le JS en lui-mÃªme, nous aurons le plaisir de les pratiquer ultÃ©rieurement. Dans tous les cas, ce que nous allons voir ensemble Â« dans les bases du JS Â» nous resservira avec les frameworks.</p>
<p><em>Sachez juste qu'il est possible de tout faire avec un framework JS (type <code>VueJS</code>), mais ce n'est pas forcÃ©ment la rÃ©ponse Ã  toutes les questions.</em></p>
</div>
<h2 id="les-animations" tabindex="-1"><a class="header-anchor" href="#les-animations" aria-hidden="true">#</a> Les animations</h2>
<p>Attention Ã  ne pas tomber dans le piÃ¨ge du tout JavaScript. Il peut-Ãªtre tentant de tout faire un JavaScript, il fut un temps ou c'Ã©tait une solution acceptable. Maintenant que nos navigateurs sont trÃ¨s puissants, cette solution devient mÃªme imaginableâ€¦</p>
<p>Mais <strong>il ne faut pas le faire</strong> ! Si vous souhaitez animer votre page <strong>privilÃ©gier au maximum le combo CSS + HTML</strong> (et JavaScript si un pilotage est nÃ©cessaire). Pourquoi est-ce important ? C'est important, car l'exÃ©cution du votre CSS est complÃ¨tement diffÃ©rentes que le JS :</p>
<ul>
<li>La CSS est en grande partie gÃ©rÃ©e par votre GPU (Carte graphique). Cela utilise donc des instructions trÃ¨s spÃ©cifiques, optimisÃ©, et trÃ¨s rapide (fluide).</li>
<li>Le JS est quant Ã  lui exÃ©cutÃ© sur votre CPU (Processeur). Donc, en fonction de votre ordinateur les performances sont plus ou moins bonnes (et consomme plus de batteries).</li>
</ul>
<div class="custom-container tip"><p class="custom-container-title">Vous vous souvenez des boucles ?</p>
<p>Les animations en JS sont faites de boucles Â« infinies Â» ou trÃ¨s longues. C'est donc trÃ¨s peu optimisÃ©. <strong>MÃ©fiance donc !</strong></p>
</div>
<h2 id="javascript-do-you-speak-javascript" tabindex="-1"><a class="header-anchor" href="#javascript-do-you-speak-javascript" aria-hidden="true">#</a> JavaScript do you speak JavaScript ?</h2>
<p>Nous allons voir plus tard que le JavaScript Ã  certains defaut. Nous ne l'Ã©voquerons pas vraiment dans ce cours, mais il est possible d'Ã©crire du JavaScript dans d'autres langages qui seront ensuite Â« transpilÃ© Â» (converti lors d'une Ã©tape de compilation) en du JavaScript :</p>
<ul>
<li>CoffeeScript, syntaxe plus concise trÃ¨s utilisÃ©e par les utilisateurs de Ruby.</li>
<li>TypeScript, trÃ¨s populaire, il permet principalement de typer Â« fortement les donnÃ©es. Il permet de crÃ©er du code propre mÃªme dans le cas de gros projets complexes. Il est dÃ©veloppÃ© par Microsoft. (TrÃ¨s intÃ©ressant).</li>
<li>Kotlin, Kotlin le langage utilisÃ© par la plateforme Android de Google. Le compilateur permet de crÃ©er Ã©galement du code JS Ã  partir de fichier <code>.kt</code>.</li>
</ul>
<p>Il y a encore beaucoup d'exemples, le langage n'Ã©tant que Â« TranspilÃ© Â» il est important de comprendre le JavaScript pour l'utiliser efficacement.</p>
<h2 id="les-outils-du-developpeur" tabindex="-1"><a class="header-anchor" href="#les-outils-du-developpeur" aria-hidden="true">#</a> Les outils du dÃ©veloppeur</h2>
<p>Le JavaScript ne dÃ©roge pas Ã  la rÃ¨gle, pour bien travailler il nous faut de bonnes ressources. Pour le JS je vous propose :</p>
<ul>
<li><a href="https://developer.mozilla.org/" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/<ExternalLinkIcon/></a></li>
<li><a href="https://caniuse.com/" target="_blank" rel="noopener noreferrer">https://caniuse.com/<ExternalLinkIcon/></a></li>
<li><a href="https://web.dev/" target="_blank" rel="noopener noreferrer">https://web.dev/<ExternalLinkIcon/></a></li>
<li><a href="https://kangax.github.io/compat-table/es6/" target="_blank" rel="noopener noreferrer">https://kangax.github.io/compat-table/es6/<ExternalLinkIcon/></a></li>
</ul>
<div class="custom-container tip"><p class="custom-container-title">Un instant</p>
<p>Bien Ã©videmment cette liste peut-Ãªtre bien plus grande. N'hÃ©sitez pas Ã  vous inspirer :</p>
<ul>
<li>De certains projets Github.</li>
<li>De compte Twitter</li>
<li>â€¦</li>
</ul>
</div>
<h3 id="les-ide" tabindex="-1"><a class="header-anchor" href="#les-ide" aria-hidden="true">#</a> Les IDE</h3>
<p>L'IDE est aussi important que les idÃ©es. Pour Ã©diter du JavaScript, vous pouvez utiliser un simple Ã©diteur de texte (type Notepad). Cependant, je vous dÃ©conseille vraiment de le faire, Ã©crire du JavaScript peut parfois Ãªtre complexe, et il faut bien l'avouer un peu d'aide de la part d'un IDE peut-Ãªtre <strong>trÃ¨s trÃ¨s intÃ©ressant</strong>, vous avez beaucoup de possibilitÃ©s :</p>
<ul>
<li>WebStorm (Payant, mais trÃ¨s bon).</li>
<li>VisualStudio Code (Gratuit, bon aussi).</li>
<li>Atom (je ne le conseille plus).</li>
<li>Vim (pour les experts seulement).</li>
</ul>
<div class="custom-container tip"><p class="custom-container-title">Astuce du pro</p>
<p>Quel que soit l'Ã©diteur choisi, il faut savoir l'exploiter. N'hÃ©sitez pas Ã  l'apprivoiser pour connaitre les options et donc devenir efficace avec.</p>
</div>
<h3 id="la-console" tabindex="-1"><a class="header-anchor" href="#la-console" aria-hidden="true">#</a> La console</h3>
<p>Nous avons dÃ©jÃ  utilisÃ© Â« La console Â» de votre navigateur quand nous faisions du HTML. Celle-ci sera encore plus utile avec le JS, elle nous permettra :</p>
<ul>
<li>De voir les Erreurs et Warnings.</li>
<li>Faire des points d'arrÃªt.</li>
<li>Afficher des logs.</li>
</ul>
<p>Cette console existe sur l'ensemble des navigateurs modernes. Elle contient des informations <strong>trÃ¨s prÃ©cieuse</strong> Ã  partir de maintenant, j'aimerais que celle-ci soit toujours ouverte lors de vos developpement.</p>
<div class="custom-container tip"><p class="custom-container-title">Cas concret</p>
<p><img src="@source/tp/javascript/res/console.png" alt="Cas concret"></p>
<p>La ligne <code>Uncaught ReferenceError: test is not defined at index.html:11</code>, nous indique, que notre page <code>index.html</code> contient une erreur Ã  la ligne 11.</p>
<p>Vous pouvez, vous aussi tester <RouterLink to="/demo/js/index.html">cette page en cliquant ici</RouterLink></p>
</div>
<h2 id="votre-premier-hello-world" tabindex="-1"><a class="header-anchor" href="#votre-premier-hello-world" aria-hidden="true">#</a> Votre premier Hello World</h2>
<p>Concentrons-nous maintenant sur le code en lui-mÃªme. Nous allons travailler exclusivement dans notre navigateur. Un peu comme la balise <code>form</code> la balise <code>script</code> peut-Ãªtre mise n'importe oÃ¹ dans le code HTML. Cette balise peut fonctionner de deux faÃ§ons diffÃ©rentes :</p>
<ul>
<li>Code JavaScript directement dans le code</li>
<li>Code JavaScript chargÃ© depuis un fichier externe.</li>
</ul>
<p><em>Directement dans le code :</em></p>
<div class="language-html ext-html line-numbers-mode"><pre v-pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Titre de la bage<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Lorem Ipsum<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Bonjour Ã  tous"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Lorem Ipsum suite<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><em>Via un script externe :</em></p>
<div class="language-html ext-html line-numbers-mode"><pre v-pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/public/js/votre_script.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">Astuce de Pro</p>
<p>Vous pouvez bien Ã©videmment mettre <strong>plusieurs</strong> balises script. Un peu comme le PHP l'organisation est importante, n'hÃ©sitez pas Ã  dÃ©couper votre code (encore, et encore, et encore).</p>
<div class="language-html ext-html line-numbers-mode"><pre v-pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/public/js/votre_script1.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/public/js/votre_script2.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/public/js/votre_script3.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Vous pouvez Ã©galement charger des scripts Â« externe Â» :</p>
<div class="language-html ext-html line-numbers-mode"><pre v-pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></div>
<div class="custom-container warning"><p class="custom-container-title">WARNING</p>
<p>Attention Ã  la sÃ©curitÃ© dans le cas du chargement via un CDN. Vous charger du contenu Â« non sure depuis Internet Â». C'est Ã  mon sens un trÃ¨s gros risque.</p>
</div>
<h3 id="mise-en-pratique" tabindex="-1"><a class="header-anchor" href="#mise-en-pratique" aria-hidden="true">#</a> Mise en pratique</h3>
<p>Maintenant que vous avez vu les basesâ€¦ Place Ã  la pratique avec <RouterLink to="/tp/javascript/tp1.html">le TP1</RouterLink></p>
<p>Rien de bien compliquÃ© dans le TP, il s'agit juste de mettre en pratique.</p>
<h2 id="plusieurs-lignes" tabindex="-1"><a class="header-anchor" href="#plusieurs-lignes" aria-hidden="true">#</a> Plusieurs lignes ?</h2>
<p>Pour l'instant nous avons Ã©crit du code trÃ¨s simple. Nous allons plus tard avoir bien Ã©videmment des fonctions, des conditions des boucles, bref plusieurs lignes de code. En JavaScript chaque ligne de code <strong>doivent se terminer par un <code>;</code></strong>.</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Ceci est un message dans la console"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"BloquÃ©"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="les-commentaires" tabindex="-1"><a class="header-anchor" href="#les-commentaires" aria-hidden="true">#</a> Les commentaires</h2>
<p>Commenter son code c'est important (pour vous). Il faut le faire dÃ¨s que cela est nÃ©cessaire :</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * Commentaire multignes
 * Par exemple en dÃ©but de fichier pour dÃ©tailler le contenu
 */</span>

<span class="token comment">// Commenter une ligne.</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Ceci est un exemple"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Ceci est un exemple 2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Peux Ã©galement Ãªtre placÃ© en fin de ligne.</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">Astuce d'ancien !</p>
<p>CommentÃ©, commentÃ©, commente votre code. Il n'y a jamais trop de commentaires dans du code. Et par pitiÃ© ğŸ™ utilisÃ© les raccourcis clavier de votre Ã©diteur pour commenter ğŸ‘</p>
</div>
<h2 id="les-variables" tabindex="-1"><a class="header-anchor" href="#les-variables" aria-hidden="true">#</a> Les variables</h2>
<p>Comme en PHP (ou d'autres langages), il est possible d'Ã©crire des variables en JavaScript. Les variables fonctionnent de la mÃªme faÃ§on qu'en PHP, celle-ci sont Â« temporaire Â» leur contenu est remis Ã  zÃ©ro Ã  chaque lancement de votre script.</p>
<p>Nous avons deux types de variables en PHP :</p>
<ul>
<li>Les variables, fonctionnement classique.</li>
<li>Les constantes, variable qui ne peut-Ãªtre Ã©crite qu'une seule fois. Si vous tentez de Â« l'Ã©craser Â» votre navigateur produira une erreur.</li>
</ul>
<h3 id="les-variables-1" tabindex="-1"><a class="header-anchor" href="#les-variables-1" aria-hidden="true">#</a> Les variables</h3>
<p>Les variables s'utilisent de la mÃªme faÃ§on que ce que vous avez dÃ©jÃ  vu Ã  savoir :</p>
<ul>
<li>Une dÃ©claration</li>
<li>Des assignations</li>
<li>Des Â« manipulations Â» (conditions, boucles, fonctions, etc.)</li>
</ul>
<p>La dÃ©claration d'une variable doit-Ãªtre faite avec le mot-clÃ© <code>let</code>, par exemple :</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">let</span> nom<span class="token punctuation">;</span>
nom <span class="token operator">=</span> <span class="token string">"Brosseau"</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>nom<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Ou alors en une seule ligne.</span>
<span class="token keyword">let</span> nom <span class="token operator">=</span> <span class="token string">"Brosesau"</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>nom<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">Un peu d'historiques</p>
<p>L'usage du mot-clÃ© <code>let</code> est plutÃ´t rÃ©cent en JavaScript. Historiquement nous utilisions plus le mot <code>var</code>. Il n'y a pas vraiment de diffÃ©rence entre les deux. Sachez juste que maintenant vous devez utiliser <code>let</code> plutÃ´t que <code>var</code>.</p>
</div>
<div class="custom-container warning"><p class="custom-container-title">Attention</p>
<p>Contrairement au PHP, une variable dÃ©clarÃ©e ne peut-Ãªtre redÃ©clarÃ©e, si vous tenter de le faire votre navigateur produira une erreur dans la console. :</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">let</span> nom <span class="token operator">=</span> <span class="token string">"Valentin"</span><span class="token punctuation">;</span>
nom <span class="token operator">=</span> <span class="token string">"Thomas"</span><span class="token punctuation">;</span> <span class="token comment">// Pas de problÃ¨me</span>

<span class="token keyword">let</span> nom <span class="token operator">=</span> <span class="token string">"Romain"</span><span class="token punctuation">;</span> <span class="token comment">// Erreur.</span>
<span class="token comment">// VM1498:4 Uncaught SyntaxError: Identifier 'nom' has already been declared</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div>
<h3 id="les-constantes" tabindex="-1"><a class="header-anchor" href="#les-constantes" aria-hidden="true">#</a> Les constantes</h3>
<p>Une constante s'utilise comme une variable classique, sauf que celle-ci ne peut-Ãªtre Ã©crasÃ©. Nous utiliserons ce type de variable pour Â« empÃªcher Â» que certaines valeurs puissent Ãªtre perdues via une mauvaise ligne de code.</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> age_du_capitaine <span class="token operator">=</span> <span class="token number">84</span><span class="token punctuation">;</span>
age_du_capitaine <span class="token operator">=</span> <span class="token number">33</span><span class="token punctuation">;</span>

<span class="token comment">// !! ERREUR !!</span>
<span class="token comment">// VM1583:2 Uncaught TypeError: Assignment to constant variable.</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Un exemple d'usage ? Par exemple, un lien Â« vers une API Â», ou encore la couleur principale de votre site web. OÃ¹ plus simplement mÃ©moriser sous Â« une Ã©tiquette Â» des valeurs plus longue :</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">IN_PROGRESS</span> <span class="token operator">=</span> <span class="token string">"200"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">DONE</span> <span class="token operator">=</span> <span class="token string">"400"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">FAILED</span> <span class="token operator">=</span> <span class="token string">"1000"</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Il est en effet plus simple de lire un ligne :</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>order<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token constant">DONE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Commande finalisÃ©e"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Que mÃ©moriser que <code>400 == Done</code> :</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>order<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">400</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Commande finalisÃ©e"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">Astuce de pro</p>
<p>Je vous conseille de nommer vos constantes avec un nom en majuscule. Ã‡a vous permettra de toutes de suite les reconnaitre</p>
</div>
<h3 id="les-types" tabindex="-1"><a class="header-anchor" href="#les-types" aria-hidden="true">#</a> Les types</h3>
<p>Comme en PHP les variables possÃ¨dent des types Â« implicitement dÃ©terminÃ©s Â» :</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Contenu</th>
<th>Type d'opÃ©ration</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>string</code></td>
<td>&quot;Une chaine de caractÃ¨re&quot;</td>
<td>Gestion du texte, concatÃ©nation</td>
<td>Permets de stocker du texte (saisie utilisateur par exemple).</td>
</tr>
<tr>
<td><code>int</code></td>
<td>42</td>
<td>OpÃ©ration mathÃ©matique</td>
<td>Comme en mathÃ©matique</td>
</tr>
<tr>
<td><code>boolean</code></td>
<td><code>True</code> ou <code>False</code></td>
<td>OpÃ©ration logique</td>
<td>Permets de faire des actions logiques. C'est un type trÃ¨s important en informatique</td>
</tr>
<tr>
<td><code>float</code></td>
<td>10.3</td>
<td>OpÃ©ration mathÃ©matique</td>
<td>Comme en mathÃ©matique. Attention la notation du chiffre Ã  virgule est avec un <code>.</code>.</td>
</tr>
<tr>
<td><code>array</code></td>
<td>[&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</td>
<td></td>
<td>Contiens des listes de Â« quelques choses Â»</td>
</tr>
<tr>
<td><code>object</code></td>
<td><code>{nom: &quot;Brosseau&quot;, prenom: &quot;Valentin&quot;}</code></td>
<td></td>
<td>Structure de donnÃ©es</td>
</tr>
</tbody>
</table>
<p>En JS, nous n'avons pas de Â« Tableaux associatifs Â», nous avons Ã  la place un type <code>object</code>, il nous permettra de structurer au mieux nos donnÃ©es.</p>
<h3 id="a-faire" tabindex="-1"><a class="header-anchor" href="#a-faire" aria-hidden="true">#</a> Ã€ faire</h3>
<p>Nous avons vu comment dÃ©clarer des variables, <RouterLink to="/tp/javascript/tp1.1.html">je vous propose de les manipuler un peu avec le TP 1.1</RouterLink></p>
<h2 id="manipuler-les-donnees" tabindex="-1"><a class="header-anchor" href="#manipuler-les-donnees" aria-hidden="true">#</a> Manipuler les donnÃ©es</h2>
<p>Un langage de programmation est prÃ©vu pour manipuler des donnÃ©es. Pour le JavaScript c'est lÃ  mÃªme chose, toutes les opÃ©rations vu en PHP fonctionneront de la mÃªme faÃ§on en JS, la synthaxe sera trÃ¨s proche voir identique. Voici quelques exemples.</p>
<h3 id="les-conditions" tabindex="-1"><a class="header-anchor" href="#les-conditions" aria-hidden="true">#</a> Les conditions</h3>
<p>Aucune diffÃ©rence par rapport Ã  ce que nous avons prÃ©cÃ©demment vu ensemble :</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// Exemple 1</span>
<span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>age <span class="token operator">></span> <span class="token number">18</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Coucou je suis une alerte"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Exemple 2</span>
<span class="token keyword">let</span> estMajeur <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>estMajeur<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Est Ã©quivalent Ã  estMajeur == true</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"La personne est majeur"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Exemple 3</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">maFonctionDeTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>
    <span class="token string">"la fonction est appelÃ©, et si celle-ci Â« return Â» true l'alert est affichÃ©"</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="les-boucles" tabindex="-1"><a class="header-anchor" href="#les-boucles" aria-hidden="true">#</a> Les boucles</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Votre premiÃ¨re boucle infinie"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// Parcours l'ensemble du tableau</span>
arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Transforme le tableau</span>
arrModif <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> i <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// arrModif contiendra => [2, 4, 6, 8];</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="les-fonctions" tabindex="-1"><a class="header-anchor" href="#les-fonctions" aria-hidden="true">#</a> Les fonctions</h3>
<p>Nous pouvons dÃ©clarer des fonctions en JS :</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// DÃ©clarer / CrÃ©er une fonction</span>
<span class="token keyword">function</span> <span class="token function">maFonction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// DÃ©clarer / CrÃ©er une fonction</span>
<span class="token keyword">function</span> <span class="token function">maFonctionQuiRetourne42</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">addition</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// L'appeler</span>
<span class="token function">maFonction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">maFonctionQuiRetourne42</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Affiche dans la console 42</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">addition</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Affiche une alert avec le rÃ©sultat de l'addition 40 + 2 => 42</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>Elle fonctionne et s'utilise comme ce que nous avons prÃ©cÃ©demment vu.</p>
<h3 id="a-faire-1" tabindex="-1"><a class="header-anchor" href="#a-faire-1" aria-hidden="true">#</a> Ã€ faire</h3>
<p>Tester en JavaScript l'usage de Fonctions, Condition, et Boucle. (Nous utiliserons plus en dÃ©tail c'est Ã©lÃ©ment aprÃ¨s avoir vu comment manipuler le DOM)</p>
<h2 id="manipuler-le-html-et-la-css" tabindex="-1"><a class="header-anchor" href="#manipuler-le-html-et-la-css" aria-hidden="true">#</a> Manipuler le HTML et la CSS</h2>
<p>Comme je disais prÃ©cÃ©demment, le JavaScript et le HTML sont Â« entiÃ¨rement Â» compatible, vous pouvez crÃ©er, supprimer, modifier n'import quels Ã©lÃ©ments prÃ©sent dans votre page. Il est donc possible de crÃ©er entiÃ¨rement une page HTML via du JS. Il est Ã©galement possible de modifier le style de chacun des Ã©lÃ©ments prÃ©sents dans votre page Internet.</p>
<p>Cette interaction entre les deux, nous permettra plus tard de crÃ©er Â« de vraies expÃ©riences Â» 100% en JavaScript.</p>
<div class="custom-container danger"><p class="custom-container-title">Une limiteâ€¦</p>
<p>Manipuler votre page aucun problÃ¨me. Par contre attention, impossible de modifier du code Â« qui ne vous appartient pas Â», c'est-Ã -dire dans une <code>iframe</code> ou dans un autre onglet que la page actuelle.</p>
</div>
<h3 id="creer-des-elements-dans-la-page" tabindex="-1"><a class="header-anchor" href="#creer-des-elements-dans-la-page" aria-hidden="true">#</a> CrÃ©er des Ã©lÃ©ments dans la page</h3>
<p>Je ne pense pas qu'il soit trÃ¨s important de connaitre ce genre de manipulation, mais je constate qu'en entreprise certains d'entre vous seront confrontÃ©s Ã  ce genre de problÃ©matique. Vous avez la possibilitÃ© de crÃ©er n'importe quel type d'Ã©lÃ©ment directement depuis votre code JS.</p>
<p>Votre navigateur ne fera aucune distinction entre un Ã©lÃ©ment crÃ©Ã© Â« normalement Â» et un Ã©lÃ©ment crÃ©Ã© via le JavaScript. La crÃ©ation d'un Ã©lÃ©ment se passera en deux temps :</p>
<ul>
<li>Le crÃ©er l'Ã©lÃ©ment, le personnaliser (contenu, texte, css).</li>
<li>L'ajouter dans votre page</li>
</ul>
<h3 id="le-dom" tabindex="-1"><a class="header-anchor" href="#le-dom" aria-hidden="true">#</a> Le DOM</h3>
<p>Avant d'Ã©crire du code, un peu de thÃ©orie ! Votre navigateur n'est pas magique, il repose sur une logique qui est toujours la mÃªme depuis le dÃ©but. Celui-ci repose sur ce quâ€™on l'arbre du DOM (<strong>D</strong>ocument <strong>O</strong>bject <strong>M</strong>odel). Nous parlerons donc d'un Arbre HTML, prenont un exemple :</p>
<div class="language-html ext-html line-numbers-mode"><pre v-pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>My Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>A heading<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://â€¦<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Link text<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Peut Ãªtre reprÃ©sentÃ© comme Ã§a :</p>
<p><img src="@source/tp/javascript/res/dom-sample.png" alt="Dom graph"></p>
<div class="custom-container tip"><p class="custom-container-title">Remarque</p>
<p>L'Arbre du DOM peut-Ãªtre trÃ¨s gros, nous allons plus tard parler de ShadowDow / Dom Virtuel. MÃªme si vous ne manipulez pas cette notion il est important de voir que celle-ci existe. Elle est pour l'instant la pierre angulaire des Frameworks JS moderne.</p>
</div>
<h3 id="exemple-de-creation-d-elements" tabindex="-1"><a class="header-anchor" href="#exemple-de-creation-d-elements" aria-hidden="true">#</a> Exemple de crÃ©ation d'Ã©lÃ©ments</h3>
<p>La logique est toujours la mÃªme :</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">var</span> h <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"h1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// CrÃ©ation de l'Ã©lÃ©ment h1</span>
h<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">"Ceci est un titre"</span><span class="token punctuation">;</span> <span class="token comment">// Ajout du texte dans le h1</span>
h<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">"titleClass"</span><span class="token punctuation">;</span> <span class="token comment">// DÃ©finition d'un titre pour l'Ã©lÃ©ment</span>

<span class="token comment">// Ajout du titre dans le body de la page courante.</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Ou a un endroit prÃ©cis</span>
document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"monId"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Dans une page Ã§a peut donner :</p>
<div class="language-html ext-html line-numbers-mode"><pre v-pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fr<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Ma page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
      <span class="token keyword">var</span> h <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"h1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// CrÃ©ation de l'Ã©lÃ©ment h1</span>
      h<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">"Ceci est un titre"</span><span class="token punctuation">;</span> <span class="token comment">// Ajout du texte dans le h1</span>
      h<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">"titleClass"</span><span class="token punctuation">;</span> <span class="token comment">// DÃ©finition d'un titre pour l'Ã©lÃ©ment</span>

      <span class="token comment">// Ajout du titre dans la page en cours</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">appendChild ?</p>
<p>Dans le prÃ©cÃ©dent exemple, nous avons ajoutÃ© l'Ã©lÃ©ment Â« Ã  la fin Â» du body. Mais d'autres options existent :</p>
<ul>
<li><code>node.append(nodes ou strings)</code> â€“ ajoute Â« nodes ou strings Â» Ã  la fin,</li>
<li><code>node.prepend(nodes ou strings)</code> â€“ ajoute Â« nodes ou strings Â» au dÃ©but,</li>
<li><code>node.before(nodes ou strings)</code> â€“- ajoute Â« nodes ou strings Â» avant le node,</li>
<li><code>node.after(nodes ou strings)</code> â€“- ajoute Â« nodes ou strings Â» aprÃ¨s le node,</li>
<li><code>node.replaceWith(nodes ou strings)</code> â€“- remplace le node par l'Ã©lÃ©ment fourni Â« nodes or strings Â».</li>
</ul>
<p>:warning Nous allons voir qu'il est possible de choisir le <code>node</code> via un sÃ©lecteur.</p>
</div>
<h4 id="a-faire-2" tabindex="-1"><a class="header-anchor" href="#a-faire-2" aria-hidden="true">#</a> Ã€ faire</h4>
<p>Je vous laisse tester dans votre navigateur.</p>
<h3 id="exemple-de-creation-d-elements-version-alternative" tabindex="-1"><a class="header-anchor" href="#exemple-de-creation-d-elements-version-alternative" aria-hidden="true">#</a> Exemple de crÃ©ation d'Ã©lÃ©ments version alternative</h3>
<p>Nous pouvons Ã©galement insÃ©rer Â« une chaine de caractÃ¨re Â», celle-ci sera transformÃ©e automatiquement en code HTML valide par votre navigateur :</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// Ajout du titre dans le body de la page courante.</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">insertAdjacentHTML</span><span class="token punctuation">(</span>
  <span class="token string">"afterend"</span><span class="token punctuation">,</span>
  <span class="token string">"&lt;h1 class='titleClass'>Ceci est un titre&lt;/h1>"</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">afterend ?</p>
<p>Comme dans l'exemple prÃ©cÃ©dent, c'est la position de l'Ã©lÃ©ment que vous souhaitez insÃ©rer. Les valeurs possibles sont les suivantes :</p>
<ul>
<li><code>beforebegin</code> : Avant l'Ã©lÃ©ment lui-mÃªme.</li>
<li><code>afterbegin</code> : Juste Ã  l'intÃ©rieur de l'Ã©lÃ©ment , avant son premier enfant.</li>
<li><code>beforeend</code> : Juste Ã  l'intÃ©rieur de l'Ã©lÃ©ment , aprÃ¨s son dernier enfant.</li>
<li><code>afterend</code> : AprÃ¨s Ã©lÃ©ment lui-mÃªme.</li>
</ul>
<p>L'exemple de la W3School est trÃ¨s explicite :</p>
<div class="language-html ext-html line-numbers-mode"><pre v-pre class="language-html"><code><span class="token comment">&lt;!-- beforebegin --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>
  <span class="token comment">&lt;!-- afterbegin --></span>
  foo
  <span class="token comment">&lt;!-- beforeend --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token comment">&lt;!-- afterend --></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></div>
<div class="custom-container danger"><p class="custom-container-title">Attention</p>
<p>Cette solution peut sembler tentanteâ€¦ Mais attention, si la valeur ajoutÃ©e contient une saisie utilisateur, vous risquez une XSS sur votre site Internet.</p>
<p>Donc mÃ©fiance.</p>
</div>
<h3 id="les-selecteurs" tabindex="-1"><a class="header-anchor" href="#les-selecteurs" aria-hidden="true">#</a> Les sÃ©lecteurs</h3>
<p>Vous vous doutez que nous allons pas tout gÃ©rer avec un simple <code>document.body</code>. Le JS nous offre beaucoup de possibilitÃ©, et nous offre surtout une Â« interface Â» trÃ¨s puissante pour choisir l'endroit oÃ¹ nous allons insÃ©rer un Ã©lÃ©ment (trÃ¨s trÃ¨s puissante vous allez voir).</p>
<p>Vous vous souvenez des sÃ©lecteurs en CSS ? Et bien, nous avons la mÃªme chose en JavaScript. Nous avons de <strong>base sans rien ajouter</strong> une mÃ©thode permettant de Â« trouver Â» un Ã©lÃ©ment dans le DOM</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// Retourne la liste (array) des Ã©lÃ©ments</span>
document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"#elementId"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">".maClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Retourn le premier Ã©lÃ©ment trouvÃ©</span>
document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#elementId"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".maClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">C'est Â« neuf Â»</p>
<p>Ces API (MÃ©thodes) sont trÃ¨s peu utilisÃ©s (voir mÃªme connues), elles sont pourtant trÃ¨s puissantes. Elles sont Ã  choisir si vous souhaitez faire du code moderne.</p>
<p>Sur Internet (voir dans du code existant), vous trouverez l'ancienne version Ã  savoir :</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"elementId"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">"maClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Aucun changement dans le fonctionnement.</p>
</div>
<h3 id="les-selecteurs-et-jquery" tabindex="-1"><a class="header-anchor" href="#les-selecteurs-et-jquery" aria-hidden="true">#</a> Les sÃ©lecteurs et jQuery</h3>
<p>Ã€ plusieurs reprises je vous ai parlÃ© de jQuery sans vraiment vous expliquer pourquoi celui-ci Ã©tait aussi populaire. jQuery est populaire, car il va nous permettre des raccourcis. Si on reprend l'exemple du sÃ©lecteur, jQuery va nous permettre d'unifier la maniÃ¨re dont ont trouve / manipule un Ã©lÃ©ment.</p>
<p>DÃ¨s lors que vous ajoutez jQuery dans votre code, nous allons avoir Ã  notre disposition un nouvelle Â« objet Â» nommÃ© tout simplement <code>$</code> (rien Ã  voir avec les variables en PHP), cet objet va nous permettre plein de choses (vraiment plein). Si on reprend la recherche d'un Ã©lÃ©ment :</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#elementId"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".maClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Je ne vais pas m'Ã©taler sur le sujet, mais si on souhaite masquer tous les Ã©lÃ©ments trouvÃ©s avec jQuery, et bien c'est <em>trÃ¨s</em> simpleâ€¦</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">Ajouter jQuery ?</p>
<p>C'est super simple, il suffit Â« juste Â» d'ajouter dans votre page :</p>
<div class="language-html ext-html line-numbers-mode"><pre v-pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></div>
<p>Pourquoi ne pas toujours utiliser jQuery alors ? Tout simplement que maintenant il est possible d'Ã©crire Â« sensiblement la mÃªme chose Â» directement en JavaScript sans Â« dÃ©pendance Ã  une librairie Â». (Comme nous l'avons vu par exemple avec <code>querySelectorAll</code> et <code>querySelector</code>).</p>
<h3 id="utiliser-le-resultat-d-un-selecteur" tabindex="-1"><a class="header-anchor" href="#utiliser-le-resultat-d-un-selecteur" aria-hidden="true">#</a> Utiliser le rÃ©sultat d'un sÃ©lecteur</h3>
<p>Nous avons vu qu'il Ã©tait possible de Â« sÃ©lectionner Â» un Ã©lÃ©ment en JavaScript. Cette variable est un accÃ¨s direct Ã  l'Ã©lÃ©ment prÃ©sent dans votre page.</p>
<p>Ã‡a veut dire que nous allons pouvoir Â« le manipuler Â», afin de modifier l'apparence d'un Ã©lÃ©ment prÃ©cis via le JS :</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">let</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"monId"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">;</span>

element<span class="token punctuation">.</span><span class="token function">insertAdjacentHTML</span><span class="token punctuation">(</span>
  <span class="token string">"beforebegin"</span><span class="token punctuation">,</span>
  <span class="token string">"&lt;h1 class='titleClass'>Ceci est un titre dans l'Ã©lÃ©ment&lt;/h1>"</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Exemples d'utilisations</span>
document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#elementId"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">"VoilÃ  valeur"</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">it</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  it<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">"Parcours chaque div et remplace le contenu par &lt;="</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// jQuery</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#elementId"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">"&lt;h1>Mon Titre&lt;/h1>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="jouer-sur-la-visibilite" tabindex="-1"><a class="header-anchor" href="#jouer-sur-la-visibilite" aria-hidden="true">#</a> Jouer sur la visibilitÃ©</h3>
<p>Maintenant que vous savez Â« obtenir un Ã©lÃ©ment Â» via le JavaScript, nous allons jouer sur la visibilitÃ©. Vous allez voir c'est trÃ¨s simple.</p>
<p><em>Cacher un Ã©lÃ©ment :</em></p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">let</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"monId"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">Style ? Vous avez dit Style ?</p>
<p>Et oui, nous avons accÃ¨s Ã  l'ensemble du style. Amusez-vous, il est possible de tout changer directement via le JS.</p>
</div>
<p><em>Ajouter une classe ?:</em></p>
<p>Vous n'aimez pas manipuler directement le style ? Moi non plusâ€¦ Ajouter une classe est Ã©galement possible !</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">let</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"monId"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"maClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="custom-container warning"><p class="custom-container-title">Hey ! classList ?</p>
<p>Ouiâ€¦ Il est possible de mettre Â« plusieurs classes Â», donc nous avons ici un tableau <code>array</code>. Un tableau se manipule avec des mÃ©thodes comme vues prÃ©cÃ©demment. Il faut donc utiliser la mÃ©thode <code>add</code> pour ajouter une classe.</p>
</div>
<h3 id="une-petite-mise-en-pratique-simple" tabindex="-1"><a class="header-anchor" href="#une-petite-mise-en-pratique-simple" aria-hidden="true">#</a> Une petite mise en pratique simple</h3>
<p>Nous allons crÃ©er une page fictive afin de tester un peu le fonctionnement :</p>
<div class="language-html ext-html line-numbers-mode"><pre v-pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monId<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      <span class="token comment">&lt;!-- Ajouter un titre ici en JavaScript --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>

    <span class="token comment">&lt;!-- Cacher la div suivante via le JS --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cacheMoi<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>lorem ipsumâ€¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>

    <span class="token comment">&lt;!-- Je souhaite que le texte soit rouge --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>redText<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Le texte prÃ©sent ici doit-Ãªtre rouge<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>

    <span class="token comment">&lt;!-- Ajouter ici un paragraphe (p) en JavaScript--></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
      <span class="token comment">// Vous devez Ã©crire votre code JavaScript ici.</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">Hou hou</p>
<p>Les consignes sont prÃ©sentes dans les commentaires du code fourni. Je vous laisse regarder, et tenter de faire les actions demandÃ©es.</p>
</div>
<p>(Vous pouvez retrouver <RouterLink to="/tp/javascript/tp1.2.html">cette introduction dans le TP1.2</RouterLink>)</p>
<h3 id="mise-en-pratique-1" tabindex="-1"><a class="header-anchor" href="#mise-en-pratique-1" aria-hidden="true">#</a> Mise en pratique</h3>
<p>J'ai encore beaucoup parlÃ©! Place Ã  une mise en pratique. Je vous propose de mettre en pratique tous que nous avons vu prÃ©cÃ©dement <RouterLink to="/tp/javascript/tp2.html">dans un TP regroupant CSS, HTML &amp; JS</RouterLink></p>
<p><RouterLink to="/tp/javascript/tp2.html">Pour la suite c'est par ici</RouterLink></p>
<h2 id="obtenir-les-valeurs-d-un-input" tabindex="-1"><a class="header-anchor" href="#obtenir-les-valeurs-d-un-input" aria-hidden="true">#</a> Obtenir les valeurs d'un input</h2>
<p>Nous avons vu qu'il Ã©tait possible de rÃ©cupÃ©rer les Ã©lÃ©ments dans la page pour les modifier visuellement. Mais il est Ã©galement possible d'obtenir les valeurs actuellement saisie dans la page :</p>
<div class="language-html ext-html line-numbers-mode"><pre v-pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monInput<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// VanillaJS</span>
document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"monInput"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>

<span class="token comment">// En jQuery</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#monInput"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="les-evenements" tabindex="-1"><a class="header-anchor" href="#les-evenements" aria-hidden="true">#</a> Les Ã©vÃ¨nements</h2>
<p>Nous avons vu pour l'instant du JS trÃ¨s simple, il ressemble beaucoup Ã  du code PHP c'est-Ã -dire sans grande interaction avec l'utilisateur.</p>
<p>Le but du JavaScript est vraiment d'interagir avec l'utilisateur, pour amÃ©liorer l'interactivitÃ© de votre site Internet afin par exemple de valider une saisie Â« cÃ´tÃ© client Â».</p>
<p>Pour Ã§a nous allons avoir Ã  notre disposition des Ã©vÃ¨nements, ces Ã©vÃ¨nements nous permettront de rÃ©agir Â« instantanÃ©ment Â» aux demandes de l'utilisateur. La construction des Ã©vÃ¨nements est toujours la mÃªme Ã  savoir Â« <strong>on</strong>quelque chose Â», par exemple :</p>
<ul>
<li>onclick</li>
<li>onsubmit</li>
<li>onresize</li>
<li>â€¦</li>
</ul>
<p>Nous avons deux faÃ§ons d'attacher les Ã©vÃ¨nements :</p>
<ul>
<li>Dans le DOM.</li>
<li>En JavaScript.</li>
</ul>
<hr>
<p><img src="@source/tp/javascript/res/event_click.png" alt="Event click"></p>
<p>(AppelÃ© au moment du clique par l'utilisateur utilisateur)</p>
<h3 id="dans-le-dom" tabindex="-1"><a class="header-anchor" href="#dans-le-dom" aria-hidden="true">#</a> Dans le DOM</h3>
<div class="language-html ext-html line-numbers-mode"><pre v-pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">maFonction</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Click ! <span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">function</span> <span class="token function">maFonction</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// elem => est le bouton sur lequel vous avez cliquÃ©</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="custom-container warning"><p class="custom-container-title">this ?</p>
<p>Le <code>this</code> corresponds Ã  l'Ã©lÃ©ment sur lequel vous avez cliquÃ©.</p>
</div>
<h3 id="en-javascript" tabindex="-1"><a class="header-anchor" href="#en-javascript" aria-hidden="true">#</a> En JavaScript</h3>
<div class="language-html ext-html line-numbers-mode"><pre v-pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Click ! <span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// Pure JS</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"btn"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> maFonction<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// jQuery</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#btn"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>maFonction<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">TIP</p>
<p>Simple ? CompliquÃ© ? En rÃ©alitÃ©, comme beaucoup de choses du WEB la pratique vous donnera l'habitude de manipuler le JS. Il deviendra pour vous une vÃ©ritable seconde nature ğŸ‰.</p>
</div>
<p>Nous avons vu ici comment utiliser l'Ã©vÃ¨nement <code>click</code>, mais la liste des possibilitÃ©s <a href="https://developer.mozilla.org/fr/docs/Web/Events" target="_blank" rel="noopener noreferrer">est bien plus longue<ExternalLinkIcon/></a>, sans rentrer dans le dÃ©tail, nous avons :</p>
<ul>
<li>dblclick</li>
<li>mousemove, mouseup</li>
<li>keyup, keydown, â€¦</li>
<li>userproximity</li>
</ul>
<p>La liste est vraiment Â« trÃ¨s trÃ¨s Â» longue.</p>
<h2 id="mise-en-pratique-2" tabindex="-1"><a class="header-anchor" href="#mise-en-pratique-2" aria-hidden="true">#</a> Mise en pratique</h2>
<p>Cette partie est importante. TrÃªve de bavardage ! <RouterLink to="/tp/javascript/tp3.html">Place Ã  la pratique</RouterLink></p>
<h2 id="l-ajax" tabindex="-1"><a class="header-anchor" href="#l-ajax" aria-hidden="true">#</a> L'Ajax</h2>
<p>Difficile de parler du JavaScript sans parler de l'Ajax. L'Ajax est la base du web tel que nous le connaissons aujourd'hui, pour l'instant nous avons vu des pages basiquesâ€¦ Les pages chargent Â« et ne change que quand l'utilisateur interagit Â» ! Avec l'Ajax nous pouvons faire bien plus ! Beaucoup plus ! Vous l'avez remarquÃ© votre Gmail, Facebook, etc. change sans que vous rechargiez la page. Et bien cette fonctionnalitÃ© est possible uniquement grÃ¢ce Ã  l'Ajax !</p>
<p>L'Ajax c'est donc du contenu que nous allons charger de maniÃ¨re asynchrone, c'est-Ã -dire aprÃ¨s le chargement complet de la page ; cela va nous permettre de vraies interactions modernes pour rÃ©aliser des sites web / applications web tels que :</p>
<ul>
<li>Chat.</li>
<li>Progressive Web App (PWA).</li>
<li>Client Web / Alernative Ã  une application</li>
</ul>
<p>L'Ajax en 2020 va donc nous permettre de crÃ©er de vraies applications. Ces applications consommeront de la donnÃ©e, cette donnÃ©e pourra provenir d'un serveur qui vous appartient ou depuis des serveurs tiers. Nous allons donc crÃ©er des sites web Client / Serveur avec des API pour interconnecter l'ensemble. Le Web deviendra donc une plateforme comme une autre.</p>
<p>Bref, vous allez le voir, l'Ajax deviendra trÃ¨s rapidement une pierre angulaire de vos dÃ©veloppements, et nous le verrons plus tard avec des frameworks web (comme VueJS) il serra possible de crÃ©er des applications Â« dynamique Â» sans avoir Ã  Ã©crire une seule ligne de PHP (ou autre langage serveur).</p>
<div class="custom-container tip"><p class="custom-container-title">Un INSTANT !</p>
<p>Une API ? What ? Alors, une API dans le fond c'est Â« comme un site web Â». Mais, cette page web ne produit pas du HTML et n'a pas pour vocation d'Ãªtre lue par un humain.</p>
<p>C'est donc du code (PHP ou autre) qui va permettre de faire parler deux ordinateurs (le client et le serveur) dans un langage spÃ©cifique (XML, JSON, â€¦)</p>
</div>
<h3 id="l-asynchrone-c-est-quoi" tabindex="-1"><a class="header-anchor" href="#l-asynchrone-c-est-quoi" aria-hidden="true">#</a> L'asynchrone c'est quoi ?</h3>
<p>Avant d'aller plus loin, dÃ©taillons un peu ce que veut dire Asynchrone. L'objectif de L'Ajax est de charger / recharger une partie de votre page sans l'intervention de l'utilisateur et surtout sans que celui-ci ne recharge Â« L'ensemble du site Â». C'est donc une opÃ©ration transparente pour lui, mais vous allez le voir cette opÃ©ration ne sera pas transparent pour vous.</p>
<p>Qui dit asynchrone dit Â« avec un dÃ©lai Â», vous aviez l'habitude jusqu'Ã  prÃ©sent d'avoir l'information instantanÃ©ment disponible, quand vous faites un sÃ©lecteur Ã  la ligne 1, et bien Ã  la ligne 2 vous avez une rÃ©ponseâ€¦ Avec l'Ajax Ã§a va Ãªtre lÃ©gÃ¨rement diffÃ©rent. Vous allez faire votre demande Ã  la ligne 1â€¦ mais en fonction de diffÃ©rents paramÃ¨tres (vitesse d'internet, vitesse de l'ordinateur, etc.) votre contenu pourra Ãªtre disponible plus tard. Combien de temps plus tard ? Et bien vous ne le savez pas pour l'instant.</p>
<p>Nous allons donc introduire la notion de Â« callback Â» (et plus tard de promise). Un callback est une fonction, rien de bien diffÃ©rent des prÃ©cÃ©dentes, la seule diffÃ©rence est que celle-ci sera appelÃ©e <strong>non pas par vous</strong> mais <strong>automatiquement par le navigateur</strong> quand le contenu sera disponible.</p>
<div class="custom-container tip"><p class="custom-container-title">Ã‡a parait simple ?</p>
<p>Ã‰crite comme Ã§a, cela peu paraitre simple. Dans les faits, ce nâ€™est pas vraiment complexe, mais par contre je vous le garantis, au dÃ©but vous allez vous faire avoir en pensant Â« comme avant Â» et en imaginant que votre contenu est immÃ©diatement disponible.</p>
</div>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="@source/tp/javascript/res/ajax.svg" alt="Principe Ajax"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Source Wikipedia</td>
</tr>
</tbody>
</table>
<h3 id="charger-du-contenu-Â«-a-la-demande-Â»" tabindex="-1"><a class="header-anchor" href="#charger-du-contenu-Â«-a-la-demande-Â»" aria-hidden="true">#</a> Charger du contenu Â« Ã  la demande Â»</h3>
<p>Nous allons donc charger du contenu Â« Ã  la demande Â», le contenu peut-Ãªtre ce que vous souhaitez, du HTML par exemple, mais Ã©galement du JSON (un format de donnÃ©es d'Ã©change). Il sera chargÃ© au moment d'une interaction utilisateurs, ou alors automatiquement, par exemple dans le cas de Gmail toutes les X minutes afin d'offrir Ã  votre utilisateur un rafraichissement rÃ©gulier de contenu de votre page.</p>
<p>Comme prÃ©cÃ©demment notre contenu sera chargÃ© depuis un serveur, mais celui-ci sera partiel. Il ne contiendra Â« que le coeur Â» de ce que vous souhaitez afficher (exit donc le chargement d'une page entiÃ¨re en Ajax, Ã§a nâ€™aurait Ã  mon sens aucun intÃ©rÃªt).</p>
<p>Comme prÃ©cÃ©demment nous allons voir deux faÃ§ons de procÃ©der. La premiÃ¨re est sans librairie en utilisant uniquement ce que nous propose notre navigateur :</p>
<ul>
<li>Fetch</li>
<li>Selecteur</li>
<li>Les Promises</li>
</ul>
<p>La seconde faÃ§on va Ãªtre en utilisant jQuery :</p>
<ul>
<li>$.get</li>
<li>$.post</li>
</ul>
<div class="custom-container danger"><p class="custom-container-title">Comment choisir ?</p>
<p>J'ai toujours tendance Ã  prÃ©fÃ©rer la version Â« Native Â». <strong>MAIS</strong>, si vous avez dÃ©jÃ  jQuery dans votre site? N'hÃ©sitez pas Ã  utiliser la version jQuery.</p>
</div>
<h3 id="mettre-en-pratique-l-ajax" tabindex="-1"><a class="header-anchor" href="#mettre-en-pratique-l-ajax" aria-hidden="true">#</a> Mettre en pratique l'Ajax</h3>
<p>L'Ajax c'est un gros morceau, tellement gros, qui serait possible d'y passer des heures et des heures tellement le sujet est vaste. Nous allons donc rÃ©aliser une premiÃ¨re expÃ©rimentation.</p>
<p><RouterLink to="/tp/javascript/tp4.html">La suite c'est par ici</RouterLink></p>
<h2 id="allons-un-peu-plus-loin" tabindex="-1"><a class="header-anchor" href="#allons-un-peu-plus-loin" aria-hidden="true">#</a> Allons un peu plus loin</h2>
<p>Le JavaScript comme le PHP est un langage avec Ã©normÃ©ment de possibilitÃ©s. Nous avons ici effleurÃ© ce qui Ã©tait possible de faire, il faut savoir que le JavaScript est un langage un peu particulier il permet de faire ce que l'on appelle dans le monde du dÃ©veloppement du Â« Full-Stack Â». Le JS est un langage Ã  la fois Serveur et Client (web), vous pouvez donc rÃ©aliser :</p>
<ul>
<li>Des sites web (JavaScript)</li>
<li>Des applications Web (VueJS, ReactJS, progressive Web App)</li>
<li>Des applications d'ordinateur (Electron)</li>
<li>Mais Ã©galement du code serveur (API, scripts, etc)</li>
</ul>
<p>Et tout Ã§a avec un seul langage !</p>
<h3 id="se-Â«-balader-Â»-dans-le-dom" tabindex="-1"><a class="header-anchor" href="#se-Â«-balader-Â»-dans-le-dom" aria-hidden="true">#</a> Se Â« balader Â» dans le DOM</h3>
<p>Revenons Ã  ce qui nous intÃ©resse le JavaScript dans un navigateur, vous avez la possibilitÃ© de naviguer dans le DOM HTML grÃ¢ce au JavaScript. Nous allons pouvoir Ã©crire des choses comme :</p>
<div class="language-html ext-html line-numbers-mode"><pre v-pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>section1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>titre<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Ceci est un titre<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Et voilÃ  un texte<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>titre2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Ceci est un titre 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Et voilÃ  un texte<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">let</span> titre1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"titre1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  titre1<span class="token punctuation">.</span>parentElement<span class="token punctuation">;</span> <span class="token comment">// Va retourner l'Ã©lÃ©ment section parent</span>

  <span class="token keyword">let</span> section1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"section1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  section1<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span> <span class="token comment">// Va retourner le premier enfant de la section1, soit le h1</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>Nous avons vu qu'un exemple en fonction des cas, et surtout grÃ¢ce Ã  la documentation vous serez capable de naviguer les yeux fermÃ©s dans le DOM de votre HTML.</p>
<h3 id="les-selecteurs-jquery-Â«-avances-Â»" tabindex="-1"><a class="header-anchor" href="#les-selecteurs-jquery-Â«-avances-Â»" aria-hidden="true">#</a> Les sÃ©lecteurs jQuery Â« avancÃ©s Â»</h3>
<p>jQuery permet Ã©galement de naviguer rapidement dans le DOM avec des sÃ©lecteurs complexe (comme ceux utilisÃ© en CSS) :</p>
<div class="language-html ext-html line-numbers-mode"><pre v-pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>section1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>titre<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Ceci est un titre<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Et voilÃ  un texte<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>titre2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Ceci est un titre 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Et voilÃ  un texte<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">let</span> h1 <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#section1 > h1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Retourne le H1 prÃ©sent dans la section1</span>

  <span class="token keyword">let</span> h1bis <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"section > h1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Retourne l'ensemble des H1 prÃ©sent dans les Ã©lÃ©ments section (c'est donc un tableau)</span>

  <span class="token keyword">let</span> h1ter <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#section1:first-child"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Retourne le premier enfant dans l'Ã©lÃ©ment avec comme id section1, soit le titre</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>Nous avons vu qu'un exemple en fonction des cas, et surtout grÃ¢ce Ã  la documentation vous serez capable de naviguer les yeux fermÃ©s dans le DOM de votre HTML.</p>
<h3 id="l-inspecteur-d-elements" tabindex="-1"><a class="header-anchor" href="#l-inspecteur-d-elements" aria-hidden="true">#</a> L'inspecteur d'Ã©lÃ©ments</h3>
<p>Votre inspecteur d'Ã©lÃ©ments (Chrome, Firefox, Safari) est trÃ¨s performant. Il vous permet de rapidement dÃ©boguer / Ã©crire vos scripts JavaScript :</p>
<ul>
<li>La console permet de voir les erreurs.</li>
<li>La console permet Ã©galement d'Ã©crire du code JS.</li>
<li>Si vous sÃ©lectionnez un Ã©lÃ©ment dans le HTML. Vous avez une variable <code>$0</code> dans la console qui va contenir l'Ã©lÃ©ment courant. Pratique!</li>
<li>Le code est autocomplÃ©tÃ© avec le mÃªme raccourci que votre IDE (ctrl+espace)</li>
</ul>
<p>Testons ensemble.</p>
</template>
