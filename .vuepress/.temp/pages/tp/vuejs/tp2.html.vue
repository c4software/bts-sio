<template><h1 id="realiser-une-application-avec-vuejs-2-0" tabindex="-1"><a class="header-anchor" href="#realiser-une-application-avec-vuejs-2-0" aria-hidden="true">#</a> RÃ©aliser une application avec VueJS 2.0</h1>
<p>Dans ce TP nous allons voir une autre faÃ§on dâ€™utiliser VueJS, une faÃ§on plus moderne, celle qui utilise Ã  100% le modÃ¨le MVVM (ModÃ¨le Vue, Vue-ModÃ¨le) ainsi que la puissance de VueJS (<code>.vue</code>, VueCli, ES5).</p>
<p><img src="@source/tp/vuejs/MVVMPattern.png" alt="MVVM"></p>
<details class="custom-container details"><summary>Table des matiÃ¨res</summary>
<nav class="table-of-contents"><ul><li><RouterLink to="#mvvm-en-quelques-mots">MVVM en quelques mots</RouterLink></li><li><RouterLink to="#introduction">Introduction</RouterLink></li><li><RouterLink to="#initialisation-du-projet">Initialisation du projet</RouterLink><ul><li><RouterLink to="#nodejs">NodeJS</RouterLink></li><li><RouterLink to="#vue-cli">Vue-cli</RouterLink></li></ul></li><li><RouterLink to="#installation-des-librairies-du-projet">Installation des librairies (du projet)</RouterLink></li><li><RouterLink to="#premier-lancement-l-exemple">Premier lancement (lâ€™exemple)</RouterLink></li><li><RouterLink to="#le-serveur-de-developpement">Le serveur de dÃ©veloppement</RouterLink></li><li><RouterLink to="#le-code-source">Le code source</RouterLink><ul><li><RouterLink to="#l-ide">Lâ€™IDE</RouterLink></li><li><RouterLink to="#installation-des-plug-ins">Installation des plug-ins</RouterLink></li><li><RouterLink to="#la-structure">La structure</RouterLink></li><li><RouterLink to="#lancer-le-projet">Lancer le projet</RouterLink></li><li><RouterLink to="#transformer-le-template-de-base">Transformer le template de base</RouterLink></li><li><RouterLink to="#creation-de-mytoolbar">CrÃ©ation de myToolbar</RouterLink></li><li><RouterLink to="#modifier-la-Â«-home-Â»">Modifier la Â« home Â»</RouterLink></li><li><RouterLink to="#voir-le-changement">Voir le changement</RouterLink></li></ul></li><li><RouterLink to="#le-routeur">Le Routeur</RouterLink><ul><li><RouterLink to="#declarer-du-texte-dans-vue-i18n">DÃ©clarer du texte dans Vue-i18n</RouterLink></li><li><RouterLink to="#declarer-un-nouveau-texte">DÃ©clarer un nouveau texte</RouterLink></li><li><RouterLink to="#tester">Tester</RouterLink></li></ul></li><li><RouterLink to="#les-vues">Les .vues</RouterLink><ul><li><RouterLink to="#la-page-accueil">La page : Accueil</RouterLink></li><li><RouterLink to="#la-page-a-propos">La page : Ã€ Propos</RouterLink></li><li><RouterLink to="#ajout-du-drawer">Ajout du : Drawer</RouterLink></li><li><RouterLink to="#la-page-historique">La page : Historique</RouterLink></li></ul></li><li><RouterLink to="#ajouter-une-page-permettant-un-ajout-manuel">Ajouter une page permettant un ajout manuel</RouterLink><ul><li><RouterLink to="#demarche-1">DÃ©marche</RouterLink></li></ul></li><li><RouterLink to="#distribuer-vos-sources">Distribuer vos sources</RouterLink></li><li><RouterLink to="#ajouter-un-manifest">Ajouter un manifest</RouterLink><ul><li><RouterLink to="#ajouter-firebase">Ajouter Firebase</RouterLink></li></ul></li></ul></nav>
</details>
<h2 id="mvvm-en-quelques-mots" tabindex="-1"><a class="header-anchor" href="#mvvm-en-quelques-mots" aria-hidden="true">#</a> MVVM en quelques mots</h2>
<p>Non, mais moi je connais que MVC, câ€™est quoi MVVM ?</p>
<p>MVVM est un design pattern, souvent utilisÃ© par les bibliothÃ¨ques JavaScript modernes (Ionic, VueJS, ReactJS). Ã€ lâ€™origine, MVVM a Ã©tÃ© introduit par Microsoft.</p>
<p>Ce pattern a spÃ©cialement Ã©tÃ© conÃ§u pour amÃ©liorer la sÃ©paration entre les donnÃ©es et la vue qui les affichent. Le lien entre la vue et le modÃ¨le de donnÃ©es est fait par des mÃ©canismes de binding. Le binding est un mÃ©canisme qui permet de faire des liaisons entre des donnÃ©es de maniÃ¨re dynamiques. Ce qui veut dire que si A et B sont liÃ©s, le fait de modifier A va Ãªtre rÃ©percutÃ© sur B et inversement.</p>
<ul>
<li>Model : le modÃ¨le contient les donnÃ©es.</li>
<li>View : la vue correspond Ã  ce qui est affichÃ©. Câ€™est notre site Web.</li>
<li>ViewModel : ce composant fait le lien entre le modÃ¨le et la vue. Il sâ€™occupe de gÃ©rer les liaisons de donnÃ©es et les Ã©ventuelles conversions. Câ€™est ici quâ€™intervient le binding.</li>
</ul>
<p>Lâ€™important avec MVVM câ€™est que <strong><em>la vue ne doit jamais traiter de donnÃ©es</em></strong>. Elle sâ€™occupe uniquement de les afficher. Le View-Model aura en charge les conversions et les accÃ¨s au modÃ¨le de donnÃ©es.</p>
<h2 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction" aria-hidden="true">#</a> Introduction</h2>
<p>Maintenant que vous savez ce que câ€™est le MVVM, nous allons attaquer le TP pour de vrai. Nous allons rÃ©aliser Â« une application Â» Ã  lâ€™aide de VueJS. Cette application est purement dÃ©monstrative. Cette application calculera la hauteur dâ€™une falaise (ou de nâ€™importe quoi de suffisamment haut) en fonction du temps chute dâ€™un objet jeter du haut de celle-ci.</p>
<p><img src="https://github.com/c4software/Cliff-Height-Timer-VueJS/raw/master/demo.png" alt="Cliff-Height-Timer-VueJS"></p>
<h2 id="initialisation-du-projet" tabindex="-1"><a class="header-anchor" href="#initialisation-du-projet" aria-hidden="true">#</a> Initialisation du projet</h2>
<p>Avant de commencer, nous allons avoir besoin de plusieurs outils :</p>
<ul>
<li>NodeJS</li>
<li>Vue-cli</li>
</ul>
<h3 id="nodejs" tabindex="-1"><a class="header-anchor" href="#nodejs" aria-hidden="true">#</a> NodeJS</h3>
<p>La premiÃ¨re Ã©tape va Ãªtre lâ€™installation de NodeJS, la dÃ©marche est diffÃ©rente en fonction de votre environnement, mais pour rÃ©sumer <a href="https://nodejs.org/en/download/" target="_blank" rel="noopener noreferrer">sous Windows câ€™est ici<ExternalLinkIcon/></a> prendre la version CURRENT, sous OSX le plus simple câ€™est via Brew <code>brew install nodejs</code>, et sous Linux câ€™est via le gestionnaire de paquet <code>apt install nodejs</code></p>
<p>Une fois installÃ©, vous Ãªtes prÃªt, votre PC est prÃªt Ã  accueillir lâ€™outil VueCLI</p>
<h3 id="vue-cli" tabindex="-1"><a class="header-anchor" href="#vue-cli" aria-hidden="true">#</a> Vue-cli</h3>
<p>Vue-cli est un outil qui simplifie la crÃ©ation dâ€™un nouveau projet Vue-JS Ã  partir de template fourni par la communautÃ©.</p>
<p>Dans un terminal lancer la commande suivante dans le <code>Node.js Command Prompt</code> :</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> -g @vue/cli
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Maintenant que vue-cli est installÃ©, vous avez Ã  votre disposition sur votre ordinateur une nouvelle commande, la commande <code>vue</code></p>
<p>Pour crÃ©er un nouveau projet, câ€™est simple il suffit de lancer la commande suivante dans le <code>Node.js Command Prompt</code></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>vue create cliff-height-timer
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>âš ï¸ Attention, la commande crÃ©e le projet dans le dossier courant ! âš ï¸</p>
<p>Le Vue-Cli est interactif il va vous poser des questions permettant de configurer votre projet :</p>
<p><img src="@source/tp/vuejs/vuecli-init.png" alt="Question vue-cli"></p>
<p>VoilÃ  notre projet est maintenant prÃªt. Place Ã  la suite.</p>
<h2 id="installation-des-librairies-du-projet" tabindex="-1"><a class="header-anchor" href="#installation-des-librairies-du-projet" aria-hidden="true">#</a> Installation des librairies (du projet)</h2>
<p>Le projet que vous avez initialisÃ© est Â« prÃªt pour Ãªtre utilisÃ© Â».</p>
<p>Si vous changez d'ordinateur, il faudra rÃ©installer les librairies NodeJS. Cette Ã©tape nâ€™est Ã  faire quâ€™une seule fois sur votre poste, en effet en gÃ©nÃ©ral on ne commit pas les fichiers Â« librairies Â» qui sont prÃ©sents dans le futur dossier <code>node_module</code> pour la simple et bonne raison que celui-ci est gros et rempli de pleins de petits fichiers (et quâ€™en plus Ã§a se retÃ©lÃ©charge facilement depuis Internet).</p>
<p>Pour lâ€™installation la procÃ©dure est la suivante :</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token builtin class-name">cd</span> cliff-height-timer/
<span class="token function">npm</span> <span class="token function">install</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>âš ï¸ Lâ€™installation risque de prendre plusieurs secondes (enfin 1 ou 2 minutes).</p>
<p>Une fois terminÃ© votre projet est prÃªt Ã  Ãªtre lancÃ©. Au passage vous pouvez vÃ©rifier que le dossier <code>node_module</code> dans le <code>.gitignore</code>.</p>
<h2 id="premier-lancement-l-exemple" tabindex="-1"><a class="header-anchor" href="#premier-lancement-l-exemple" aria-hidden="true">#</a> Premier lancement (lâ€™exemple)</h2>
<p>Les librairies Ã©tant maintenant disponible, nous allons pouvoir lancer lâ€™exemple fourni par Vue-Cli, pour Ã§a rien de plus simple</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> run serve
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Une fois cette commande lancÃ©e vous pouvez ouvrir un onglet dans votre navigateur <code>http://127.0.0.1:8080</code></p>
<p><img src="@source/tp/vuejs/ressources/vuejs-init.png" alt="sample application"></p>
<h2 id="le-serveur-de-developpement" tabindex="-1"><a class="header-anchor" href="#le-serveur-de-developpement" aria-hidden="true">#</a> Le serveur de dÃ©veloppement</h2>
<p>Comme vous avez pu le constater dans votre invite de commande (terminal), vous avez un serveur qui tourne. Ce serveur est un peu particulier, il nâ€™est utilisÃ© que dans la phase de dÃ©veloppement il incorpore plusieurs outils permettant de simplifier la crÃ©ation dâ€™application JavaScript :</p>
<ul>
<li>RedÃ©marrage Ã  chaud, comprendre ici, quâ€™il va Â« patcher Â» votre code pour intÃ©grer vos derniÃ¨res modifications sans que vous nâ€™ayez rien Ã  faire (GÃ‰NIAL !)</li>
<li>Lint, analyse du code pour vous remonter les erreurs avant lâ€™exÃ©cution.</li>
<li>Gestion des .vue (avec vue-loader)</li>
</ul>
<p>Et si vous avez les outils sur votre machine il peut Ã©galement :</p>
<ul>
<li>CrÃ©er la CSS Ã  partir du SCSS prÃ©sent dans le .vue</li>
<li>Et plein dâ€™autres usages, car Webpack câ€™est un outil qui permet lâ€™assemblage de diffÃ©rents outils</li>
</ul>
<h2 id="le-code-source" tabindex="-1"><a class="header-anchor" href="#le-code-source" aria-hidden="true">#</a> Le code source</h2>
<p>Les sources de lâ€™application sont dans le dossier <code>src/</code> il contient lâ€™ensemble du code source de votre application. Pour lâ€™instant nous avons le code fourni par VueJS, au fur et Ã  mesure des futures Ã©tapes nous allons le modifier pour le transformer dans lâ€™application Â« Cliff Height Timer Â». Avant de Â« presque Â» tout remplacer, nous allons modifier celui fourni pour nous familiariser avec Â« le serveur de dÃ©veloppement Â».</p>
<h3 id="l-ide" tabindex="-1"><a class="header-anchor" href="#l-ide" aria-hidden="true">#</a> Lâ€™IDE</h3>
<p>Pour faire du VueJS le mieux, câ€™est dâ€™avoir un bon IDE. Au revoir, Notepad++, bonjour WebStorm? Malheureusement WebStorm est payant, si vous avez une licence tant mieux (pour les Ã©tudiants câ€™est gratuit ğŸ’°).</p>
<p>Pour ceux qui nâ€™ont pas de licence je vous propose dâ€™utiliser <a href="https://code.visualstudio.com" target="_blank" rel="noopener noreferrer">Visual Studio Code<ExternalLinkIcon/></a> et dâ€™ajouter le plug-in <code>Vetur</code> pour pouvoir Ã©diter les <code>.vue</code> dans de bonnes conditions.</p>
<h3 id="installation-des-plug-ins" tabindex="-1"><a class="header-anchor" href="#installation-des-plug-ins" aria-hidden="true">#</a> Installation des plug-ins</h3>
<p>Comme vu en cours l'avantage de Vue-Cli c'est qu'il intÃ¨gre un systÃ¨me de plug-in, nous allons nous en servir pour ajouter :</p>
<ul>
<li>vue-i18n</li>
<li>vue-router</li>
<li>vuetify</li>
</ul>
<p>Certains plug-ins modifient plus ou moins votre projet. Vuetify par exemple altÃ¨re de maniÃ¨re importante votre projet. Nous allons donc l'ajouter en premier. Dans un terminal</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>$ vue <span class="token function">add</span> vuetify

ğŸ“¦  Installing vue-cli-plugin-vuetify<span class="token punctuation">..</span>.

+ vue-cli-plugin-vuetify@0.4.6
added <span class="token number">1</span> package from <span class="token number">1</span> contributor and audited <span class="token number">15083</span> packages <span class="token keyword">in</span> <span class="token number">8</span>.485s
found <span class="token number">0</span> vulnerabilities

âœ”  Successfully installed plugin: vue-cli-plugin-vuetify

? Choose a preset: Default <span class="token punctuation">(</span>recommended<span class="token punctuation">)</span>

ğŸš€  Invoking generator <span class="token keyword">for</span> vue-cli-plugin-vuetify<span class="token punctuation">..</span>.
ğŸ“¦  Installing additional dependencies<span class="token punctuation">..</span>.

added <span class="token number">11</span> packages from <span class="token number">49</span> contributors and audited <span class="token number">15119</span> packages <span class="token keyword">in</span> <span class="token number">9</span>.41s
found <span class="token number">0</span> vulnerabilities

âš“  Running completion hooks<span class="token punctuation">..</span>.

âœ”  Successfully invoked generator <span class="token keyword">for</span> plugin: vue-cli-plugin-vuetify
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>Maintenant que Vuetify est prÃ©sent, ajoutons Vue-Router :</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>$ vue <span class="token function">add</span> router

? Use <span class="token function">history</span> mode <span class="token keyword">for</span> router? <span class="token punctuation">(</span>Requires proper server setup <span class="token keyword">for</span> index fallback <span class="token keyword">in</span> production<span class="token punctuation">)</span> Yes

ğŸš€  Invoking generator <span class="token keyword">for</span> core:router<span class="token punctuation">..</span>.
ğŸ“¦  Installing additional dependencies<span class="token punctuation">..</span>.

added <span class="token number">1</span> package from <span class="token number">1</span> contributor and audited <span class="token number">15120</span> packages <span class="token keyword">in</span> <span class="token number">9</span>.021s
found <span class="token number">0</span> vulnerabilities

âœ”  Successfully invoked generator <span class="token keyword">for</span> plugin: core:router
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Et maintenant Vue-i18n (pour l'internationalisation) :</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>$ vue <span class="token function">add</span> i18n

ğŸ“¦  Installing vue-cli-plugin-i18n<span class="token punctuation">..</span>.

+ vue-cli-plugin-i18n@0.5.1
added <span class="token number">7</span> packages from <span class="token number">7</span> contributors and audited <span class="token number">15129</span> packages <span class="token keyword">in</span> <span class="token number">8</span>.638s
found <span class="token number">0</span> vulnerabilities

âœ”  Successfully installed plugin: vue-cli-plugin-i18n

? The locale of project localization. fr
? The fallback locale of project localization. en
? The directory where store localization messages of project. Stored under src directory. locales
? Enable locale messages <span class="token keyword">in</span> Single <span class="token function">file</span> components ? No

ğŸš€  Invoking generator <span class="token keyword">for</span> vue-cli-plugin-i18n<span class="token punctuation">..</span>.
ğŸ“¦  Installing additional dependencies<span class="token punctuation">..</span>.

audited <span class="token number">15130</span> packages <span class="token keyword">in</span> <span class="token number">7</span>.792s
found <span class="token number">0</span> vulnerabilities

âš“  Running completion hooks<span class="token punctuation">..</span>.

âœ”  Successfully invoked generator <span class="token keyword">for</span> plugin: vue-cli-plugin-i18n
   The following files have been updated / added:
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>VoilÃ  les plug-ins sont maintenant installÃ©s, de base ils ne sont pas configurÃ©s. Nous allons faire Ã§a dans les prochaines Ã©tapes.</p>
<div class="custom-container danger"><p class="custom-container-title">Pas d'icÃ´nes ? Pas de fonts ? Pas de problÃ¨me !</p>
<p>Comme Bootstrap (ou d'autres) vuetify intÃ¨gre un systÃ¨me permettant d'intÃ©grer simplement des icÃ´nes. Malheureusement celui-ci ne fonctionne pas juste aprÃ¨s l'installation du paquet.</p>
<p>Pour le rendre fonctionnel, vous devez Ã©diter votre <code>index.html</code> afin d'ajouter :</p>
<div class="language-html ext-html line-numbers-mode"><pre v-pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span>
  <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900<span class="token punctuation">"</span></span>
  <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span>
<span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span>
  <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/@mdi/font@4.x/css/materialdesignicons.min.css<span class="token punctuation">"</span></span>
  <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span>
<span class="token punctuation">/></span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></div>
<h3 id="la-structure" tabindex="-1"><a class="header-anchor" href="#la-structure" aria-hidden="true">#</a> La structure</h3>
<p>L'ensemble du code que vous devez Ã©crire va se trouver dans <code>src</code></p>
<ul>
<li><code>assets/</code> : Les images / ressources static.</li>
<li><code>components/</code> : Les composants rÃ©utilisables.</li>
<li><code>locales/</code> : Vos textes rangÃ©s par langes.</li>
<li><code>plug-ins/</code> : La configuration de vos plug-ins.</li>
<li><code>views/</code> : Les pages de votre site.</li>
<li><code>App.vue</code> : Le template / base / point d'entrÃ©e de vos vue.</li>
<li><code>i18n.js</code> : La configuration de Vue-i18n</li>
<li><code>main.js</code> : Le point d'entrÃ©e JavaScript de votre projet</li>
<li><code>router.js</code> : La configuration de vos routes.</li>
</ul>
<p>âš ï¸ Je vous invite Ã  regarder le contenu de l'ensemble des fichiers et dossier avant de continuer.</p>
<h3 id="lancer-le-projet" tabindex="-1"><a class="header-anchor" href="#lancer-le-projet" aria-hidden="true">#</a> Lancer le projet</h3>
<p>Le projet est actuellement non fonctionnel, principalement Ã  cause de Vuetify et Vue Router qui de base configure le projet diffÃ©remment.</p>
<p>Pour regarder le souci, lancez le projet et testez-le :</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> run serve
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="transformer-le-template-de-base" tabindex="-1"><a class="header-anchor" href="#transformer-le-template-de-base" aria-hidden="true">#</a> Transformer le template de base</h3>
<p>Maintenant que VuetifyJS est complÃ¨tement disponible, vous allez pouvoir utiliser vos premiers composants.</p>
<p>Pour dÃ©buter, nous allons remplacer le contenu du fichier <code>App.vue</code> pour dÃ©clarer le gabarit principal de lâ€™application :</p>
<div class="language-html ext-html line-numbers-mode"><pre v-pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>v-app</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>myToolbar</span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>v-main</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>v-slide-y-transition</span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>out-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token punctuation">/></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>v-slide-y-transition</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>v-main</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>v-app</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> myToolbar <span class="token keyword">from</span> <span class="token string">"@/components/MyToolbar"</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">"app"</span><span class="token punctuation">,</span>
    components<span class="token operator">:</span> <span class="token punctuation">{</span> myToolbar <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>âš ï¸ Pour lâ€™instant le code que vous avez remplacÃ© ne compile plus, pour la simple et bonne raison quâ€™il fait rÃ©fÃ©rence Ã  un composant que vous nâ€™avez pas encore Ã©crit : <code>myToolbar</code></p>
<h3 id="creation-de-mytoolbar" tabindex="-1"><a class="header-anchor" href="#creation-de-mytoolbar" aria-hidden="true">#</a> CrÃ©ation de myToolbar</h3>
<p>CrÃ©er un nouveau fichier nommÃ© <code>MyToolbar.vue</code> dans le dossier <code>components</code> :</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">></span>
  <span class="token operator">&lt;</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>v<span class="token operator">-</span>app<span class="token operator">-</span>bar dark color<span class="token operator">=</span><span class="token string">"deep-purple"</span> clipped<span class="token operator">-</span>left app<span class="token operator">></span>
      <span class="token operator">&lt;</span>v<span class="token operator">-</span>app<span class="token operator">-</span>bar<span class="token operator">-</span>nav<span class="token operator">-</span>icon @click<span class="token punctuation">.</span>stop<span class="token operator">=</span><span class="token string">"drawer = !drawer"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>v<span class="token operator">-</span>app<span class="token operator">-</span>bar<span class="token operator">-</span>nav<span class="token operator">-</span>icon<span class="token operator">></span>
      <span class="token operator">&lt;</span>v<span class="token operator">-</span>toolbar<span class="token operator">-</span>title @click<span class="token operator">=</span><span class="token string">"goHome"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"white--text"</span><span class="token operator">></span>Cliff height timer<span class="token operator">&lt;</span><span class="token operator">/</span>v<span class="token operator">-</span>toolbar<span class="token operator">-</span>title<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>v<span class="token operator">-</span>app<span class="token operator">-</span>bar<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>

<span class="token operator">&lt;</span>script<span class="token operator">></span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'myToolbar'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      drawer<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">goHome</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="modifier-la-Â«-home-Â»" tabindex="-1"><a class="header-anchor" href="#modifier-la-Â«-home-Â»" aria-hidden="true">#</a> Modifier la Â« home Â»</h3>
<p>Avant d'aller plus loin, modifier le fichier <code>src/views/Home.vue</code> remplacer le contenu par ce que vous souhaitez.</p>
<p>N'oublier pas de retirer l'import qui est maintenant inutile dans le fichier <code>src/views/Home.vue</code></p>
<h3 id="voir-le-changement" tabindex="-1"><a class="header-anchor" href="#voir-le-changement" aria-hidden="true">#</a> Voir le changement</h3>
<p>VoilÃ , vous avez atteint la premiÃ¨re Ã©tape. Vous pouvez lancer votre application en faisant :</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> run serve
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="le-routeur" tabindex="-1"><a class="header-anchor" href="#le-routeur" aria-hidden="true">#</a> Le Routeur</h2>
<p>Votre application est maintenant fonctionnelle cependant comme vous le constatez, vous avez pour lâ€™instant quâ€™une Â« seule page Â»â€¦ Enfin qu'une seule d'accessible !</p>
<p>Allons faire un tour dans le fichier <code>router/index.js</code>. Celui-ci contient dÃ©jÃ  quelques routes :</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Router <span class="token keyword">from</span> <span class="token string">"vue-router"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">"./views/Home.vue"</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Router<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">"history"</span><span class="token punctuation">,</span>
  base<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token punctuation">,</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">"/"</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">"home"</span><span class="token punctuation">,</span>
      component<span class="token operator">:</span> Home<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">"/about"</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">"about"</span><span class="token punctuation">,</span>
      <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span>
        <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: "about" */</span> <span class="token string">"./views/About.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>Modifier le, et <strong>retirer</strong> tout la partie <code>/about</code> :</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token punctuation">{</span>
  path<span class="token operator">:</span> <span class="token string">"/about"</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">"about"</span><span class="token punctuation">,</span>
  <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span>
    <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: "about" */</span> <span class="token string">"./views/About.vue"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="declarer-du-texte-dans-vue-i18n" tabindex="-1"><a class="header-anchor" href="#declarer-du-texte-dans-vue-i18n" aria-hidden="true">#</a> DÃ©clarer du texte dans Vue-i18n</h3>
<p>Au dÃ©but du TP nous avons installÃ© Vue-i18n, nous allons maintenant configurer nos premiers textes. Dans le dossier <code>src/locales/</code> vous avez deux fichiers <code>json</code> :</p>
<ul>
<li><code>en.json</code> : Les textes anglais.</li>
<li><code>fr.json</code> : Les textes franÃ§ais.</li>
</ul>
<p><strong>Ajouter</strong> dans les deux fichiers JSON une nouvelle clÃ© :</p>
<div class="language-json ext-json line-numbers-mode"><pre v-pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Cliff Height Timer"</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="declarer-un-nouveau-texte" tabindex="-1"><a class="header-anchor" href="#declarer-un-nouveau-texte" aria-hidden="true">#</a> DÃ©clarer un nouveau texte</h3>
<p>Notre internationalisation est maintenant prÃªte Ã  Ãªtre utilisÃ©e. Nous allons lâ€™utiliser dÃ¨s maintenant dans le fichier <code>/components/MyToolbar.vue</code></p>
<p>Remplacer le texte <code>Cliff height timer</code> par :</p>
<p><code v-pre><code>{{$t(&quot;title&quot;)}}</code></code></p>
<p>Le titre doit maintenant sâ€™afficher. Et câ€™est normal la clÃ© Â« title Â» est dÃ©jÃ  prÃ©sente dans le fichier : <code>i18n/index.js</code>, modifier le titre pour la langue Â« fr Â».</p>
<p>â„¹ï¸ <code>$t</code> est un objet qui permet dâ€™accÃ©der aux textes actuellement chargÃ©s pour la langue de lâ€™utilisateur.</p>
<h3 id="tester" tabindex="-1"><a class="header-anchor" href="#tester" aria-hidden="true">#</a> Tester</h3>
<p>VÃ©rifier en relanÃ§ant votre application que le titre Ã  bien Ã©tÃ© modifiÃ© :</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> run serve
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="les-vues" tabindex="-1"><a class="header-anchor" href="#les-vues" aria-hidden="true">#</a> Les .vues</h2>
<p>Maintenant que nous avons la base de notre projet, nous allons commencer Ã  crÃ©er les diffÃ©rents fichiers Vueâ€™s.</p>
<p>âœ‹ Un peu de mÃ©nage s'impose. Avant de continuer, supprimer le fichier <code>About.vue</code>, celui-ci ne nous sera pas utile.</p>
<h3 id="la-page-accueil" tabindex="-1"><a class="header-anchor" href="#la-page-accueil" aria-hidden="true">#</a> La page : Accueil</h3>
<p>Nous allons commencer par la page dâ€™accueil, celle-ci doit ressembler Ã  :</p>
<p><img src="@source/tp/vuejs/ressources/accueil.png" alt="Accueil"></p>
<p>Pour faire cette vue, vous allez avoir besoin des Ã©lÃ©ments suivants :</p>
<ul>
<li><a href="https://vuetifyjs.com/components/floating-action-buttons" target="_blank" rel="noopener noreferrer">FAB<ExternalLinkIcon/></a></li>
<li><a href="https://vuejs.org/v2/guide/computed.html" target="_blank" rel="noopener noreferrer">Les variables computed<ExternalLinkIcon/></a></li>
<li><a href="https://vuejs.org/v2/guide/class-and-style.html" target="_blank" rel="noopener noreferrer">v-bind:class<ExternalLinkIcon/></a></li>
<li><a href="https://vuejs.org/v2/guide/syntax.html" target="_blank" rel="noopener noreferrer">Afficher une variables<ExternalLinkIcon/></a></li>
<li><a href="https://gist.github.com/c4software/b9fe4cd06e99d3bff16a09260b03e149" target="_blank" rel="noopener noreferrer">Centrer verticalement<ExternalLinkIcon/></a></li>
</ul>
<p>Ã‰tape de la crÃ©ation :</p>
<ul>
<li>Modifier le fichier <code>Home.vue</code> dans le dossier <code>src/views/</code></li>
<li>Le contenu de la Vue sera la suivante :</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">></span>
  <span class="token operator">&lt;</span>v<span class="token operator">-</span>container fluid fill<span class="token operator">-</span>height <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"d-flex deep-purple lighten-1"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"home"</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>h1<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span> time <span class="token punctuation">}</span><span class="token punctuation">}</span> s<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&lt;</span>h3<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span> m <span class="token punctuation">}</span><span class="token punctuation">}</span> m<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">></span>
      <span class="token operator">&lt;</span>h3<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span> ft <span class="token punctuation">}</span><span class="token punctuation">}</span> ft<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

    <span class="token operator">&lt;</span>v<span class="token operator">-</span>btn v<span class="token operator">-</span>on<span class="token operator">:</span>click<span class="token operator">=</span><span class="token string">"action"</span> v<span class="token operator">-</span>bind<span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"state_class"</span> dark fixed bottom right fab<span class="token operator">></span>
      <span class="token operator">&lt;</span>v<span class="token operator">-</span>icon<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span> state_icon <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>v<span class="token operator">-</span>icon<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>v<span class="token operator">-</span>btn<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>v<span class="token operator">-</span>container<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>

<span class="token operator">&lt;</span>script<span class="token operator">></span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      running<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      time<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      m<span class="token operator">:</span> <span class="token string">'0'</span><span class="token punctuation">,</span>
      ft<span class="token operator">:</span> <span class="token string">'0'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">state_icon</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Retourne lâ€™icone pour le FAB</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>running<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'stop'</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'play_arrow'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">state_class</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Retourne la class pour le FAB</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>running<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'red'</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'green'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">action</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Gestion du start / stop</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>start <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>running<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>running <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>timerId <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">compute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>running <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token function">clearInterval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timerId<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">saveHistory</span><span class="token punctuation">(</span><span class="token punctuation">{</span>time<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>time<span class="token punctuation">,</span> m<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>m<span class="token punctuation">,</span> ft<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ft<span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">saveHistory</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Sauvegarde dans lâ€™historique</span>
      <span class="token keyword">let</span> history <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'history'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>history<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        history <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
      history<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
      localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'history'</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>history<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">compute</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> fallTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>start
      <span class="token keyword">let</span> height <span class="token operator">=</span> <span class="token number">16</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token punctuation">(</span>fallTime <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
      <span class="token keyword">let</span> numberDigits <span class="token operator">=</span> <span class="token number">1</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>height <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        numberDigits <span class="token operator">=</span> <span class="token number">2</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">this</span><span class="token punctuation">.</span>time <span class="token operator">=</span> <span class="token punctuation">(</span>fallTime <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>ft <span class="token operator">=</span> height<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span>numberDigits<span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>m <span class="token operator">=</span> <span class="token punctuation">(</span>height <span class="token operator">/</span> <span class="token number">3.2808</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span>numberDigits<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>

<span class="token operator">&lt;</span>style scoped<span class="token operator">></span>
  <span class="token punctuation">.</span>home<span class="token punctuation">{</span>
    margin<span class="token operator">:</span> auto<span class="token punctuation">;</span>
    text<span class="token operator">-</span>align<span class="token operator">:</span> center<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">.</span>home <span class="token operator">></span> h1<span class="token punctuation">,</span> <span class="token punctuation">.</span>home <span class="token operator">></span> h2<span class="token punctuation">,</span> <span class="token punctuation">.</span>home <span class="token operator">></span> h3 <span class="token punctuation">{</span>
    color<span class="token operator">:</span> white<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br></div></div><ul>
<li>VÃ©rifier la dÃ©claration de votre Vue dans <code>router.js</code>. Un code similaire Ã  celui-ci doit Ãªtre prÃ©sent :</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token punctuation">[</span>â€¦<span class="token punctuation">]</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'@/views/Home'</span>

<span class="token punctuation">[</span>â€¦<span class="token punctuation">]</span>
  <span class="token comment">// Code existant</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'Home'</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> Home
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul>
<li>Tester votre code :</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> run serve
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="la-page-a-propos" tabindex="-1"><a class="header-anchor" href="#la-page-a-propos" aria-hidden="true">#</a> La page : Ã€ Propos</h3>
<p>VoilÃ  le rendu de Â« la page Â» que vous devez rÃ©aliser :</p>
<p><img src="@source/tp/vuejs/ressources/apropos.png" alt="Vue Ã€ Propos"></p>
<ul>
<li>CrÃ©er le fichier <code>src/views/About.vue</code></li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">></span>
  <span class="token operator">&lt;</span>v<span class="token operator">-</span>container<span class="token operator">></span>
  <span class="token punctuation">[</span>â€¦<span class="token punctuation">]</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>v<span class="token operator">-</span>container<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>

<span class="token operator">&lt;</span>script<span class="token operator">></span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'about'</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>âš ï¸ Nâ€™oubliez pas que <strong>l'ensemble</strong> les textes doivent-Ãªtre dans le fichier <code>locales/fr.json</code> et dans <code>locales/en.json</code> et Ãªtre utilisÃ©s avec par exemple :</p>
<p><code v-pre>{{ $t(&quot;label&quot;) }}</code></p>
<ul>
<li>Ajouter dans <code>router.js</code> le code pour pouvoir accÃ©der Ã  votre Vue.</li>
</ul>
<p>âœ‹ Vous avez ajoutÃ© votre nouveau fichier, mais pour lâ€™instant votre application ne contient pas de menu. Nous allons en ajouter un pour pouvoir naviguer entre les pages.</p>
<h3 id="ajout-du-drawer" tabindex="-1"><a class="header-anchor" href="#ajout-du-drawer" aria-hidden="true">#</a> Ajout du : Drawer</h3>
<p>Dans le monde Â« mobile Â», un menu sâ€™appelle un Drawer (un tiroir). Nous allons donc crÃ©er un Drawer. Pour Ã§a nous allons avoir besoin des ressources suivantes:</p>
<ul>
<li><a href="https://vuetifyjs.com/components/toolbars" target="_blank" rel="noopener noreferrer">v-toolbar<ExternalLinkIcon/></a></li>
<li><a href="https://vuetifyjs.com/components/lists" target="_blank" rel="noopener noreferrer">v-list<ExternalLinkIcon/></a></li>
<li><a href="https://kazupon.github.io/vue-i18n/en/" target="_blank" rel="noopener noreferrer">Vue-i18n<ExternalLinkIcon/></a></li>
</ul>
<p><img src="@source/tp/vuejs/ressources/drawer.png" alt="Drawer"></p>
<p>CrÃ©ation :</p>
<ul>
<li>Pour Ã§a, crÃ©er le fichier <code>/src/components/Drawer.vue</code></li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">></span>
  <span class="token operator">&lt;</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>v<span class="token operator">-</span>toolbar <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"deep-purple"</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>v<span class="token operator">-</span>list dense<span class="token operator">></span>
      <span class="token operator">&lt;</span>template v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"(item, i) in items"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>v<span class="token operator">-</span>divider dark v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"item.divider"</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">"i"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>v<span class="token operator">-</span>divider<span class="token operator">></span>
        <span class="token operator">&lt;</span>v<span class="token operator">-</span>list<span class="token operator">-</span>item ripple <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">"item.action"</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">"i"</span> v<span class="token operator">-</span><span class="token keyword">else</span><span class="token operator">></span>
          <span class="token operator">&lt;</span>v<span class="token operator">-</span>list<span class="token operator">-</span>item<span class="token operator">-</span>action<span class="token operator">></span>
            <span class="token operator">&lt;</span>v<span class="token operator">-</span>icon<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span> item<span class="token punctuation">.</span>icon <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>v<span class="token operator">-</span>icon<span class="token operator">></span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>v<span class="token operator">-</span>list<span class="token operator">-</span>item<span class="token operator">-</span>action<span class="token operator">></span>
          <span class="token operator">&lt;</span>v<span class="token operator">-</span>list<span class="token operator">-</span>item<span class="token operator">-</span>content<span class="token operator">></span>
            <span class="token operator">&lt;</span>v<span class="token operator">-</span>list<span class="token operator">-</span>item<span class="token operator">-</span>title <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"body-2"</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span> item<span class="token punctuation">.</span>text <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>v<span class="token operator">-</span>list<span class="token operator">-</span>item<span class="token operator">-</span>title<span class="token operator">></span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>v<span class="token operator">-</span>list<span class="token operator">-</span>item<span class="token operator">-</span>content<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>v<span class="token operator">-</span>list<span class="token operator">-</span>item<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>v<span class="token operator">-</span>list<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>

<span class="token operator">&lt;</span>script<span class="token operator">></span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'drawer'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      items<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> icon<span class="token operator">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">'drawer.home'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> action<span class="token operator">:</span> <span class="token string">'/'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> icon<span class="token operator">:</span> <span class="token string">'history'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">'drawer.history'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> action<span class="token operator">:</span> <span class="token string">'/history'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> icon<span class="token operator">:</span> <span class="token string">'help'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">'drawer.about'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> action<span class="token operator">:</span> <span class="token string">'/about'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><ul>
<li>DÃ©clarer les diffÃ©rents textes dans les fichiers <code>fr.json</code> et <code>en.json</code>.</li>
</ul>
<p>Maintenant que notre composant est terminÃ©, nous devons lâ€™utiliser. Nous allons lâ€™utiliser dans le premier composant que nous avons Ã©crit <code>src/components/MyToolbar.vue</code>, modifier le pour intÃ©grer les modifications suivantes :</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">></span>
  <span class="token operator">&lt;</span>div<span class="token operator">></span>
    <span class="token comment">// Nouveau</span>
    <span class="token operator">&lt;</span>v<span class="token operator">-</span>navigation<span class="token operator">-</span>drawer v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"drawer"</span> clipped fixed app<span class="token operator">></span>
      <span class="token operator">&lt;</span>myContentDrawer <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>v<span class="token operator">-</span>navigation<span class="token operator">-</span>drawer<span class="token operator">></span>

    <span class="token comment">// Reste du code dÃ©jÃ  prÃ©sent</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>

<span class="token operator">&lt;</span>script<span class="token operator">></span>
<span class="token keyword">import</span> myContentDrawer <span class="token keyword">from</span> <span class="token string">"@/components/Drawer"</span> <span class="token comment">// &lt;== Ajouter lâ€™import</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">"myToolbar"</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>myContentDrawer<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// &lt;== Ajouter la dÃ©claration du composant</span>
<span class="token punctuation">[</span>â€¦<span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>ğŸ¤“ Nous venons de dÃ©clarer un nouveau components dans notre Vue. Simple non ? Il suffit d'importer le composant et de l'ajouter dans l'attribut <code>components</code> de notre objet.</p>
<ul>
<li>Tester votre application :</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> run serve
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="la-page-historique" tabindex="-1"><a class="header-anchor" href="#la-page-historique" aria-hidden="true">#</a> La page : Historique</h3>
<p>Notre application est maintenant fonctionnelle. Nous avons la capacitÃ© de calculer des chutes, dâ€™afficher les informations sur lâ€™application, et bonus dans plusieurs langues !</p>
<p>Mais je pense quâ€™une application nâ€™est jamais vraiment complÃ¨te sans une notion dâ€™historique. Pour Ã§a nous allons crÃ©er une nouvelle Â« vue Â»</p>
<ul>
<li>CrÃ©er le fichier <code>src/views/History.vue</code></li>
<li>CrÃ©er la correspondance entre la Vue et le chemin dans le fichier <code>router/index.js</code></li>
<li>Nâ€™oubliez pas Ã©galement dâ€™ajouter lâ€™Ã©lÃ©ment dans le menu Drawer.</li>
<li>Les textes doivent Ã©galement Ãªtre mis dans la partie i18n</li>
</ul>
<p>Pour rÃ©aliser la vue historique, nous allons devoir sauvegarder les diffÃ©rents rÃ©sultats. Pour Ã§a nous allons utiliser le <code>Localstorage</code>, avant dâ€™allez plus loin je vous propose un peu de lecture sur le localStorage :</p>
<blockquote>
<p>La propriÃ©tÃ© localStorage vous permet d'accÃ©der Ã  un objet local Storage. Le localStorage est similaire au sessionStorage. La seule diffÃ©rence : les donnÃ©es stockÃ©es dans le localStorage n'ont pas de dÃ©lai d'expiration, alors que les donnÃ©es stockÃ©es dans le sessionStorage sont nettoyÃ©es quand la session du navigateur prend fin â€” donc quand on ferme le navigateur.</p>
</blockquote>
<p>Source: <a href="https://developer.mozilla.org/fr/docs/Web/API/Window/localStorage" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/fr/docs/Web/API/Window/localStorage<ExternalLinkIcon/></a></p>
<p>âš ï¸ Petite subtilitÃ©, vous ne pouvez pas stocker de tableau (array) dans le localStorage nous allons devoir utiliser un JSON.</p>
<h4 id="sauvegarder-un-element-dans-le-localstorage" tabindex="-1"><a class="header-anchor" href="#sauvegarder-un-element-dans-le-localstorage" aria-hidden="true">#</a> Sauvegarder un Ã©lÃ©ment dans le localStorage</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code>localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"historique"</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="lire-un-element-dans-le-localstorage" tabindex="-1"><a class="header-anchor" href="#lire-un-element-dans-le-localstorage" aria-hidden="true">#</a> Lire un Ã©lÃ©ment dans le localStorage</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"history"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="demarche" tabindex="-1"><a class="header-anchor" href="#demarche" aria-hidden="true">#</a> DÃ©marche</h4>
<ul>
<li>Adapter le code de <code>Home.vue</code> pour sauvegarder le rÃ©sultat dans un tableau dâ€™historique Ã  chaque fois que lâ€™utilisateur enregistre une nouvelle chute.</li>
<li>Ã‰crire le code de la page <code>History.vue</code> pour afficher les valeurs enregistrÃ©es.</li>
<li>Utiliser les variables computed de VueJS pour retourner la liste de lâ€™historique (<a href="https://vuejs.org/v2/guide/computed.html#Basic-Example" target="_blank" rel="noopener noreferrer">exemple<ExternalLinkIcon/></a>).</li>
</ul>
<p>Ressources utiles :</p>
<ul>
<li><a href="https://vuetifyjs.com/components/lists" target="_blank" rel="noopener noreferrer">Liste Vuetify<ExternalLinkIcon/></a></li>
<li><a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/JSON" target="_blank" rel="noopener noreferrer">JSON<ExternalLinkIcon/></a></li>
<li><a href="https://www.w3schools.com/jsref/jsref_isarray.asp" target="_blank" rel="noopener noreferrer">Tester si tableau<ExternalLinkIcon/></a></li>
</ul>
<p>Vu que câ€™est la 3Ã¨me vue que vous faites, je pense quâ€™il nâ€™est plus nÃ©cessaire que je vous fournisse du code.</p>
<h2 id="ajouter-une-page-permettant-un-ajout-manuel" tabindex="-1"><a class="header-anchor" href="#ajouter-une-page-permettant-un-ajout-manuel" aria-hidden="true">#</a> Ajouter une page permettant un ajout manuel</h2>
<p>Ajouter une nouvelle page, celle-ci permettra d'ajouter une entrÃ©e manuellement dans l'historique.</p>
<h3 id="demarche-1" tabindex="-1"><a class="header-anchor" href="#demarche-1" aria-hidden="true">#</a> DÃ©marche</h3>
<ul>
<li>CrÃ©ation du <code>.vue</code>.</li>
<li>CrÃ©er un formulaire (v-form).</li>
<li>Ajouter le lien dans le <code>Drawer.vue</code>.</li>
<li>Ajouter la route.</li>
</ul>
<h2 id="distribuer-vos-sources" tabindex="-1"><a class="header-anchor" href="#distribuer-vos-sources" aria-hidden="true">#</a> Distribuer vos sources</h2>
<p>VoilÃ  votre application est maintenant terminÃ©e bravo ğŸ‘ğŸ‘. Cependant vous ne savez pas encore comment packager/distribuer votre application. Pour Ã§a rien de plus simple il vous suffit de faire</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> run build
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Cette commande va compiler votre application et vous fournir une version que vous allez pouvoir hÃ©berger comme nâ€™importe quel site Internet (sur un serveur Apache par exemple).</p>
<p>Le rÃ©sultat de la compilation est dans le dossier <code>dist/</code></p>
<ul>
<li>HÃ©berger le rÃ©sultat sur un serveur Apache (wamp).</li>
</ul>
<h2 id="ajouter-un-manifest" tabindex="-1"><a class="header-anchor" href="#ajouter-un-manifest" aria-hidden="true">#</a> Ajouter un manifest</h2>
<p>Nous allons maintenant ajouter la derniÃ¨re pierre Ã  notre Ã©difice, le fichier Manifest. Ce fichier dÃ©crit le fonctionnement du site Web en tant Â« quâ€™application Â», une fois que ce fichier est en place votre navigateur le lira et adaptera son fonctionnement pour quâ€™il se rapproche dâ€™une application (comme une APK).</p>
<p>Pour Ã§a nous allons utiliser deux sites :</p>
<ul>
<li><a href="https://app-manifest.firebaseapp.com/" target="_blank" rel="noopener noreferrer">Un gÃ©nÃ©rateur de fichier Manifest<ExternalLinkIcon/></a></li>
<li><a href="https://romannurik.github.io/AndroidAssetStudio/icons-launcher.html" target="_blank" rel="noopener noreferrer">Un gÃ©nÃ©rateur dâ€™icÃ´ne<ExternalLinkIcon/></a></li>
</ul>
<blockquote>
<p>Le manifest d'une application web fournit des informations concernant celle-ci (comme son nom, son auteur, une icÃ´ne et une description) dans un document texte JSON. Le but du manifeste est d'installer des applications sur l'Ã©cran d'accueil d'un appareil, offrant aux utilisateurs un accÃ¨s plus rapide et une expÃ©rience plus riche.</p>
<p>Les manifests font partie d'un ensemble de technologies appelÃ©es les applications web progressives (progressive web apps). Il s'agit d'applications web qui peuvent Ãªtre installÃ©es sur la page d'accueil d'un appareil sans que l'utilisateur ait Ã  se rendre dans une boutique d'applications. De plus, une fois installÃ©es, elles peuvent Ãªtre utilisÃ©es sans connexion internet et sont capables de recevoir des notifications push.</p>
</blockquote>
<p>Source: Mozilla.org</p>
<ul>
<li>GÃ©nÃ©rer les icÃ´nes ainsi que le fichier Manifest</li>
<li>TÃ©lÃ©charger le manifest.json et le mettre dans le dossier <code>static/</code> faire la mÃªme chose pour les icÃ´nes.</li>
<li>Ã‰diter le fichier <code>index.html</code> du dossier public pour y ajouter :</li>
</ul>
<div class="language-html ext-html line-numbers-mode"><pre v-pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>manifest<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./static/manifest.json<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul>
<li>Vous pouvez builder votre application et la mettre Ã  jour sur votre serveur Web.</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> run build
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul>
<li>Tester lâ€™application depuis votre TÃ©lÃ©phone Android / iOs.</li>
</ul>
<h3 id="ajouter-firebase" tabindex="-1"><a class="header-anchor" href="#ajouter-firebase" aria-hidden="true">#</a> Ajouter Firebase</h3>
<p>Dans le prÃ©cÃ©dent TP nous avons ajoutÃ© Firebase pour synchroniser les Ã©lÃ©ments sur une carte. C'Ã©tait un exemple trÃ¨s visuel, mais il est Ã©videmment possible de faire bien plus.</p>
<p>Nous allons nous servir de Firebase dans ce projet pour synchroniser Â« l'historique Â» avec l'ensemble des utilisateurs. Je vous propose donc de vous inspirer du prÃ©cÃ©dent TP, et d'ajouter les dÃ©pendances :</p>
<ul>
<li>Vuefire.</li>
<li>Firebase.</li>
</ul>
<p>L'affichage doit Ãªtre identique Ã  la version actuelle de votre application.</p>
</template>
