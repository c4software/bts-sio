import{_ as s,c as i,o as a,U as e}from"./chunks/framework.aGaNZw_P.js";const n="/assets/postman.Dcf3jINq.png",l="/assets/postman_get.BpCBrYs0.png",t="/assets/projet_migration.DI2DAMHE.png",b=JSON.parse('{"title":"Ajouter VueJS 2.0 dans une application existante","description":"Dans le cadre du TP, vous allez devoir Â« moderniser Â» une application simple. Lâ€™application Ã  migrer a Ã©tÃ© rÃ©alisÃ©e dans le cadre de la dÃ©monstration _uniquement_.","frontmatter":{"description":"Dans le cadre du TP, vous allez devoir Â« moderniser Â» une application simple. Lâ€™application Ã  migrer a Ã©tÃ© rÃ©alisÃ©e dans le cadre de la dÃ©monstration _uniquement_."},"headers":[],"relativePath":"tp/vuejs/tp1.md","filePath":"tp/vuejs/tp1.md","lastUpdated":1704112852000}'),p={name:"tp/vuejs/tp1.md"},r=e(`<h1 id="ajouter-vuejs-2-0-dans-une-application-existante" tabindex="-1">Ajouter VueJS 2.0 dans une application existante <a class="header-anchor" href="#ajouter-vuejs-2-0-dans-une-application-existante" aria-label="Permalink to &quot;Ajouter VueJS 2.0 dans une application existante&quot;">â€‹</a></h1><p>Dans le cadre du TP, vous allez devoir Â« moderniser Â» une application simple. Lâ€™application Ã  migrer a Ã©tÃ© rÃ©alisÃ©e dans le cadre de la dÃ©monstration <em>uniquement</em>.</p><p>Lâ€™application existante est une Â« todo liste Â» codÃ©e en PHP + HTML.</p><details class="details custom-block"><summary>Table des matiÃ¨res</summary><nav class="table-of-contents"><ul><li><a href="#recuperation-et-installation-des-sources">RÃ©cupÃ©ration et installation des sources</a></li><li><a href="#liste-des-fonctionnalites">Liste des fonctionnalitÃ©s</a></li><li><a href="#stockage">Stockage</a></li><li><a href="#moderniser-avec-vuejs">Moderniser avec VueJS</a></li><li><a href="#creation-des-api">CrÃ©ation des API</a><ul><li><a href="#les-api">Les API</a></li><li><a href="#l-api-pour-lister-les-taches-liste-php">Lâ€™API pour lister les tÃ¢ches : liste.php</a></li><li><a href="#comment-proceder-pour-les-prochaines-api">Comment procÃ©der pour les prochaines API</a></li><li><a href="#l-api-de-creation-creation-php">Lâ€™API de crÃ©ation: creation.php</a></li><li><a href="#l-api-pour-marquer-une-tache-comme-terminee-terminer-php">Lâ€™API pour marquer une tÃ¢che comme terminÃ©e : terminer.php</a></li><li><a href="#l-api-de-suppression-suppression-php">Lâ€™API de suppression : suppression.php</a></li><li><a href="#valider-le-fonctionnement-postman">Valider le fonctionnement : Postman</a></li><li><a href="#optimisation-du-code">Optimisation du code</a></li></ul></li><li><a href="#integration-de-vuejs">IntÃ©gration de VueJS</a><ul><li><a href="#creation-de-la-structure-de-Â«-futur-Â»-projet">CrÃ©ation de la structure de Â« futur Â» projet</a></li><li><a href="#conversion-du-template-existant">Conversion du template existant</a></li><li><a href="#ajout-de-la-librairie-vuejs">Ajout de la librairie VueJS</a></li><li><a href="#migration-des-fonctionnalites">Migration des fonctionnalitÃ©s</a></li></ul></li><li><a href="#allez-plus-loin">Allez plus loin</a><ul><li><a href="#mettre-en-place-des-Â«-alertes-Â»">Mettre en place des Â« alertes Â»</a></li><li><a href="#ajouter-des-confirmations">Ajouter des confirmations</a></li><li><a href="#utiliser-l-api-de-partage">Utiliser l&#39;API de partage</a></li><li><a href="#ajouter-des-regles-de-reecriture">Ajouter des rÃ¨gles de rÃ©Ã©criture</a></li></ul></li></ul></nav></details><h2 id="recuperation-et-installation-des-sources" tabindex="-1">RÃ©cupÃ©ration et installation des sources <a class="header-anchor" href="#recuperation-et-installation-des-sources" aria-label="Permalink to &quot;RÃ©cupÃ©ration et installation des sources&quot;">â€‹</a></h2><p>Avant de commencer Ã  travailler, il faut rÃ©cupÃ©rer le code source de lâ€™application existante. Le projet est disponible sur Github : <a href="https://github.com/c4software/php-todo/archive/v1.1.zip" target="_blank" rel="noreferrer">tÃ©lÃ©charger les sources</a></p><ul><li>Faire Â« fonctionner Â» lâ€™application en local, une fois installÃ©e, celle-ci doit ressembler Ã  :</li></ul><p><img src="https://github.com/c4software/php-todo/raw/master/sample.png" alt="Exemple" loading="lazy"></p><ul><li>Ã‰tudier le fonctionnement du code source actuel. (crÃ©er des tÃ¢ches, etc.)</li></ul><h2 id="liste-des-fonctionnalites" tabindex="-1">Liste des fonctionnalitÃ©s <a class="header-anchor" href="#liste-des-fonctionnalites" aria-label="Permalink to &quot;Liste des fonctionnalitÃ©s&quot;">â€‹</a></h2><p>VoilÃ  la liste des fonctionnalitÃ©s de lâ€™application existante :</p><ul><li>Liste des tÃ¢ches.</li><li>Ajout de tÃ¢che.</li><li>Suppression de tÃ¢che.</li><li>Marquer comme terminÃ© une tÃ¢che.</li></ul><h2 id="stockage" tabindex="-1">Stockage <a class="header-anchor" href="#stockage" aria-label="Permalink to &quot;Stockage&quot;">â€‹</a></h2><p>Lors de votre Ã©tude du code, vous avez dÃ» vous rendre compte que lâ€™application utilisait la variable <code>$_SESSION</code> pour stocker les Â« tÃ¢ches Â».</p><p>La SESSION Ã©tant non persistante, dans du vrai code il ne faut en <code>aucun cas</code> stocker des donnÃ©es comme des tÃ¢ches dedans (au risque de tout perdreâ€¦).</p><p>ğŸ” Au passage, regarder le fonctionnement de la SESSION en utilisant plusieurs navigateurs.</p><h2 id="moderniser-avec-vuejs" tabindex="-1">Moderniser avec VueJS <a class="header-anchor" href="#moderniser-avec-vuejs" aria-label="Permalink to &quot;Moderniser avec VueJS&quot;">â€‹</a></h2><p>Dans ce TP nous allons parcourir les diffÃ©rentes Ã©tapes de la migration de lâ€™application (site web) Â« classique Â» en version Â« moderne Â» Ã  savoir avec VueJS.</p><h2 id="creation-des-api" tabindex="-1">CrÃ©ation des API <a class="header-anchor" href="#creation-des-api" aria-label="Permalink to &quot;CrÃ©ation des API&quot;">â€‹</a></h2><p>Quand on rÃ©alise une application Â« moderne Â», il est trÃ¨s difficile dâ€™Ã©chapper au client-serveur. Dans notre cas la partie serveur va Ãªtre rÃ©alisÃ©e en PHP, mais il est possible de la faire dans nâ€™importe quel langage. En entreprise, vous serez souvent confrontÃ© Ã  du PHP/Java/Python/RoR. Mais la liste est infinie. Il est mÃªme possible de faire des API en Bashâ€¦ Bref le choix est infini.</p><h3 id="les-api" tabindex="-1">Les API <a class="header-anchor" href="#les-api" aria-label="Permalink to &quot;Les API&quot;">â€‹</a></h3><p>Notre cas Ã©tant simple, chaque API sera en rÃ©alitÃ© un fichier PHP qui se chargera de faire lâ€™action voulue. Exemple :</p><ul><li>liste.php</li><li>creation.php</li><li>suppression.php</li><li>terminer.php</li></ul><p>Dans un nouveau dossier (version VueJS du site Web), ajouter un dossier <code>api</code> puis crÃ©er les <code>4</code> fichiers dans le dossier, nous les complÃ¨terons dans la suite du TP.</p><h3 id="l-api-pour-lister-les-taches-liste-php" tabindex="-1">Lâ€™API pour lister les tÃ¢ches : liste.php <a class="header-anchor" href="#l-api-pour-lister-les-taches-liste-php" aria-label="Permalink to &quot;Lâ€™API pour lister les tÃ¢ches : liste.php&quot;">â€‹</a></h3><p>Lâ€™API Â« liste Â» doit retourner un JSON. Le JSON retournÃ© est une reprÃ©sentation au format texte des valeurs contenues dans la variable <code>$_SESSION[&quot;todos&quot;]</code>.</p><p>Exemple de retour :</p><div class="language-JSON vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">JSON</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;contenu&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DÃ©mo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;termine&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;contenu&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Exemple&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;termine&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>VoilÃ  un exemple de code pour rÃ©aliser un fichier JSON en PHP :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">php</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  session_start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  header</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;content-type: application/json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // VÃ©rifier si en $_SESSION[&quot;todos&quot;] est bien un tableau</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">is_array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($_SESSION[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;todos&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])){</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    echo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> json_encode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($_SESSION[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;todos&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    echo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> json_encode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Rappel: Avant de pouvoir utiliser la session, vous devez faire un <code>session_start();</code></p><p>Câ€™est Ã  vous, rÃ©aliser votre premiÃ¨re API.</p><h3 id="comment-proceder-pour-les-prochaines-api" tabindex="-1">Comment procÃ©der pour les prochaines API <a class="header-anchor" href="#comment-proceder-pour-les-prochaines-api" aria-label="Permalink to &quot;Comment procÃ©der pour les prochaines API&quot;">â€‹</a></h3><p>âœ‹ En tant que dÃ©veloppeur vous devez Ãªtre malin (et fainÃ©antsâ€¦). Pour Ã©crire les autres API, ne tentez pas de rÃ©inventer la roue, utiliser les exemples fournis dans le code actuel (dans le dossier <code>actions</code> par exemple).</p><h3 id="l-api-de-creation-creation-php" tabindex="-1">Lâ€™API de crÃ©ation: creation.php <a class="header-anchor" href="#l-api-de-creation-creation-php" aria-label="Permalink to &quot;Lâ€™API de crÃ©ation: creation.php&quot;">â€‹</a></h3><p>Lâ€™API Â« creation.php Â» va permettre la crÃ©ation de nouvelles Â« tÃ¢ches Â», une fois lâ€™ajout rÃ©alisÃ©, celle-ci doit retourner un JSON permettant de savoir dans votre application si le traitement sâ€™est bien passÃ©. Cette API ne doit fonctionner quâ€™en POST.</p><p>ParamÃ¨tre dâ€™entrÃ©e :</p><table><thead><tr><th>Nom</th><th style="text-align:center;">Type</th><th style="text-align:right;">MÃ©thode</th></tr></thead><tbody><tr><td>texte</td><td style="text-align:center;">string</td><td style="text-align:right;">POST</td></tr></tbody></table><p>Voici un exemple de code PHP :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">php</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">session_start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">header</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;content-type: application/json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Dans le cadre du traitement, vÃ©rifier si $_SESSION[&quot;todos&quot;] est bien un tableau (is_arrayâ€¦)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">isset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($_SESSION[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;todos&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">is_array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($_SESSION[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;todos&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  $_SESSION[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;todos&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">isset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($_POST[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;texte&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $_POST[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;texte&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  $todo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> uniqid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;texte&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $_POST[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;texte&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;date&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> time</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;termine&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Sauvegarder dans la Session.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  $_SESSION[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;todos&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">][$todo[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $todo;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Afficher un JSON</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  echo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> json_encode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;success&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  echo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> json_encode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;success&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>Retour :</p><p>Par exemple :</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Vous pouvez Ã©galement utiliser les codes de retour HTTP pour indique lâ€™Ã©tat du rÃ©sultat. <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status" target="_blank" rel="noreferrer">Documentation</a></p><h3 id="l-api-pour-marquer-une-tache-comme-terminee-terminer-php" tabindex="-1">Lâ€™API pour marquer une tÃ¢che comme terminÃ©e : terminer.php <a class="header-anchor" href="#l-api-pour-marquer-une-tache-comme-terminee-terminer-php" aria-label="Permalink to &quot;Lâ€™API pour marquer une tÃ¢che comme terminÃ©e : terminer.php&quot;">â€‹</a></h3><p>Lâ€™API Â« terminer.php Â» va changer lâ€™Ã©tat du flag Â« termine Â». Vous devez retourner un JSON permettant Ã  votre future application de sâ€™avoir si le traitement câ€™est bien dÃ©roulÃ©.</p><p>ParamÃ¨tre dâ€™entrÃ©e :</p><table><thead><tr><th>Nom</th><th style="text-align:center;">Type</th><th style="text-align:right;">MÃ©thode</th></tr></thead><tbody><tr><td>id</td><td style="text-align:center;">string</td><td style="text-align:right;">GET</td></tr></tbody></table><h3 id="l-api-de-suppression-suppression-php" tabindex="-1">Lâ€™API de suppression : suppression.php <a class="header-anchor" href="#l-api-de-suppression-suppression-php" aria-label="Permalink to &quot;Lâ€™API de suppression : suppression.php&quot;">â€‹</a></h3><p>Lâ€™API Â« suppression Â» va permettre la suppression de la Â« tÃ¢che Â» passÃ©e en paramÃ¨tre, <strong><em>uniquement</em></strong> les tÃ¢ches dont le paramÃ¨tre <code>termine == true</code> peuvent Ãªtre terminÃ©, dans tous les cas lâ€™API doit retourner un JSON permettant de savoir dans votre application si le traitement câ€™est bien passÃ©. Lâ€™API doit fonctionner en GET et en POST.</p><p>Contraintes :</p><ul><li>Lâ€™API doit fonctionner en GET et en POST.</li><li>Il est impossible de supprimer une tÃ¢che non terminÃ©e. <code>termine == true</code></li></ul><p>ParamÃ¨tre dâ€™entrÃ©e :</p><table><thead><tr><th>Nom</th><th style="text-align:center;">Type</th><th style="text-align:right;">MÃ©thode</th></tr></thead><tbody><tr><td>id</td><td style="text-align:center;">string</td><td style="text-align:right;">GET</td></tr></tbody></table><p>Par exemple :</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="valider-le-fonctionnement-postman" tabindex="-1">Valider le fonctionnement : Postman <a class="header-anchor" href="#valider-le-fonctionnement-postman" aria-label="Permalink to &quot;Valider le fonctionnement : Postman&quot;">â€‹</a></h3><p>Pour tester vos traitements, vous avez la possibilitÃ© dâ€™utiliser le logiciel PostMan. PostMan va vous permettre de tester vos API simplement avec une interface graphique.</p><p>TÃ©lÃ©chargez-le <a href="https://www.getpostman.com/" target="_blank" rel="noreferrer">ici</a></p><p>Une fois installÃ©, tester les appels Ã  vos APIs pour valider le bon fonctionnement</p><ul><li>Valider le fonctionnement Ã  chaque Ã©tape (CrÃ©ation, liste, terminer, suppression).</li></ul><h4 id="pour-l-api-creation" tabindex="-1">Pour lâ€™API crÃ©ation <a class="header-anchor" href="#pour-l-api-creation" aria-label="Permalink to &quot;Pour lâ€™API crÃ©ation&quot;">â€‹</a></h4><p>Petite subtilitÃ©, pour lâ€™API de crÃ©ation vous devez faire une requÃªte en POST. Vous devez donc rÃ©gler PostMan comme Ã§a :</p><p><img src="`+n+'" alt="PostMan DÃ©mo configuration Post" loading="lazy"></p><h4 id="pour-les-autres-api" tabindex="-1">Pour les autres API <a class="header-anchor" href="#pour-les-autres-api" aria-label="Permalink to &quot;Pour les autres API&quot;">â€‹</a></h4><p>Pour les autres API (sauf liste), vous allez devoir envoyer un <code>id</code> en paramÃ¨tre, avec PostMan câ€™est simple, voilÃ  la configuration que vous allez devoir faire :</p><p><img src="'+l+'" alt="Postman Demo GET" loading="lazy"></p><h3 id="optimisation-du-code" tabindex="-1">Optimisation du code <a class="header-anchor" href="#optimisation-du-code" aria-label="Permalink to &quot;Optimisation du code&quot;">â€‹</a></h3><p>AprÃ¨s avoir rÃ©alisÃ© vos 4 API, vous devez certainement avoir du code Â« dupliquÃ© Â». Modifier vos API pour crÃ©er des fonctions Â« utilitaires Â» permettant de rÃ©duire la duplication de code.</p><ul><li>Comment procÃ©dez-vous ?</li><li>Tester le fonctionnement Ã  nouveau.</li></ul><h2 id="integration-de-vuejs" tabindex="-1">IntÃ©gration de VueJS <a class="header-anchor" href="#integration-de-vuejs" aria-label="Permalink to &quot;IntÃ©gration de VueJS&quot;">â€‹</a></h2><p>Maintenant que nous avons crÃ©Ã© les API nous allons pouvoir nous intÃ©resser Ã  la partie Â« Jâ€™intÃ¨gre VueJS Â».</p><p>Le dÃ©roulement des prochaines Ã©tapes va Ãªtre le suivant :</p><ul><li>IntÃ©grer la librairie VueJS dans le code existant.</li><li>CrÃ©er Â« un composant / objet Â» global qui va gÃ©rer lâ€™application.</li><li>Â« Convertir Â» le code existant en code Â« VueJS Â» (le Foreach par exemple).</li></ul><p>Ne vous inquiÃ©tez pas, tout est dÃ©taillÃ© dans les prochaines Ã©tapes :</p><p>Pour rÃ©aliser la suite du TP, nous allons avoir besoin des ressources suivantes :</p><ul><li><a href="https://vuejs.org" target="_blank" rel="noreferrer">VueJS</a></li><li><a href="https://caniuse.com" target="_blank" rel="noreferrer">CanIUse</a></li></ul><h3 id="creation-de-la-structure-de-Â«-futur-Â»-projet" tabindex="-1">CrÃ©ation de la structure de Â« futur Â» projet <a class="header-anchor" href="#creation-de-la-structure-de-Â«-futur-Â»-projet" aria-label="Permalink to &quot;CrÃ©ation de la structure de Â« futur Â» projet&quot;">â€‹</a></h3><p>Maintenant que nous avons les API, nous allons pouvoir crÃ©er la structure de la Â« V2 Â». La suite du TP va dÃ©tailler le processus, mais voilÃ  le rendu du projet que vous allez obtenir :</p><p><img src="'+t+`" alt="Structure" loading="lazy"></p><p>Vous pouvez dÃ¨s Ã  prÃ©sent dÃ©placer les diffÃ©rents fichiers, pour obtenir la mÃªme chose (surtout pour le dossier <code>public</code>).</p><h3 id="conversion-du-template-existant" tabindex="-1">Conversion du template existant <a class="header-anchor" href="#conversion-du-template-existant" aria-label="Permalink to &quot;Conversion du template existant&quot;">â€‹</a></h3><p>La premiÃ¨re Ã©tape est de convertir le fichier <code>index.php</code>. Notre application 2.0, ne sera plus une application PHP classique, mais une application reposant sur un modÃ¨le Client &lt;-&gt; Serveur. Pour Ã§a vous devez procÃ©der Ã  quelques ajustements dans le site Internet :</p><ul><li>Supprimer le fichier index.php (il nâ€™est plus nÃ©cessaire).</li><li>DÃ©placer le template (dans le dossier template Ã  la racine).</li><li>Renommer le template que vous avez dÃ©placÃ© en Â« index.html Â», Ã§a va Ãªtre la base de notre application.</li></ul><h3 id="ajout-de-la-librairie-vuejs" tabindex="-1">Ajout de la librairie VueJS <a class="header-anchor" href="#ajout-de-la-librairie-vuejs" aria-label="Permalink to &quot;Ajout de la librairie VueJS&quot;">â€‹</a></h3><p>Lâ€™ajout de la librairie VueJS est simple, il suffit dâ€™ajouter dans le Â« head Â» du index.html :</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Valider le fonctionnement grÃ¢ce Ã  la Â« Console de DÃ©veloppement Â» de votre Navigateur (touche F12 en gÃ©nÃ©ral).</p><p>âš ï¸ Dans une optique dÃ©veloppement sÃ©curisÃ©, il est prÃ©fÃ©rable dâ€™intÃ©grer VueJS dans vos sources plutÃ´t que de Â« linker Â» directement depuis Internet.</p><ul><li>Comment validez-vous le fonctionnement ?</li><li>Changer les sources, pour intÃ©grer la librairie en local.</li></ul><h4 id="ajouter-un-script-pour-le-js" tabindex="-1">Ajouter un script pour le JS <a class="header-anchor" href="#ajouter-un-script-pour-le-js" aria-label="Permalink to &quot;Ajouter un script pour le JS&quot;">â€‹</a></h4><p>Ajouter avant la balise <code>&lt;/body&gt;</code> de lâ€™index.html un nouveau script <code>main.js</code>, il contiendra le code nÃ©cessaire au fonctionnement de notre site Web.</p><p>ğŸ˜… Vous devez bien Ã©videment crÃ©er le fichier <code>main.js</code>.</p><h4 id="declarer-votre-premier-composant" tabindex="-1">DÃ©clarer votre premier composant <a class="header-anchor" href="#declarer-votre-premier-composant" aria-label="Permalink to &quot;DÃ©clarer votre premier composant&quot;">â€‹</a></h4><p>Pour dÃ©clarer votre premier composant / objet VueJS, câ€™est simple il suffit de mettre dans le fichier <code>main.js</code> le code suivant :</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  el: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;.container&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  created</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DÃ©marrage TODO-APP&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>VÃ©rifier le bon fonctionnement en regardant la Â« Console de DÃ©veloppement Â». Le Â« log Â» est-il visible ?</li></ul><h3 id="migration-des-fonctionnalites" tabindex="-1">Migration des fonctionnalitÃ©s <a class="header-anchor" href="#migration-des-fonctionnalites" aria-label="Permalink to &quot;Migration des fonctionnalitÃ©s&quot;">â€‹</a></h3><p>Maintenant que nous avons notre base, nous allons pouvoir convertir lâ€™application. Pour cela nous allons procÃ©der par Ã©tape, chaque Ã©tape est directement liÃ©e aux diffÃ©rentes API que vous avez pu prÃ©cÃ©demment Ã©crire.</p><p>Lâ€™ensemble de lâ€™application va devenir Â« asynchrone Â», vous allez vite vous rendre compte que la migration va nÃ©cessiter beaucoup dâ€™Ajax. Pour faire nos appels, nous utiliserons lâ€™API Â« Fetch Â», celle-ci est intÃ©grÃ©e dans lâ€™ensemble des navigateurs rÃ©cents, le bon rÃ©flexe est quand mÃªme dâ€™aller voir le support de Fetch sur (<a href="https://caniuse.com/#search=fetch" target="_blank" rel="noreferrer">Can i use</a>).</p><h4 id="decouverte-de-fetch" tabindex="-1">DÃ©couverte de Fetch <a class="header-anchor" href="#decouverte-de-fetch" aria-label="Permalink to &quot;DÃ©couverte de Fetch&quot;">â€‹</a></h4><p>L&#39;API Fetch fournit une interface JavaScript pour l&#39;accÃ¨s et la manipulation des parties du pipeline HTTP, comme les requÃªtes et les rÃ©ponses. Cela fournit aussi une mÃ©thode globale fetch() qui procure un moyen facile et logique de rÃ©cupÃ©rer des ressources Ã  travers le rÃ©seau de maniÃ¨re asynchrone.</p><p>Ce genre de fonctionnalitÃ© Ã©tait auparavant rÃ©alisÃ© avec XMLHttpRequest. Fetch fournit une meilleure alternative qui peut Ãªtre utilisÃ©e facilement par dâ€™autres technologies comme Service Workers. Fetch fournit aussi un endroit unique et logique pour la dÃ©finition d&#39;autres concepts liÃ©s Ã  HTTP comme CORS et les extensions d&#39;HTTP.</p><p>(Source: MDM)</p><p>Le support de l&#39;API Fetch peut Ãªtre dÃ©tectÃ© en vÃ©rifiant l&#39;existence de Headers, Request, Response ou fetch() sur la portÃ©e de Window ou de Worker. Par exemple, vous pouvez faire cela dans votre script:</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (self.fetch) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Le support de Fetch est prÃ©sent</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // GÃ©rer le cas du non-support de fetch.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Pour rÃ©duire le nombre de cas possible vous pouvez ajouter : https://github.github.io/fetch/ Ã  votre projet</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Voici un EXEMPLE dâ€™utilisation de Fetch :</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;api/liste.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;GET&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, credentials: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;same-origin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // On dÃ©code le JSON, et on continue</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Votre retour est ICI</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;RÃ©cupÃ©ration impossible: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> error.message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>âš ï¸ Que veux dire <code>credentials: &#39;same-origin&#39;</code>? Par dÃ©faut, Fetch nâ€™utilise pas les Cookies, vous pouvez forcer lâ€™utilisation des cookies en indiquant <code>credentials: &#39;same-origin&#39;</code>. Si vous ne le faites pas vos <code>$_SESSION</code> ne seront pas sauvegardÃ©es âš ï¸</p><p>Tester le code prÃ©cÃ©dent dans :</p><ul><li>Tester dÃ¨s Ã  prÃ©sent cet appel dans la Â« Console dÃ©veloppeur Â»</li></ul><p>Pour aller plus loin dans lâ€™utilisation de Fetch, je vous recommande la lecture de <a href="https://developer.mozilla.org/fr/docs/Web/API/Fetch_API/Using_Fetch" target="_blank" rel="noreferrer">la documentation complÃ¨te (gestion des headers, paramÃ¨tres, mode, etc.)</a></p><h4 id="liste-des-taches" tabindex="-1">Liste des tÃ¢ches <a class="header-anchor" href="#liste-des-taches" aria-label="Permalink to &quot;Liste des tÃ¢ches&quot;">â€‹</a></h4><p>La liste des tÃ¢ches est chargÃ©e dÃ¨s lâ€™arrivÃ©e sur la page Â« principale Â». Vous devez donc Ã©crire du code dans lâ€™Ã©vÃ¨nement Â« beforeMount Â» (pour rappel nâ€™hÃ©sitez pas Ã  consulter le <a href="https://vuejs.org/images/lifecycle.png" target="_blank" rel="noreferrer">cycle de vie des composants</a>)</p><ul><li>Dans le fichier main.js, ajouter Ã  lâ€™objet Vue <code>beforeMount</code></li></ul><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  el: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;.container&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  created</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DÃ©marrage TODO-APP&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  beforeMount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Pour l&#39;instant nous allons mettre le code ici</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>Ajouter le code suivant dans la partie <code>beforeMount</code></li></ul><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;api/liste.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;GET&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, credentials: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;same-origin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.taches </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;RÃ©cupÃ©ration impossible: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> error.message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>Initialisez la variable tÃ¢ches dans lâ€™objet VueJS, Exemple :</li></ul><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  el: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.container&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { taches: [] }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  [â€¦]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>Ajouter lâ€™affichage dans le Â« template Â». Dans la page HTML vous allez devoir utiliser lâ€™attribut <code>v-for</code>. Exemple :</li></ul><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">li</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tache in taches&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{{tache.texte}}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Adapter lâ€™exemple prÃ©cÃ©dant pour afficher les tÃ¢ches comme ils lâ€™Ã©taient dans la page en version PHP.</p><p><a href="https://fr.vuejs.org/v2/guide/list.html" target="_blank" rel="noreferrer">Plus de dÃ©tail sur la partie Â« rendu des listes Â»</a></p><ul><li>Lâ€™affichage est-il le mÃªme ?</li><li>Comment gÃ©rer le cas du chargement ? (dans le monde rÃ©el Internet peut-Ãªtre lentâ€¦)</li><li>Comment gÃ©rer le cas de la liste vide ?</li></ul><h4 id="organisation-du-code" tabindex="-1">Organisation du code <a class="header-anchor" href="#organisation-du-code" aria-label="Permalink to &quot;Organisation du code&quot;">â€‹</a></h4><p>DÃ©placer le code actuellement dans <code>beforeMount</code> dans une nouvelle mÃ©thode appelÃ©e <code>recupererListe</code> :</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  [â€¦]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  methods: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    recupererListe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // â€¦</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Remplacer le code dans le <code>beforeMount</code> pour appeler la mÃ©thode <code>recupererListe</code>.</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  el: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;.container&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  created</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DÃ©marrage TODO-APP&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  beforeMount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">recupererListe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="ajout-d-une-tache" tabindex="-1">Ajout dâ€™une tÃ¢che <a class="header-anchor" href="#ajout-d-une-tache" aria-label="Permalink to &quot;Ajout dâ€™une tÃ¢che&quot;">â€‹</a></h4><p>Maintenant que la liste est affichÃ©e, vous allez pouvoir gÃ©rer le cas de lâ€™ajout dâ€™une nouvelle tÃ¢che. Lâ€™ajout va Ã©galement Ãªtre fait via un appel Ajax.</p><ul><li>CrÃ©er une mÃ©thode JavaScript, rÃ©alisant lâ€™appel de lâ€™API.</li></ul><p>âš ï¸ Attention: Lâ€™utilisateur devant Ãªtre prÃ©venu de lâ€™aspect obligatoire du contenu, vous devez rendre la saisie obligatoire (contrÃ´le de saisie, et/ou via <a href="https://sweetalert.js.org/guides/#cdn" target="_blank" rel="noreferrer">librairie Sweetalert</a>) âš ï¸</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  [â€¦]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  methods: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    ajout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // Pourquoi pas une variable dans Â« data Â», tout simplement pour simplifier Â« le TP Â».</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> contenu </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;texte&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).value;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(contenu </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        swal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Oops&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Vous devez spÃ©cifier du texteâ€¦&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> , </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Appel de lâ€™API avec Fetch (Ajax)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  [â€¦]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>CrÃ©er lâ€™appel Ã  lâ€™API</li></ul><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> form </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FormData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">form.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;texte&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, contenu);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;api/creation.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  body: form,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  credentials: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;same-origin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (response.success) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">recupererListe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // GÃ©rer le cas d&#39;erreur. Par exemple, afficher une Sweetalert pour le client.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;RÃ©cupÃ©ration impossible: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> error.message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ul><li>Rafraichir la liste des tÃ¢ches, pour Ã§a vous allez crÃ©er une 2nd mÃ©thode qui rÃ©alise lâ€™appel Ajax de rÃ©cupÃ©ration de la liste. Une fois cette mÃ©thode faite, appeler la dans la partie <code>// traiter le retour</code>.</li><li>Optimiser votre code en remplaÃ§ant le code dans le <code>beforeMount</code> par un appel Ã  la mÃ©thode que vous avez crÃ©Ã©e.</li></ul><p>Votre objet VueJS doit ressembler Ã  quelque chose comme Ã§a :</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  el: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;.container&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  created</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DÃ©marrage TODO-APP&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  data: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    taches: [],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  beforeMount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">recupererListe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  methods: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    ajout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // Votre code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    recupererListe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // Votre code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ul><li>Appel de votre code dans le template. Maintenant que votre code est prÃªt, vous allez pouvoir lâ€™appeler depuis votre template. Pour faire Ã§a, vous allez utiliser <a href="https://vuejs.org/v2/guide/events.html" target="_blank" rel="noreferrer">la gestion des Ã©vÃ¨nements de VueJS</a> Exemple :</li></ul><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">form</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @submit.prevent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ajout()&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">form</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>Tester votre code.</li><li>Tester lâ€™ajout de tÃ¢che.</li><li>Tenter dâ€™injecter du code. Que se passe-t-il ?</li></ul><h4 id="marquer-une-tache-comme-terminee" tabindex="-1">Marquer une tÃ¢che comme terminÃ©e <a class="header-anchor" href="#marquer-une-tache-comme-terminee" aria-label="Permalink to &quot;Marquer une tÃ¢che comme terminÃ©e&quot;">â€‹</a></h4><p>Pour marquer une tÃ¢che comme terminÃ©e, vous allez devoir appeler lâ€™api Â« terminer.php Â». Cette API doit Ãªtre appelÃ©e lors du clic sur lâ€™icÃ´ne qui a comme class Â« oi oi-check Â».</p><ul><li>Utilisez-le <a href="https://fr.vuejs.org/v2/guide/events.html" target="_blank" rel="noreferrer">v-on:click</a></li><li>Remplacer :</li></ul><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">a</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./actions/done.php?id={id}&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;btn btn-success&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &gt;&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;oi oi-check&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Par</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;oi oi-check&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-on:click</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;terminer(todo.id)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>DÃ©clarer la mÃ©thode Â« terminer Â» dans votre objet VueJS. Faites lâ€™appel Ã  votre API.</li><li>Lâ€™objet VueJS doit maintenant ressemble Ã  quelque chose comme Ã§a :</li></ul><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  el: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;.container&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  created</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DÃ©marrage TODO-APP&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  data: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    taches: [],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  beforeMount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">recupererListe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  methods: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    ajout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // Votre code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    recupererListe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // Votre code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    terminer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // Votre code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><ul><li>Ajouter le <a href="https://fr.vuejs.org/v2/guide/conditional.html" target="_blank" rel="noreferrer">v-if</a> nÃ©cessaire Ã  la rÃ¨gle suivante Â« uniquement les tÃ¢ches non terminÃ©es peuvent Ãªtre marquÃ©es comme terminÃ©es Â»</li><li>Tester le fonctionnement.</li><li>Valider que seulement les tÃ¢ches marquÃ©es comme Â« non terminÃ©es Â» peuvent Ãªtre terminÃ©es.</li></ul><h4 id="suppression-d-une-tache" tabindex="-1">Suppression dâ€™une tÃ¢che <a class="header-anchor" href="#suppression-d-une-tache" aria-label="Permalink to &quot;Suppression dâ€™une tÃ¢che&quot;">â€‹</a></h4><p>La suppression dâ€™une tÃ¢che est trÃ¨s similaire Ã  lâ€™action Â« terminer.php Â». Je vous laisse appliquer la mÃ©thodologie prÃ©cÃ©dente.</p><p>Ne pas oublier la rÃ¨gle de gestion : Â« Une tÃ¢che non marquÃ©e comme terminÃ©e ne peut Ãªtre supprimÃ©e. Â»</p><p>Lâ€™objet doit maintenant ressembler Ã  (Le code que vous avez Ã©crit en moins):</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  el: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;.container&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  created</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DÃ©marrage TODO-APP&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  data: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    taches: [],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  beforeMount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">recupererListe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  methods: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    ajout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // Votre code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    recupererListe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // Votre code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    terminer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // Votre code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    supprimer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // Votre code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h4 id="optimisation" tabindex="-1">Optimisation <a class="header-anchor" href="#optimisation" aria-label="Permalink to &quot;Optimisation&quot;">â€‹</a></h4><p>Comme vous lâ€™avez certainement constatÃ©, les deux derniÃ¨res actions sont trÃ¨s similaires. Faites fusionner les deux actions en ajoutant par exemple un paramÃ¨tre Â« action Â». Ce paramÃ¨tre vous permettra de savoir dans quel cas vous vous trouvez, je vous laisse Ã©crire le code.</p><h2 id="allez-plus-loin" tabindex="-1">Allez plus loin <a class="header-anchor" href="#allez-plus-loin" aria-label="Permalink to &quot;Allez plus loin&quot;">â€‹</a></h2><p>Quelques pistes pour aller plus loin dans le code :</p><h3 id="mettre-en-place-des-Â«-alertes-Â»" tabindex="-1">Mettre en place des Â« alertes Â» <a class="header-anchor" href="#mettre-en-place-des-Â«-alertes-Â»" aria-label="Permalink to &quot;Mettre en place des Â« alertes Â»&quot;">â€‹</a></h3><p>Vous n&#39;avez certainement pas mis les messages en cas Â« d&#39;erreur Â» comme indiquÃ© aux diffÃ©rentes Ã©tapes, comme par exemple :</p><ul><li>En cas d&#39;absence de texte au moment de la validation du formulaire.</li><li>En cas d&#39;erreur de rÃ©cupÃ©ration des TODO par l&#39;API.</li></ul><p>Pour Ã§a vous pouvez utiliser <a href="https://sweetalert.js.org/guides/#cdn" target="_blank" rel="noreferrer">la librairie Sweetalert</a>.</p><h3 id="ajouter-des-confirmations" tabindex="-1">Ajouter des confirmations <a class="header-anchor" href="#ajouter-des-confirmations" aria-label="Permalink to &quot;Ajouter des confirmations&quot;">â€‹</a></h3><p>Ajout des confirmations avant les actions Â« marquer comme terminÃ© Â» et lâ€™action de suppression.</p><h3 id="utiliser-l-api-de-partage" tabindex="-1">Utiliser l&#39;API de partage <a class="header-anchor" href="#utiliser-l-api-de-partage" aria-label="Permalink to &quot;Utiliser l&#39;API de partage&quot;">â€‹</a></h3><p>Depuis quelques mois Chrom(e|ium) propose une nouvelle API nommÃ©e Â« Web Share Api Â», Cette API permet de dÃ©clencher Â« le Partage Â» dâ€™une information en utilisant les possibilitÃ©s natives du TÃ©lÃ©phone. Comme cette API nâ€™est disponible que sur un tÃ©lÃ©phone et uniquement en HTTPS vous devez tester si celle-ci est prÃ©sente avec</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (navigator.share) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><a href="https://caniuse.com/#search=Web%20Share%20Api" target="_blank" rel="noreferrer">Voir le support de Share</a></p><p>Mais comme nous sommes avec VueJS nous allons gÃ©rer Ã§a avec le MVVM (ModÃ¨le Vue, Vue-ModÃ¨le), Ã§a va nous permettre dâ€™injecter une variable Ã  la crÃ©ation de lâ€™objet <code>app</code> pour connaitre si le partage est disponible. Exemple :</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  el: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.container&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  created</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DÃ©marrage TODO-APP&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  data: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      taches: [],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      isShare: navigator.share </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  [â€¦]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Une fois fait, vous avez une variable <code>isShare</code> qui sera <code>True</code> Ou <code>False</code> en fonction du support du navigateur. Maintenant que le boolÃ©en est disponible, vous pouvez ajouter un Ã©lÃ©ment cliquable pour dÃ©clencher lâ€™action (prendre exemple sur la suppression ou le marquer comme terminÃ©). Exemple de code pour dÃ©clencher le partage :</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[â€¦]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">methods</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    share</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(texte){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      navigator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">share</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;VueJS-Todo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        text: texte,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // TODO</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // TODO</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[â€¦]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>Câ€™est Ã  vous !</p><h3 id="ajouter-des-regles-de-reecriture" tabindex="-1">Ajouter des rÃ¨gles de rÃ©Ã©criture <a class="header-anchor" href="#ajouter-des-regles-de-reecriture" aria-label="Permalink to &quot;Ajouter des rÃ¨gles de rÃ©Ã©criture&quot;">â€‹</a></h3><p>Ajouter des rÃ¨gles de rÃ©Ã©criture via un fichier .htaccess</p><p>Le fichier <code>.htaccess</code> exemple :</p><div class="language-txt vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>RewriteEngine On</span></span>
<span class="line"><span>RewriteRule ^api/ajouter$ api/ajouter.php [L,QSA]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Une fois les rÃ¨gles de rÃ©Ã©criture faites, modifier les diffÃ©rents chemins (appel dâ€™API) dans votre fichier JavaScript.</p>`,181),h=[r];function k(d,o,E,c,u,g){return a(),i("div",null,h)}const y=s(p,[["render",k]]);export{b as __pageData,y as default};
