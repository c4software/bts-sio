import{_ as l}from"./chunks/structure_dossiers.DE3FJtJD.js";import{_ as t}from"./chunks/namespace_resolver.-7TJPEmA.js";import{_ as p,c as r,o,U as i,k as s,a as e}from"./chunks/framework.aGaNZw_P.js";const h="/assets/liste.CDYShM8h.png",d="/assets/mvc.BhBF6RYO.png",k="/assets/mcd_exemple.CLkynAkE.jpeg",u="/assets/parties.sGXS6qIN.png",c="/assets/routeur.Cq8fFPvA.png",m="/assets/sample.CwH70FFN.png",n="/assets/todoControler.ciAxmu4j.png",a="/assets/todos.CGVI9iKi.png",g="/assets/umlTodoModel.CQrSoiAH.jpg",b="/assets/todoPreview.e46o6DtV.png",E="/assets/todo_resultat_liste.CIVrgr5m.png",F="/assets/todo_resultat_ajouter.R2Su5GWw.png",y="/assets/todo_resultat_terminer.BSSdWZyF.png",$=JSON.parse('{"title":"TP TODO List","description":"","frontmatter":{},"headers":[],"relativePath":"tp/php/mvc/tp1.1.md","filePath":"tp/php/mvc/tp1.1.md","lastUpdated":1695301708000}'),v={name:"tp/php/mvc/tp1.1.md"},C=i('<h1 id="tp-todo-list" tabindex="-1">TP TODO List <a class="header-anchor" href="#tp-todo-list" aria-label="Permalink to &quot;TP TODO List&quot;">â€‹</a></h1><p>Dans ce TP, nous allons prendre en main <a href="./tp1.html">la structure de code prÃ©sente ici</a>.</p><details class="details custom-block"><summary>Sommaire</summary><nav class="table-of-contents"><ul><li><a href="#introduction">Introduction</a></li><li><a href="#le-projet">Le projet</a></li><li><a href="#la-structure">La structure</a><ul><li><a href="#le-modele">Le ModÃ¨le</a></li><li><a href="#la-vue">La Vue</a></li><li><a href="#le-controleur">Le ContrÃ´leur</a></li><li><a href="#le-routeur">Le Routeur</a></li><li><a href="#vous-souhaitez-plus-de-detail">Vous souhaitez plus de dÃ©tail ?</a></li></ul></li><li><a href="#recuperer-le-code-source-d-exemple">RÃ©cupÃ©rer le code source d&#39;exemple</a><ul><li><a href="#globalement">Globalement</a></li><li><a href="#la-configuration">La configuration</a></li><li><a href="#telecharger-le-code-source">TÃ©lÃ©charger le code source</a></li></ul></li><li><a href="#faire-fonctionner-le-code">Faire fonctionner le code</a></li><li><a href="#un-serveur-integre">Un serveur intÃ©grÃ© ?</a></li><li><a href="#modifier-la-page-Â«-home-Â»">Modifier la page Â« Home Â»</a></li><li><a href="#creer-la-page-Â«-test-Â»">CrÃ©er la page Â« Test Â»</a><ul><li><a href="#creer-la-methode">CrÃ©er la mÃ©thode</a></li><li><a href="#creer-la-vue-page">CrÃ©er la vue / page</a></li><li><a href="#utiliser-des-variables-dans-votre-vue">Utiliser des variables dans votre vue</a></li><li><a href="#ajouter-une-seconde-variable">Ajouter une seconde variable</a></li><li><a href="#creer-la-route">CrÃ©er la route</a></li></ul></li><li><a href="#place-au-projet-Â«-la-todo-list-Â»">Place au projet Â« La TODO list Â»</a><ul><li><a href="#bootstrap">Bootstrap</a></li><li><a href="#modelisation-de-la-base-de-donnees">ModÃ©lisation de la base de donnÃ©es</a></li><li><a href="#creer-le-modele">CrÃ©er le modÃ¨le</a></li><li><a href="#modifier-le-constructeur">Modifier le constructeur</a></li><li><a href="#creer-la-methode-Â«-marquercommetermine-Â»">CrÃ©er la mÃ©thode Â« marquerCommeTermine() Â»</a></li><li><a href="#initialiser-la-base-de-donnees">Initialiser la base de donnÃ©es</a></li><li><a href="#creer-le-controleur">CrÃ©er le contrÃ´leur</a></li><li><a href="#definir-les-routes-dans-le-routeur">DÃ©finir les routes dans le routeur</a></li><li><a href="#ajouter-le-constructeur-construct">Ajouter le constructeur __construct()</a></li><li><a href="#la-methode-liste">La mÃ©thode liste()</a></li><li><a href="#le-template-de-la-page-liste">Le template de la page liste</a></li><li><a href="#la-methode-ajouter-texte">La mÃ©thode ajouter($texte = &#39;&#39;)</a></li><li><a href="#la-methode-terminer-id">La mÃ©thode terminer($id = &#39;&#39;)</a></li><li><a href="#la-methode-supprimer-id">La mÃ©thode supprimer($id = &#39;&#39;)</a></li></ul></li><li><a href="#ajouter-un-lien-dans-la-page-d-accueil">Ajouter un lien dans la page d&#39;accueil</a></li><li><a href="#masquer-les-todo-terminees">Masquer les TODO terminÃ©es</a></li><li><a href="#ajouter-une-page-d-authentification">Ajouter une page d&#39;authentification</a></li><li><a href="#evolution-1-qui-a-cree-la-todo">Ã‰volution 1 : Qui a crÃ©Ã© la TODO ?</a></li><li><a href="#evolution-2-envoi-d-email">Ã‰volution 2 : Envoi d&#39;email</a></li><li><a href="#bonus-mot-de-passe-oublie">Bonus, mot de passe oubliÃ©</a></li><li><a href="#bonus-une-page-d-accueil-personnalisee">Bonus, une page d&#39;accueil personnalisÃ©e</a></li></ul></nav></details><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">â€‹</a></h2><p>Comme prÃ©cisÃ© dans le cours et dans nos Ã©changes, la structure Â« MVC Â» est proposÃ©e ici comme phase transitoire entre votre code PHP de premiÃ¨re annÃ©e et du Laravel que l&#39;on peut retrouver en entreprise. En effet, mÃªme si la structure MVC a Ã©tÃ© crÃ©Ã©e avec la prise en compte de contrainte de sÃ©curitÃ©, elle nâ€™est en aucun cas dimensionnÃ©e pour rÃ©aliser un site client avec plusieurs centaines d&#39;utilisateurs.</p><ul><li><a href="/cheatsheets/poo/">Aide mÃ©moire Programmation OrientÃ©e Objet</a></li><li><a href="/cheatsheets/poo-uml/">La modÃ©lisation objet</a></li><li><a href="/cheatsheets/mini-mvc-sample/">Aide mÃ©moire Mini MVC Sample</a></li></ul><div class="tip custom-block"><p class="custom-block-title">C&#39;est important</p><p>Le point d&#39;introduction est important. Savoir justifier d&#39;une solution est tout aussi important que la solution en elle-mÃªme. Si vous dÃ©cidez d&#39;utiliser ma structure dans d&#39;autres dÃ©veloppements vous devez le faire avec conviction et pas juste Â« parceque Â».</p><p>Des changements mineurs ont Ã©tÃ© ajoutÃ©s Ã  la structure en 2022/2023 :</p><ul><li>Le systÃ¨me de Â« template Â» n&#39;affiche plus par dÃ©faut la page. Il ne faut pas oublier le return.</li><li>L&#39;accÃ¨s Ã  base de donnÃ©es est maintenant Â« Lazy Â», la connexion Ã  celle-ci ne sera faite que lors de la <strong>premiÃ¨re requÃªte</strong>.</li><li>Le connecteur de base de donnÃ©es est maintenant partagÃ© avec l&#39;ensemble des modÃ¨les.</li></ul><p>Ceci Ã©tant dit, nous pouvons continuer ğŸš€ !</p></div><h2 id="le-projet" tabindex="-1">Le projet <a class="header-anchor" href="#le-projet" aria-label="Permalink to &quot;Le projet&quot;">â€‹</a></h2><p>Si vous avez dÃ©jÃ  testÃ© de nouvelles technologies, il existe un type de projet qui permet Â« de prendre en main Â» facilement du code inconnu. Ce type de projet est une TODO List.</p><p>Je vous propose donc de rÃ©aliser une TODO List en utilisant la structure MVC.</p><p><em>VoilÃ  ce que nous allons rÃ©aliser :</em></p><p><img src="'+h+'" alt="Le projet" loading="lazy"></p><h2 id="la-structure" tabindex="-1">La structure <a class="header-anchor" href="#la-structure" aria-label="Permalink to &quot;La structure&quot;">â€‹</a></h2><p>La structure de code MVC reprend les bases des frameworks modernes types Laravel. C&#39;est-Ã -dire un dÃ©coupage Â« MVC Â», le dÃ©coupage MVC signifie :</p><ul><li><strong>M</strong>odÃ¨le</li><li><strong>V</strong>ue</li><li><strong>C</strong>ontrÃ´leur</li></ul><p><img src="'+d+'" alt="MVC" loading="lazy"></p><h3 id="le-modele" tabindex="-1">Le ModÃ¨le <a class="header-anchor" href="#le-modele" aria-label="Permalink to &quot;Le ModÃ¨le&quot;">â€‹</a></h3><p>Le modÃ¨le reprÃ©sente la couche de votre application qui va manipuler les donnÃ©es. ConcrÃ¨tement c&#39;est celle-ci qui va parler en SQL avec votre moteur de base de donnÃ©es.</p><p>Vous trouverez dans celle-ci <strong>autant de mÃ©thodes que nÃ©cessaire</strong>, vous pouvez <em>(et Ã  mon avis vous devez)</em> spÃ©cialiser vos modÃ¨les aux diffÃ©rentes tables prÃ©sentes dans votre projet.</p><div class="tip custom-block"><p class="custom-block-title">Par exemple</p><p>Si nous avons la base de donnÃ©es suivante :</p><p><img src="'+k+'" alt="Exemple MCD" loading="lazy"></p><p>Nous devrions crÃ©er au minimum <em>3 modÃ¨les</em> :</p><ul><li>Client</li><li>BonDeCommande</li><li>Produit</li></ul><p>Avec Ã  chaque fois des mÃ©thodes spÃ©cifiques exemple, nous pourrions avoir</p><table><thead><tr><th style="text-align:left;">ModÃ¨le</th><th style="text-align:left;">MÃ©thodes</th></tr></thead><tbody><tr><td style="text-align:left;">Client</td><td style="text-align:left;"><code>CreerClient()</code>, <code>ModifierClient()</code>, <code>SupprimerClient()</code></td></tr><tr><td style="text-align:left;">BonDeCommande</td><td style="text-align:left;"><code>CreerBdc()</code>, <code>ModifierBdc()</code>, <code>SupprimerBdc()</code></td></tr><tr><td style="text-align:left;">Produit</td><td style="text-align:left;"><code>CreerProduit()</code>, <code>ModifierProduit()</code>, <code>SupprimerProduit()</code></td></tr></tbody></table></div><div class="danger custom-block"><p class="custom-block-title">STOP ! Ce qu&#39;il faut retenir</p><p>Ce qu&#39;il faut retenir c&#39;est :</p><ul><li>Autant d&#39;objets que de tables.</li><li>Des mÃ©thodes spÃ©cifiques aux actions Ã  faire dans la table.</li></ul></div>',21),f=s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},"CRUD"),s("p",null,"Ce genre d'objet s'appelle un CRUD (Create, Update, Delete). C'est une structure que nous retrouverons trÃ¨s souvent. Vous allez voir que c'est tellement courant qu'en gÃ©nÃ©ral ils sont Ã©crits automatiquement par le Framework."),s("iframe",{src:"https://giphy.com/embed/11ISwbgCxEzMyY",width:"480",height:"360",frameBorder:"0",class:"giphy-embed",allowFullScreen:""})],-1),A=i('<h3 id="la-vue" tabindex="-1">La Vue <a class="header-anchor" href="#la-vue" aria-label="Permalink to &quot;La Vue&quot;">â€‹</a></h3><p>La vue, vous connaissez! Ici, rien de nouveau. Le <code>V</code> de MVC c&#39;est juste la reprÃ©sentation graphique de ce que vous souhaitez afficher (en HTML + CSS + JavaScript).</p><p>Cependant par rapport Ã  vos premiers dÃ©veloppements nous allons dÃ©couper au maximum le code HTML en diffÃ©rents fichiers ; Objectif Ã©viter le code dupliquÃ© en utilisant une organisation qui ressemblera Ã  :</p><p><img src="'+u+'" alt="DÃ©coupage" loading="lazy"></p><div class="tip custom-block"><p class="custom-block-title">L&#39;objectif ?</p><ul><li>Ã‰viter le code dupliquÃ©.</li><li>Faciliter la modification.</li><li>Se concentrer sur la partie du code Â« MÃ©tier Â» de la page en cours.</li></ul></div><h3 id="le-controleur" tabindex="-1">Le ContrÃ´leur <a class="header-anchor" href="#le-controleur" aria-label="Permalink to &quot;Le ContrÃ´leur&quot;">â€‹</a></h3><p>Et le contrÃ´leur dans tout Ã§a ? Et bien le contrÃ´leur va assembler :</p><ul><li>Votre modÃ¨le (l&#39;accÃ¨s aux donnÃ©es).</li><li>Votre Vue (l&#39;affichage).</li></ul><p>Le code va prendre les demandes des clients Â« appel HTTP Â» rÃ©aliser le traitement en base de donnÃ©es et afficher Â« la vue Â» rÃ©sultat au client.</p><p>Comme pour le modÃ¨le, le contrÃ´leur est un objet qui doit possÃ©der idÃ©alement autant de mÃ©thode que de page (et peut-Ãªtre plus).</p><h3 id="le-routeur" tabindex="-1">Le Routeur <a class="header-anchor" href="#le-routeur" aria-label="Permalink to &quot;Le Routeur&quot;">â€‹</a></h3><p>Nous l&#39;avons vu en cours, en plus du MVC classique, nous allons ajouter une derniÃ¨re brique Â« essentiel Â» au bon fonctionnement et Ã  la maintenance de votre site Internet. Cette brique est nommÃ©e un <strong>Routeur</strong>.</p><p>Le routeur va contenir la dÃ©claration des Â« liens Â» de votre site Internet afin de les aiguiller vers la bonne fonctionnalitÃ© dans votre contrÃ´leur.</p><p>Nous pouvons schÃ©matiser le fonctionnement :</p><p><img src="'+c+'" alt="IntÃ©gration du routeur" loading="lazy"></p><div class="tip custom-block"><p class="custom-block-title">Vous Ãªtes ici ?</p><p>Appeler-moi nous allons discuter un peu de cette architecture, qui est la base de presque l&#39;ensemble des frameworks modernes (Laravel, VueJS, React â€¦)</p></div><h3 id="vous-souhaitez-plus-de-detail" tabindex="-1">Vous souhaitez plus de dÃ©tail ? <a class="header-anchor" href="#vous-souhaitez-plus-de-detail" aria-label="Permalink to &quot;Vous souhaitez plus de dÃ©tail ?&quot;">â€‹</a></h3><p>L&#39;idÃ©e ici Ã©tait de rappeler les bases, si vous souhaitez plus de dÃ©tail sur l&#39;architecture MVC que je vous propose <a href="./tp1.html">rendez-vous ici</a></p><h2 id="recuperer-le-code-source-d-exemple" tabindex="-1">RÃ©cupÃ©rer le code source d&#39;exemple <a class="header-anchor" href="#recuperer-le-code-source-d-exemple" aria-label="Permalink to &quot;RÃ©cupÃ©rer le code source d&#39;exemple&quot;">â€‹</a></h2><p>Assez de blabla, un peu comme pour un projet Laravel, nous n&#39;allons pas partir de 0 ! Vous allez partir d&#39;un code initial qui vous servira de base de travail.</p><p>Le code en question est Â« vide Â», il s&#39;agit uniquement d&#39;une structure que <strong>vous devez</strong> respecter. Un peu comme en entreprise vous vous intÃ©grez dans une Ã©quipe, je vous propose ici de respecter quelques rÃ¨gles qui sont des standards du dÃ©veloppement.</p><p>Comme indiquÃ© en introduction, la structuration d&#39;un dÃ©veloppement est aussi importante que le dÃ©veloppement en lui-mÃªme. C&#39;est pour Ã§a qu&#39;avant mÃªme de dÃ©velopper il est important de prendre en main la structure des dossiers et fichiers proposÃ©s dans le code prÃ©sentÃ© en exemple.</p><p>La structure de base en termes de dossier ressemble Ã  :</p><p><img src="'+l+'" alt="Structure des dossiers" loading="lazy"></p><div class="tip custom-block"><p class="custom-block-title">CompliquÃ© ?</p><p>Pas d&#39;inquiÃ©tude, pas de stress ! nous allons voir ensemble comment prendre en main le code.</p></div><h3 id="globalement" tabindex="-1">Globalement <a class="header-anchor" href="#globalement" aria-label="Permalink to &quot;Globalement&quot;">â€‹</a></h3><p>Le code prÃ©sent utilise diffÃ©rents aspects du dÃ©veloppement objet :</p><ul><li>Des objets permettant d&#39;encapsuler / organiser la logique autour de reprÃ©sentation.</li><li>De l&#39;hÃ©ritage afin d&#39;organiser le code hiÃ©rarchiquement.</li><li>Des interfaces permettant de dÃ©finir un comportement.</li></ul><p>Les Ã©lÃ©ments de <code>base</code> sont toujours dans un dossier nommÃ© <code>base</code>. Vous retrouverez ce dossier pour les contrÃ´leurs, les routes, les modÃ¨les.</p><h3 id="la-configuration" tabindex="-1">La configuration <a class="header-anchor" href="#la-configuration" aria-label="Permalink to &quot;La configuration&quot;">â€‹</a></h3><p>Avant d&#39;aller plus loin, intÃ©ressons-nous Ã  la configuration. Dans un projet, il est Ã©vident qu&#39;il ne faut pas mettre la configuration n&#39;importe oÃ¹. Vous l&#39;avez vÃ©cu en entreprise, vous avez peut-Ãªtre eu Ã  votre disposition plusieurs serveurs / machines / ordinateurs.</p><p>Votre code va fonctionner de maniÃ¨re identique entre chaque environnement, par contre ce qui va certainement changer c&#39;est l&#39;accÃ¨s Ã  la base de donnÃ©es. Cet accÃ¨s, est dÃ©pendant d&#39;une configuration (Utilisateur, Mot de passe, Serveur â€¦) dans une structure MVC on essai de ne pas mettre cette configuration n&#39;importe oÃ¹ !</p><p>Dans l&#39;organisation que je vous propose, cette configuration est centralisÃ©e dans le fichier <code>configs.php</code> Ã  la racine du code source.</p><div class="tip custom-block"><p class="custom-block-title">La configuration c&#39;est bien !</p><p>C&#39;est peut-Ãªtre un dÃ©tail pour vousâ€¦ Mais pour moi Ã§a veut dire beaucoup ! Actuellement vous avez un serveur, mais demain peut-Ãªtre 20â€¦ Et pour votre projet final, vous aurez Ã  dÃ©ployer rapidement votre application sur un autre serveur que celui sur lequel vous avez dÃ©veloppÃ©.</p><p>Prenez <strong>dÃ¨s maintenant</strong> l&#39;habitude de mettre votre configuration (IP, Serveur, mot de passe de BDD, etc.) dans le fichier <code>configs.php</code>. Dans l&#39;architecture que je vous propose vous trouverez le minimum nÃ©cessaire au bon fonctionnement d&#39;une application.</p></div><h3 id="telecharger-le-code-source" tabindex="-1">TÃ©lÃ©charger le code source <a class="header-anchor" href="#telecharger-le-code-source" aria-label="Permalink to &quot;TÃ©lÃ©charger le code source&quot;">â€‹</a></h3><p>Le projet de base est disponible <a href="https://github.com/c4software/mini-mvc-sample/archive/refs/tags/2.8.zip" target="_blank" rel="noreferrer">Ã  l&#39;adresse suivante en cliquant ici</a></p><div class="tip custom-block"><p class="custom-block-title">C&#39;est un projet vide</p><p>MÃªme si celui-ci contient Ã  premiÃ¨re vue Â« beaucoup de fichiers Â», le projet vous avez tÃ©lÃ©chargÃ© est bien un projet vide.</p></div><h2 id="faire-fonctionner-le-code" tabindex="-1">Faire fonctionner le code <a class="header-anchor" href="#faire-fonctionner-le-code" aria-label="Permalink to &quot;Faire fonctionner le code&quot;">â€‹</a></h2><p>La premiÃ¨re Ã©tape est de faire fonctionner le code sur votre machine. Je vous laisse mettre en place le code fourni dans votre dossier <code>htdocs</code> ou <code>www</code> en fonction de l&#39;outil que vous utilisez.</p><p><strong>Attention aux fichiers cachÃ©s</strong>, dans l&#39;archive il y a un fichier .htaccess ne l&#39;oubliez pas !</p><div class="tip custom-block"><p class="custom-block-title">.htaccess ?</p><p>Vous avez dÃ©jÃ  entendu parler de ce fichier ? C&#39;est un fichier important, il va nous permettre de dÃ©finir / redÃ©finir le comportement de votre serveur Web pour par exemple activer lâ€™URL REWRITING` (rÃ©Ã©criture d&#39;URL).</p><p>La rÃ©Ã©criture d&#39;url va nous permettre d&#39;avoir de beaux liens exemple <code>index.php?page=toto</code> deviendra seulement <code>toto.html</code>. Vous voulez en savoir plus ? Je suis lÃ  ğŸ‘‹, je vais vous donner un complÃ©ment d&#39;information.</p></div><table><thead><tr><th style="text-align:center;"></th></tr></thead><tbody><tr><td style="text-align:center;"><img src="'+m+`" alt="Exemple qui fonctionne" loading="lazy"></td></tr><tr><td style="text-align:center;">Si tout fonctionne correctement, vous devriez avoir ğŸ‘† (superbe n&#39;est-ce pas)</td></tr></tbody></table><h2 id="un-serveur-integre" tabindex="-1">Un serveur intÃ©grÃ© ? <a class="header-anchor" href="#un-serveur-integre" aria-label="Permalink to &quot;Un serveur intÃ©grÃ© ?&quot;">â€‹</a></h2><p>La structure MVC possÃ¨de un serveur web intÃ©grÃ©, celui-ci vous permettra de tester votre site web en local sans mÃªme avoir besoin de Wamp / Xampp ou autre serveur Apache + PHP.</p><div class="tip custom-block"><p class="custom-block-title">Si votre ordinateur est correctement configurÃ©</p><p>Vous devriez Ãªtre capable de faire :</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mvc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> serve</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Cette commande intÃ©grÃ©e Ã  la structure MVC lancera un serveur automatiquement (sur le port 9000).</p></div><details class="details custom-block"><summary>Comment Ã§a fonctionne?</summary><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Windows (avec XAMPP)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">C:/xampp/php/php</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost:9000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Windows (avec WAMP)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">C:/wamp64/bin/php/php8.2.0/php</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost:9000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Linux / OSX</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost:9000</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></details><h2 id="modifier-la-page-Â«-home-Â»" tabindex="-1">Modifier la page Â« Home Â» <a class="header-anchor" href="#modifier-la-page-Â«-home-Â»" aria-label="Permalink to &quot;Modifier la page Â« Home Â»&quot;">â€‹</a></h2><p>Le meilleur moyen pour prendre en main un projet c&#39;est de le modifier, je vous propose donc une premiÃ¨re modification trÃ¨s simple :</p><ul><li>Modifier la page d&#39;accueil.</li></ul><p>Je vous propose de mettre en place sur la page d&#39;accueil une photo / image (de votre choix) centrÃ©e via de la CSS.</p><div class="tip custom-block"><p class="custom-block-title">C&#39;est Ã  vous</p><p>La bonne dÃ©marche Ã  mon sens est lÃ  suivante :</p><ul><li>Utiliser un IDE pertinent (exemple PHPStorm ou VSCode).</li><li>Repenser Ã  l&#39;introduction et la notion de MVC. Nous allons effectivement toucher le <code>Vue</code> (elle mÃªme appelÃ© par le contrÃ´leur), Ã§a veut dire que vous allez trouver votre fichier dans le dossier <code>views</code>.</li><li>Pour trouver le bon fichier, je vous laisse un peu investiguer, mais sachez que regarder dans le contrÃ´leur semble Ãªtre une bonne idÃ©eâ€¦</li></ul><p>ğŸ‘‹ Je suis lÃ  pour ceux qui sont perdus ğŸ¤•</p></div><h2 id="creer-la-page-Â«-test-Â»" tabindex="-1">CrÃ©er la page Â« Test Â» <a class="header-anchor" href="#creer-la-page-Â«-test-Â»" aria-label="Permalink to &quot;CrÃ©er la page Â« Test Â»&quot;">â€‹</a></h2><p>Maintenant que vous avez rÃ©alisÃ© votre modification, je vous propose de regarder Â« Comment ajouter une nouvelle page dans cette superbe architecture (que je trouve dÃ©jÃ  gÃ©niale) Â».</p><p>J&#39;imagine que pour l&#39;instant vous avez peur :</p><ul><li>Mais comment faire pour ajouter une page?</li><li>J&#39;ai bien du HTML dans <code>views</code> mais comment je l&#39;appelle?</li></ul><p>Et bien la rÃ©ponse Ã  vos questions est</p><ul><li>Une <strong>nouvelle</strong> mÃ©thode dans le bon contrÃ´leur.</li><li>Un fichier <code>test.php</code> dans <code>views</code>.</li><li>Une correspondance entre Â« Votre mÃ©thode Â» et une route dans le <code>routes/Web.php</code>.</li></ul><div class="tip custom-block"><p class="custom-block-title">Nous l&#39;avons vu ensemble</p><p>Le routeur est un Â« composant Â» trÃ¨s important du web moderne. Il va nous permettre de piloter les ressources accessibles Ã  notre client en les dÃ©clarant dans un fichier.</p><ul><li>Ã€ votre avis, pourquoi est-ce important de travailler avec une <code>WHITELIST</code> plutÃ´t qu&#39;une <code>BLACKLIST</code> dans ce genre de situation ?</li></ul></div><p>Vu que c&#39;est la premiÃ¨re fois, nous allons le faire ensembleâ€¦ N&#39;hÃ©sitez pas Ã  poser vos questions !</p><p>VoilÃ  en vidÃ©os ce que vous allez rÃ©aliser :</p>`,60),D=s("iframe",{width:"560",height:"315",src:"https://www.youtube-nocookie.com/embed/78_oUJrqd9c",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,-1),q=i(`<h3 id="creer-la-methode" tabindex="-1">CrÃ©er la mÃ©thode <a class="header-anchor" href="#creer-la-methode" aria-label="Permalink to &quot;CrÃ©er la mÃ©thode&quot;">â€‹</a></h3><p>Nous allons dans un premier temps crÃ©er une mÃ©thode dans le contrÃ´leur <code>SampleWebController.php</code>, pour le contenu pas grand-chose pour l&#39;instant. Vous pouvez vous inspirer du contenu de la mÃ©thode <code>home()</code>.</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> about</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;views/global/test.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Pour l&#39;instant aucun changement, si vous utilisez PHPStorm celui-ci va vous proposer de crÃ©er le fichier <code>test.php</code> directement en cliquant sur Â« la petite lampe jaune Â».</p><h3 id="creer-la-vue-page" tabindex="-1">CrÃ©er la vue / page <a class="header-anchor" href="#creer-la-vue-page" aria-label="Permalink to &quot;CrÃ©er la vue / page&quot;">â€‹</a></h3><p>Si ce n&#39;est pas dÃ©jÃ  fait, crÃ©Ã© le fichier <code>views/global/test.php</code>. Pour le contenu, je vous laisse libre. Je vous rappelle juste que nous sommes entrain de crÃ©er une page Â« Ã€ propos Â».</p><div class="tip custom-block"><p class="custom-block-title">Rappel</p><p>ici nous n&#39;Ã©crivons que le contenu, l&#39;entÃªte et le pied de page sont Â« automatiquement Â» ajoutÃ©s grÃ¢ce au code prÃ©sent dans la mÃ©thode home de votre contrÃ´leur.</p></div><h3 id="utiliser-des-variables-dans-votre-vue" tabindex="-1">Utiliser des variables dans votre vue <a class="header-anchor" href="#utiliser-des-variables-dans-votre-vue" aria-label="Permalink to &quot;Utiliser des variables dans votre vue&quot;">â€‹</a></h3><p>Nous avons ajoutÃ© une page, cependant, cette page est relativement Â« statique Â»â€¦ Pour aller un peu plus loin, je vous propose de voir comment envoyer des paramÃ¨tres dans votre <strong>vue</strong>. Contrairement Ã  du PHP comme en premiÃ¨re annÃ©e, vous n&#39;allez pas avoir dans votre vue l&#39;ensemble des variables. Vous n&#39;aurez que celles prÃ©sentes dans l&#39;<code>array()</code>.</p><p>Si nous reprenons l&#39;exemple prÃ©cÃ©dent :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;views/global/test.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Combien de variables passons-nous ? Aucune, pour la suite, je vous propose d&#39;ajouter une premiÃ¨re variable :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;views/global/test.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;titre&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Ã€ Propos&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Puis modifier votre vue pour y ajouter l&#39;usage de votre variable :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">h1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;&lt;?=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $titre </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?&gt;&lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">h1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>C&#39;est Ã  vous, je vous laisse tester !</p><h3 id="ajouter-une-seconde-variable" tabindex="-1">Ajouter une seconde variable <a class="header-anchor" href="#ajouter-une-seconde-variable" aria-label="Permalink to &quot;Ajouter une seconde variable&quot;">â€‹</a></h3><p>Pour vÃ©rifier que vous avez bien compris la procÃ©dure. Je vous laisse ajouter une seconde variable. Celle-ci doit-Ãªtre la date du jour ainsi que l&#39;heure.</p><p><strong>Bien Ã©videmment cette valeur doit Ãªtre dynamique et changÃ©e Ã  chaque chargement de page</strong>.</p><p>Besoin d&#39;aide ? VoilÃ  un indice :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;views/global/about.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;titre&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Votre titre !&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;date&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> â€¦</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>C&#39;est Ã  vous :</p><ul><li>Modifier votre contrÃ´leur pour ajouter la bonne valeur.</li><li>Modifier votre vue pour afficher la valeur. (En bas de la page Ã  propos).</li><li>Valider le bon fonctionnement.</li></ul><h3 id="creer-la-route" tabindex="-1">CrÃ©er la route <a class="header-anchor" href="#creer-la-route" aria-label="Permalink to &quot;CrÃ©er la route&quot;">â€‹</a></h3><p>VoilÃ  nous avons maintenant l&#39;ensemble du code, mais celui-ci n&#39;est pas encore accessible. Pour le rendre accessible, vous devez le dÃ©clarer dans le routeur.</p><p>Ici nous sommes entrain de faire une page <code>Web</code>, vous devez donc ajouter dans le routeur <code>Web.php</code> l&#39;accÃ¨s Ã  votre page via l&#39;ajout de la ligne suivante :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/test&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [$main, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;test&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>Ã‰videmment</strong> c&#39;est Ã  ajouter aprÃ¨s la route existante.</li><li>Le premier paramÃ¨tre correspond au Â« Chemin / lien d&#39;accÃ¨s Â», le second Ã©tant la mÃ©thode Ã  appeler dans le bon contrÃ´leur.</li></ul><p>ğŸ‘‹ Je vous laisse tester l&#39;accÃ¨s Ã  votre page</p><h2 id="place-au-projet-Â«-la-todo-list-Â»" tabindex="-1">Place au projet Â« La TODO list Â» <a class="header-anchor" href="#place-au-projet-Â«-la-todo-list-Â»" aria-label="Permalink to &quot;Place au projet Â« La TODO list Â»&quot;">â€‹</a></h2><p>Avant de commencer, je vous propose de regarder ensemble ce que nous allons rÃ©aliser.</p><p>Maintenant que nous avons pris en main le code existant, je vous propose de rÃ©aliser une plus grosse modification, l&#39;ajout d&#39;une nouvelle fonctionnalitÃ© Â« La TodoList Â», pour rÃ©aliser l&#39;ensemble du code, je vais bien Ã©videmment vous guider.</p><p>Nous allons donc crÃ©er une TODO List. Une TODO List c&#39;est toujours le mÃªme genre d&#39;action :</p><ul><li>Une Liste.</li><li>Un ajout dans la liste.</li><li>Un marquÃ© comme terminer Â« une todo Â».</li><li>Un supprimÃ© qui supprime uniquement les taches Â« avec comme statut, termine = 1 Â».</li></ul><p>Nous allons donc avoir 4 fonctionnalitÃ©s dans notre application. Chaque fonctionnalitÃ© je le rappelle sera une mÃ©thode de notre contrÃ´leur :</p><table><thead><tr><th style="text-align:center;">Route</th><th style="text-align:right;">MÃ©thode dans le contrÃ´leur</th></tr></thead><tbody><tr><td style="text-align:center;"><code>/list</code></td><td style="text-align:right;"><code>liste()</code></td></tr><tr><td style="text-align:center;"><code>/ajouter</code></td><td style="text-align:right;"><code>ajouter($texte)</code></td></tr><tr><td style="text-align:center;"><code>/terminer</code></td><td style="text-align:right;"><code>terminer($id)</code></td></tr><tr><td style="text-align:center;"><code>/supprimer</code></td><td style="text-align:right;"><code>supprimer($id)</code></td></tr></tbody></table><p>L&#39;Ã©tape de dÃ©finition des diffÃ©rentes actions est <strong>primordiale</strong>, Ã§a va nous permettre de crÃ©er notre objet de maniÃ¨re efficace, l&#39;autre bonne faÃ§on de reprÃ©senter notre objet est via une modÃ©lisation UML.</p><p><img src="`+n+'" alt="ModÃ©lisation UML" loading="lazy"></p><div class="tip custom-block"><p class="custom-block-title">Vous vous intÃ©grez dans un framework</p><p>Parlons un peu de la modÃ©lisation UML que je vous propose, comme vous pouvez le constater nous avons ici la dÃ©finition de la class avec les diffÃ©rentes mÃ©thodes dÃ©finies dans le tableau.</p><p>Nous avons Ã©galement une classe en plus ; cette classe est Â« la base Â» d&#39;un contrÃ´leur, elle dÃ©finit les mÃ©thodes de bases communes Ã  l&#39;ensemble des contrÃ´leurs du framework.</p><p>ğŸ—£ Cette classe ne sera <strong>jamais</strong> instanciÃ©e directement, la flÃ¨che Â« extends Â» dÃ©fini la notion d&#39;hÃ©ritage.</p></div><h3 id="bootstrap" tabindex="-1">Bootstrap <a class="header-anchor" href="#bootstrap" aria-label="Permalink to &quot;Bootstrap&quot;">â€‹</a></h3><p>Nous allons utiliser Bootstrap pour coder l&#39;interface, n&#39;hÃ©sitez donc pas Ã  consulter la documentation :</p><ul><li><a href="https://getbootstrap.com/docs/5.0/getting-started/introduction/" target="_blank" rel="noreferrer">Bootstrap</a></li><li><a href="https://icons.getbootstrap.com/" target="_blank" rel="noreferrer">Bootstrap Icon</a></li></ul><h3 id="modelisation-de-la-base-de-donnees" tabindex="-1">ModÃ©lisation de la base de donnÃ©es <a class="header-anchor" href="#modelisation-de-la-base-de-donnees" aria-label="Permalink to &quot;ModÃ©lisation de la base de donnÃ©es&quot;">â€‹</a></h3><p>Avant de continuer, je vous propose de dÃ©finir le format de la base de donnÃ©es. En effet, notre modÃ¨le reposera sur celle-ci il faut donc rÃ©flÃ©chir Ã  celle-ci. L&#39;idÃ©e ici est de faire du code, j&#39;ai donc rÃ©flÃ©chi (un peu) Ã  votre place. Le minimum pour que nous puissions rÃ©aliser notre Â« TodoList Â» est la crÃ©ation de la table suivante :</p><p><img src="'+a+`" alt="ModÃ©lisation table TODO" loading="lazy"></p><p>Nous allons crÃ©er cette table plus tard, mais pour l&#39;instant, nous avons besoin de la modÃ©lisation pour crÃ©er notre modÃ¨le.</p><h3 id="creer-le-modele" tabindex="-1">CrÃ©er le modÃ¨le <a class="header-anchor" href="#creer-le-modele" aria-label="Permalink to &quot;CrÃ©er le modÃ¨le&quot;">â€‹</a></h3><p>Le modÃ¨le va Ãªtre le moyen d&#39;accÃ©der Ã  nos donnÃ©es, c&#39;est ici que nous allons Ã©crire nos requÃªtes SQL (<strong>et uniquement ici</strong>). Utiliser un framework signifie en gÃ©nÃ©ral gagner du temps ! Pour l&#39;instant, j&#39;imagine que vous n&#39;en avez pas l&#39;impression, mais je vous assure quand vous maitrisez un framework et/ou une architecture vous gagnerez un temps fou. Ce gain de temps vient de deux Ã©lÃ©ments :</p><ul><li>L&#39;architecture des dossiers et du code propre et bien organisÃ©.</li><li>Des outils pour crÃ©er les diffÃ©rents Ã©lÃ©ments.</li><li>Du code partagÃ©, utilisÃ© sans copier / collÃ©.</li></ul><p>Le framework que je vous propose entre directement dans cette catÃ©gorie Â« Gagner du temps Â». Pour crÃ©er notre modÃ¨le au lieu de copier / coller du code vous avez de base (intÃ©grer dans le code) un outil en ligne de commande qui s&#39;occupe de tout (si si). Pour crÃ©er votre modÃ¨le pour accÃ©der au TodoList il vous suffit de :</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Hors Windows</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mvc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> model:create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TodoModel</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Sous Windows (avec XAMPP)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">C:/xampp/php/php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mvc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> model:create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TodoModel</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Sous Windows (avec WAMP)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">C:/wamp64/bin/php/php8.0.14/php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mvc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> model:create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TodoModel</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>Et c&#39;est tout !</strong> votre modÃ¨le pour accÃ©der aux donnÃ©es est prÃªt ğŸ¤ (il est crÃ©Ã© automatiquement dans le dossier <code>models</code>). Nous avons maintenant une classe qui nous permettra d&#39;accÃ©der aux donnÃ©es contenues dans la base de donnÃ©es. L&#39;accÃ¨s aux donnÃ©es se fera :</p><ul><li>Via les mÃ©thodes Â« de base Â» (comme vu en cours via l&#39;hÃ©ritage prÃ©sent dans la classe).</li><li>Via <strong><em>vos mÃ©thodes</em></strong> directement Ã©crite par vous.</li></ul><div class="tip custom-block"><p class="custom-block-title">Pas de magie (jamais)</p><p>Je vous invite Ã  regarder comment fonctionne cette partie dans le code. Ce nâ€™est pas bien compliquÃ©. D&#39;ailleurs, regardons ensemble !</p></div><div class="warning custom-block"><p class="custom-block-title">Vous avez du mal Ã  voir ce que nous avons crÃ©Ã© non ?</p><p>Et oui, les commandes magiques c&#39;est bien â€¦ mais voilÃ  ce que nous avons crÃ©Ã© :</p><p><img src="`+g+'" alt="TodoModel" loading="lazy"></p><ul><li>SQL est Â« une classe de base Â», elle est intÃ©grÃ©e dans le framework.</li><li>Votre classe <code>TodoModel</code> hÃ©rite de la classe SQL. (Vous pouvez m&#39;en dire plus ?)</li><li>Votre classe <code>TodoModel</code> a Ã©tÃ© crÃ©Ã©e dans le dossier <code>models</code>. (Je vous laisse aller regarder)</li><li>Pourquoi notre classe ne possÃ¨de-t-elle qu&#39;une seule mÃ©thode ?</li></ul></div><h3 id="modifier-le-constructeur" tabindex="-1">Modifier le constructeur <a class="header-anchor" href="#modifier-le-constructeur" aria-label="Permalink to &quot;Modifier le constructeur&quot;">â€‹</a></h3><p>Dans le constructeur de la classe, je vous laisse modifier les paramÃ¨tres lors de la crÃ©ation du parent ; afin de spÃ©cifier le bon tableName et primaryKey.</p><p>Je vous redonne le schÃ©ma de la base de donnÃ©es :</p><p><img src="'+a+`" alt="ModÃ©lisation table TODO" loading="lazy"></p><h3 id="creer-la-methode-Â«-marquercommetermine-Â»" tabindex="-1">CrÃ©er la mÃ©thode Â« marquerCommeTermine() Â» <a class="header-anchor" href="#creer-la-methode-Â«-marquercommetermine-Â»" aria-label="Permalink to &quot;CrÃ©er la mÃ©thode Â« marquerCommeTermine() Â»&quot;">â€‹</a></h3><p>Dans le diagramme UML j&#39;indique la prÃ©sence d&#39;une mÃ©thode <code>marquerCommeTermine()</code>, si vous avez ouvert la classe crÃ©Ã©e vous allez voir que cette mÃ©thode n&#39;est pas prÃ©sente. Nous allons donc devoir la crÃ©erâ€¦</p><ul><li>Pourquoi la mÃ©thode n&#39;est pas prÃ©sente ?</li><li>Pourquoi ne pas utiliser les mÃ©thodes fournies par le parent ?</li></ul><p>Cette mÃ©thode doit marquer comme terminÃ© un enregistrement en base de donnÃ©es, nous allons donc avoir besoin</p><ul><li>D&#39;un <code>id</code> en paramÃ¨tre de la mÃ©thode.</li><li>D&#39;une requÃªte d&#39;update.</li><li>D&#39;un connecteur PDO (pour parler Ã  la base de donnÃ©es)</li></ul><p>Vu que c&#39;est la premiÃ¨re fois je vous donne du code, mais attention Ã  bien comprendre ce que vous copiÃ©/collÃ© :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> marquerCommeTermine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($id){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $stmt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> $this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPdo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">prepare</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UPDATE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> todos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> termine </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $stmt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">execute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([$id]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="danger custom-block"><p class="custom-block-title">OÃ¹ mettre la mÃ©thode ?</p><p>Vous avez 4 possibilitÃ©s :</p><ul><li>Dans la vue (Non).</li><li>Dans le routeur (Non).</li><li>Dans le contrÃ´leur (Non).</li><li>Dans le modÃ¨le (<strong>Oui</strong>).</li></ul></div><details class="details custom-block"><summary>Besoin d&#39;aide ?</summary><p>Votre classe doit maintenant ressembler Ã </p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">php</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> models</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> models\\base\\SQL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TodoModel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SQL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __construct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        parent::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">__construct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;todos&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> marquerCommeTermine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($id){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $stmt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> $this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPdo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">prepare</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UPDATE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> todos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> termine </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $stmt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">execute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([$id]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></details><p>Questions :</p><ul><li>Ã€ votre avis est-ce la seule faÃ§on de faire ?</li><li>Avons-nous toutes les mÃ©thodes nÃ©cessaires pour rÃ©aliser notre application ?</li></ul><h3 id="initialiser-la-base-de-donnees" tabindex="-1">Initialiser la base de donnÃ©es <a class="header-anchor" href="#initialiser-la-base-de-donnees" aria-label="Permalink to &quot;Initialiser la base de donnÃ©es&quot;">â€‹</a></h3><p>Votre projet avance petit Ã  petit, nous avons dÃ©jÃ  crÃ©Ã© :</p><ul><li>La base du projet (structure).</li><li>Le modÃ¨le pour accÃ©der aux donnÃ©es.</li><li>Les mÃ©thodes permettant de modifier les donnÃ©es.</li></ul><p>C&#39;est dÃ©jÃ  pas mal, mais il manque maintenant la base de donnÃ©es en elle-mÃªme. Dans un framework cette partie-lÃ  est Ã©galement automatisable (vous verrez avec Laravel c&#39;est encore plus puissant). Dans un framework appliquÃ© les modifications dans la base de donnÃ©es s&#39;appellent rÃ©aliser une Â« migration Â», avec notre Â« mini framework Â» pour crÃ©er la base de donnÃ©es il suffit de crÃ©er <strong>un fichier</strong> dans le dossier <code>migrations</code> :</p><ul><li>CrÃ©er le fichier <code>init.sql</code> dans le dossier Migration, y mettre le contenu suivant :</li></ul><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Structure de la table \`todos\`</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> \`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">todos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\` (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  \`id\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">11</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  \`texte\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  \`termine\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> tinyint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  \`timestamp\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> timestamp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> current_timestamp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) ENGINE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">InnoDB </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CHARSET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">utf8mb4;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Index pour les tables dÃ©chargÃ©es</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Index pour la table \`todos\`</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ALTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`todos\`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ADD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`id\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- AUTO_INCREMENT pour les tables dÃ©chargÃ©es</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- AUTO_INCREMENT pour la table \`todos\`</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ALTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`todos\`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  MODIFY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`id\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">11</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AUTO_INCREMENT;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COMMIT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><ul><li>Installer la migration (appliquer les modifications sur votre base de donnÃ©es) via la commande :</li></ul><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Hors Windows</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mvc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db:migrate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Sous Windows (avec XAMPP)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">C:/xampp/php/php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mvc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db:migrate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Sous Windows (avec WAMP)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">C:/wamp64/bin/php/php7.4.9/php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mvc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db:migrate</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Si tout va bien vous devriez avoir le rÃ©sultat suivant:</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migration</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Â«</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrations/init.sql</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Â»</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">End</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migration</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Â«</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrations/init.sql</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Â»</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>`,80),B=s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},"Point d'avancement"),s("ul",null,[s("li",null,[e("Ã‡a ne fonctionne pas ? Avez-vous vÃ©rifiÃ© si vous avez configurÃ© votre projet ("),s("code",null,"configs.php"),e(").")]),s("li",null,"VÃ©rifier si la base a bien Ã©tÃ© crÃ©Ã©e dans votre PhpMyAdmin / DataGrip ğŸ‘Œ"),s("li",null,"Mais c'est gÃ©nial !")]),s("iframe",{src:"https://giphy.com/embed/SACoDGYTvVNhZYNb5a",width:"480",height:"360",frameBorder:"0",class:"giphy-embed",allowFullScreen:""})],-1),j=i(`<h3 id="creer-le-controleur" tabindex="-1">CrÃ©er le contrÃ´leur <a class="header-anchor" href="#creer-le-controleur" aria-label="Permalink to &quot;CrÃ©er le contrÃ´leur&quot;">â€‹</a></h3><p>Notre base est prÃªteâ€¦ Et si nous Ã©crivions vraiment le code ? Comme pour crÃ©er le modÃ¨le, le framework vous fait gagner du temps ! Ici aussi pas besoin de copier / coller du code, une simple ligne de commande va vous initialiser un ContrÃ´leur Â« vide Â» :</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Hors Windows</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mvc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> controller:create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TodoWeb</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Sous Windows (avec XAMPP)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">C:/xampp/php/php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mvc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> controller:create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TodoWeb</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Sous Windows (avec WAMP)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">C:/wamp64/bin/php/php7.4.9/php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mvc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> controller:create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TodoWeb</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Cette commande va initialiser un contrÃ´leur de type Web. Celui-ci est pour l&#39;instant vide de mÃ©thode :</p><p><img src="`+n+`" alt="ModÃ©lisation UML" loading="lazy"></p><p>Ce contrÃ´leur est pour l&#39;instant vide, nous allons dans un premier temps devoir lui crÃ©er un constructeur afin de crÃ©er le modÃ¨le permettant l&#39;accÃ¨s Ã  la base de donnÃ©es.</p><h3 id="definir-les-routes-dans-le-routeur" tabindex="-1">DÃ©finir les routes dans le routeur <a class="header-anchor" href="#definir-les-routes-dans-le-routeur" aria-label="Permalink to &quot;DÃ©finir les routes dans le routeur&quot;">â€‹</a></h3><p>Vous vous souvenez lors de la crÃ©ation de notre premiÃ¨re page, nous avions dÃ» ajouter une ligne dans le routeur afin de rendre accessibles les mÃ©thodes. Pour notre nouveau contrÃ´leur, Ã§a sera la mÃªme chose !</p><table><thead><tr><th style="text-align:center;">Routes</th><th style="text-align:center;">ContrÃ´leur</th><th style="text-align:center;">MÃ©thodes</th></tr></thead><tbody><tr><td style="text-align:center;">/todo/liste</td><td style="text-align:center;"><code>TodoWeb</code></td><td style="text-align:center;"><code>liste()</code></td></tr><tr><td style="text-align:center;">/todo/ajouter</td><td style="text-align:center;"><code>TodoWeb</code></td><td style="text-align:center;"><code>ajouter()</code></td></tr><tr><td style="text-align:center;">/todo/terminer</td><td style="text-align:center;"><code>TodoWeb</code></td><td style="text-align:center;"><code>terminer()</code></td></tr><tr><td style="text-align:center;">/todo/supprimer</td><td style="text-align:center;"><code>TodoWeb</code></td><td style="text-align:center;"><code>supprimer()</code></td></tr></tbody></table><p>Dans le fichier <code>routes/Web.php</code>, ajouter les lignes :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  $todo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> TodoWeb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/todo/liste&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [$todo, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;liste&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/todo/ajouter&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [$todo, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ajouter&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/todo/terminer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [$todo, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;terminer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/todo/supprimer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [$todo, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;supprimer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>OÃ¹ les ajouter ?</li><li>Ã€ quoi correspondent-elles ?</li></ul><h3 id="ajouter-le-constructeur-construct" tabindex="-1">Ajouter le constructeur <code>__construct()</code> <a class="header-anchor" href="#ajouter-le-constructeur-construct" aria-label="Permalink to &quot;Ajouter le constructeur \`__construct()\`&quot;">â€‹</a></h3><p>Le contrÃ´leur aura pour but d&#39;aller rÃ©cupÃ©rer les Todo en base <strong>via</strong> le modÃ¨le. Il faut donc donner un accÃ¨s au modÃ¨le depuis la classe. Nous allons donc Ã©crire <strong>le constructeur</strong> de la mÃ©thode. En PHP, le constructeur s&#39;Ã©crit :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $todoModel;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    function</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __construct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(){</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        $this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">todoModel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> TodoModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Je vous laisse rÃ©flÃ©chir sur l&#39;endroit ou mettre le code en question.</p><details class="details custom-block"><summary>Voir une solution</summary><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">php</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> controllers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> controllers\\base\\Web</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> models\\TodoModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TodoWeb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WebController</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $todoModel;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    function</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __construct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(){</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        $this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">todoModel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> TodoModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="danger custom-block"><p class="custom-block-title">un instant âœ‹</p><p>En PHP objet il y a la notion de namespace, Laravel utilise de base les namespace, Ã§a veut dire que nous allons avoir Ã  utiliser le mot clÃ© <code>use</code> pour importer (include). Quand vous voulez utiliser une classe qui n&#39;est pas dans le mÃªme fichier, il faudra dÃ©clarer l&#39;emplacement via un <code>use</code>. Exemple, pour que la classe <code>Demo</code> soit accessible depuis une autre classe, il faudra :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> App\\Models\\Demo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>âš ï¸ Si vous utilisez <strong>PHPStorm,</strong> cet import sera automatique.</li><li>âš ï¸ Si vous utilisez <strong>VSCode,</strong> il faudra passer par une extension <a href="https://marketplace.visualstudio.com/items?itemName=MehediDracula.php-namespace-resolver" target="_blank" rel="noreferrer">disponible ici</a></li></ul><p>Pour <strong>PHPStorm</strong>, alt+entrÃ©e permettra de dÃ©clencher l&#39;ajout dÃ» use.</p><p>Pour <strong>VSCode</strong> je vous laisse regarder l&#39;usage de l&#39;extension :</p><p><img src="`+t+`" alt="Namespace Resolver" loading="lazy"></p></div></details><p>:::</p><h3 id="la-methode-liste" tabindex="-1">La mÃ©thode <code>liste()</code> <a class="header-anchor" href="#la-methode-liste" aria-label="Permalink to &quot;La mÃ©thode \`liste()\`&quot;">â€‹</a></h3><p>La premiÃ¨re mÃ©thode que nous allons crÃ©er est celle de la liste. Elle se nommera <code>liste()</code>, cette mÃ©thode sera automatiquement appelÃ©e via le <code>routeur</code> Ã  <strong>chaque visite d&#39;un utilisateur</strong>. L&#39;objectif de cette mÃ©thode est :</p><ul><li>RÃ©cupÃ©rer l&#39;ensemble des TODO (Array) actuellement en base via la mÃ©thode <code>getAll()</code> du TodoModel modÃ¨le.</li><li>Afficher votre <code>vue</code> via un <code>return Template::render</code>.</li></ul><div class="tip custom-block"><p class="custom-block-title">Toujours la mÃªme forme</p><p>Vous allez rapidement vous apercevoir que la structure de base est toujours la mÃªme. Nous allons toujours faire la mÃªme chose lors de la crÃ©ation d&#39;une mÃ©thode dans un contrÃ´leur Ã  savoir :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> maMethodeQueJaiCopierColler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Pourquoi j&#39;ai copier / coller ceci ? C&#39;est un exemple seulement</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;views/global/home.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>Pssst</strong>, ne copier / coller pas le code prÃ©cÃ©dent !! C&#39;est un simple exemple.</p></div><p>Dans notre cas, la mÃ©thode va ressembler Ã  :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> liste</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $todos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> $this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">todoModel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// RÃ©cupÃ©ration des TODOS prÃ©sents en base.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;views/todos/liste.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;todos&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $todos)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Affichage de votre vue.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Et c&#39;est tout ! La puissance d&#39;un Frawerork c&#39;est aussi Ã§a, Ã©crire finalement pas Ã©normÃ©ment de ligne pour afficher une page. Pourtant cette page :</p><ul><li>Affiche une entÃªte.</li><li>RÃ©cupÃ¨re en base de donnÃ©es les Ã©lÃ©ments.</li><li>Affiche la page.</li><li>Affiche le pied de page.</li></ul><h3 id="le-template-de-la-page-liste" tabindex="-1">Le template de la page liste <a class="header-anchor" href="#le-template-de-la-page-liste" aria-label="Permalink to &quot;Le template de la page liste&quot;">â€‹</a></h3><p>Votre IDE doit actuellement Ãªtre moyen contentâ€¦ Effectivement, nous avons fait un <code>Template::render</code> de <code>&quot;views/todos/liste.php&quot;</code> pourtant ce fichier n&#39;existe pas.</p><p>Vu qu&#39;il s&#39;agit ici d&#39;un projet dÃ©couvert, je vais vous en donner le contenu (si vous le souhaitez, vous pouvez Ã©galement l&#39;Ã©crire) voilÃ  le rendu :</p><p><img src="`+b+`" alt="Interface TODO" loading="lazy"></p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;container p-3&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;card&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;card-body p-2&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            &lt;!--</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Action</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> --&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">form</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> action</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./ajouter&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> method</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;post&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;add&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input-group&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">input</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;texte&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;texte&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;form-control&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> placeholder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Prendre une noteâ€¦&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> aria</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;My new idea&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> aria</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">describedby</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;basic-addon1&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                &lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            &lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">form</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            &lt;!--</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Liste</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> --&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ul</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;list-group pt-3&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                &lt;?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">php</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                foreach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ($todos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $todo) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    ?&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">li</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;list-group-item&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                        &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;d-flex&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                            &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;flex-grow-1 align-self-center&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;&lt;?=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $todo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">texte </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?&gt;&lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                            &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                                &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">a</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> href</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./terminer?id=&lt;?= </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$todo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ?&gt;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;btn btn-outline-success&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                                    &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bi bi-check&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;&lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                                &lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                                &lt;!--</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Action</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Ã </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ajouter</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> pour</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Supprimer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> --&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                            &lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                        &lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    &lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">li</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    &lt;?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">php</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sizeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($todos) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    ?&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">li</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;list-group-item text-center&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">C</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;est vide !&lt;/li&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                    &lt;?php</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                ?&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &lt;/ul&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &lt;/div&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &lt;/div&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&lt;/div&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><p>Je vous laisse mettre le contenu dans votre fichier <code>views/todos/liste.php</code>.</p><div class="tip custom-block"><p class="custom-block-title">Valider le bon fonctionnement</p><p>Si vous accÃ©dez Ã  votre page <code>todo/liste</code> vous devriez avoir le contenu suivant :</p><p><img src="`+E+`" alt="RÃ©sultat Liste vide" loading="lazy"></p></div><h3 id="la-methode-ajouter-texte" tabindex="-1">La mÃ©thode <code>ajouter($texte = &#39;&#39;)</code> <a class="header-anchor" href="#la-methode-ajouter-texte" aria-label="Permalink to &quot;La mÃ©thode \`ajouter($texte = &#39;&#39;)\`&quot;">â€‹</a></h3><p>Cette mÃ©thode sera automatiquement appelÃ© quand vous aller appuyer sur la touche <strong>Entrer</strong> de votre clavier dans le champ de saisie sur la page <code>Liste</code>. L&#39;objectif de cette mÃ©thode est de traiter l&#39;action Â« J&#39;ajoute un nouvel enregistrement dans la base Todo Â».</p><p>Pour le code, je vais vous aider un peu, voilÃ  le code du contrÃ´leur :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ajouter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($texte </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    $this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">todoModel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ajouterTodo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($texte);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    $this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redirect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./liste&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>Ã€ quoi correspond la mÃ©thode <code>redirect(â€¦)</code> ? D&#39;oÃ¹ provient-elle ?</li></ul><p><em>C&#39;est Ã  vous :</em></p><ul><li>Mettre en place le code dans le contrÃ´leur.</li><li>Ã‰crire la mÃ©thode ajouterTodo dans le modÃ¨le <code>TodoModel</code> (n&#39;oubliez pas l&#39;autocomplÃ©tion). <ul><li>Ã‰crire la requÃªte <code>INSERT â€¦</code></li></ul></li><li>Tester le bon fonctionnement</li></ul><p>Dans mon cas voilÃ  le rÃ©sultat :</p><p><img src="`+F+`" alt="RÃ©sultat Liste vide" loading="lazy"></p><h4 id="ajouter-une-validation" tabindex="-1">Ajouter une validation <a class="header-anchor" href="#ajouter-une-validation" aria-label="Permalink to &quot;Ajouter une validation&quot;">â€‹</a></h4><p>Actuellement dans le code que vous avez copiÃ© il est possible d&#39;ajouter des Â« TODO Â» sans texte. Je vous propose donc d&#39;ajouter un contrÃ´le de saisie <strong>dans le PHP</strong>.</p><p>Le contrÃ´le doit empÃªcher l&#39;ajoute d&#39;une TODO si <code>$texte == &#39;&#39;</code>.</p><ul><li>OÃ¹ placez-vous le contrÃ´le ?</li><li>Pourquoi ?</li></ul><h3 id="la-methode-terminer-id" tabindex="-1">La mÃ©thode <code>terminer($id = &#39;&#39;)</code> <a class="header-anchor" href="#la-methode-terminer-id" aria-label="Permalink to &quot;La mÃ©thode \`terminer($id = &#39;&#39;)\`&quot;">â€‹</a></h3><p>Vous l&#39;avez comprisâ€¦ Je vous donne de moins en moins de code ! La mÃ©thode <code>terminer</code> sera trÃ¨s proche de <code>ajouter</code> sauf que celle-ci va prendre en paramÃ¨tre l&#39;id de l&#39;Ã©lÃ©ment Ã  marquer comme terminÃ© :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> terminer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        $this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">todoModel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">marquerCommeTermine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($id);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    $this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redirect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./liste&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>D&#39;oÃ¹ arrive le paramÃ¨tre <code>$id</code> ?</li><li>Pourquoi est-ce automatique ?</li></ul><p><em>Ã€ faire</em> :</p><ul><li>Mettre en place le code, valider le bon fonctionnement avec <strong>PHPMyAdmin</strong></li><li>Modifier la vue pour afficher le bouton vert <strong>seulement si</strong> la tÃ¢che est non terminÃ©e</li><li>Ajouter un bouton supprimÃ© visible <strong>uniquement si</strong> la tÃ¢che est terminÃ©e</li></ul><p><img src="`+y+`" alt="RÃ©sultat Liste vide" loading="lazy"></p><h3 id="la-methode-supprimer-id" tabindex="-1">La mÃ©thode <code>supprimer($id = &#39;&#39;)</code> <a class="header-anchor" href="#la-methode-supprimer-id" aria-label="Permalink to &quot;La mÃ©thode \`supprimer($id = &#39;&#39;)\`&quot;">â€‹</a></h3><p>En utilisant le code prÃ©cÃ©demment fourni, Ã©crire :</p><ul><li>La mÃ©thode dans le modÃ¨le permettant de supprimer un Ã©lÃ©ment dans la base de donnÃ©es pour un id donnÃ©.</li><li>La mÃ©thode dans le contrÃ´leur permettant de traiter l&#39;action.</li><li><strong>Ne permettre la suppression</strong> que des Todo ayant <code>termine = 1</code>. La vÃ©rification <strong>ne doit pas Ãªtre</strong> prÃ©sente que dans la vue.</li></ul><p>C&#39;est Ã  vous.</p><h2 id="ajouter-un-lien-dans-la-page-d-accueil" tabindex="-1">Ajouter un lien dans la page d&#39;accueil <a class="header-anchor" href="#ajouter-un-lien-dans-la-page-d-accueil" aria-label="Permalink to &quot;Ajouter un lien dans la page d&#39;accueil&quot;">â€‹</a></h2><p>Ajouter dans la page d&#39;accueil du site un lien permettant d&#39;accÃ©der Ã  votre TodoList. Quelques consignes Ã  respecter :</p><ul><li>Le lien doit Ãªtre centrÃ© dans la page.</li><li>Le lien doit avoir l&#39;<strong>apparence</strong> d&#39;un bouton. <a href="https://getbootstrap.com/docs/5.0/components/buttons/" target="_blank" rel="noreferrer">Voir la documentation</a></li></ul><h2 id="masquer-les-todo-terminees" tabindex="-1">Masquer les TODO terminÃ©es <a class="header-anchor" href="#masquer-les-todo-terminees" aria-label="Permalink to &quot;Masquer les TODO terminÃ©es&quot;">â€‹</a></h2><p>Je souhaite finalement masquer de l&#39;affichage par dÃ©faut l&#39;ensemble des enregistrements de la table <code>TODO</code> ayant <code>termine = 1</code>.</p><p>Je vous laisse modifier :</p><ul><li>Le code du modÃ¨le afin d&#39;y ajouter une mÃ©thode.</li><li>Appeler cette mÃ©thode depuis votre page Ã  la place du <code>getAll()</code>.</li></ul><details class="details custom-block"><summary>Un doute sur comment procÃ©der ?</summary><p>Vous devez rÃ©aliser une requÃªte directement depuis votre modÃ¨le. Celle-ci devras retourner le rÃ©sultat d&#39;une requÃªte SQL via un FetchAll de PDO.</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getAllTermine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($id){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $stmt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> $this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPdo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">prepare</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> todos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> termine </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $stmt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">execute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([]);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $stmt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\PDO</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">FETCH_OBJ</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></details><h2 id="ajouter-une-page-d-authentification" tabindex="-1">Ajouter une page d&#39;authentification <a class="header-anchor" href="#ajouter-une-page-d-authentification" aria-label="Permalink to &quot;Ajouter une page d&#39;authentification&quot;">â€‹</a></h2><p>La partie TODOList ne doit pas Ãªtre accessible Ã  tous. En utilisant les techniques vues avec la SESSION (<code>$_SESSION</code>) ainsi qu&#39;en rÃ©flÃ©chissant sur les impacts en termes de sÃ©curitÃ© (protection dans le routeur par exemple). Limiter l&#39;accÃ¨s de la partie TODOList seulement aux personnes avec un compte sur la plateforme.</p><div class="tip custom-block"><p class="custom-block-title">Quelques Ã©lÃ©ments pour vous aider</p><p>Pour rÃ©aliser une page d&#39;authentification dans votre projet, vous allez devoir ajouter :</p><ul><li>Une page avec un formulaire pour vous connecter (votre vue).</li><li>Une table en base (qui sera utilisÃ© via un modÃ¨le).</li><li>Un modÃ¨le et un contrÃ´leur dÃ©diÃ© Ã  cette action (<code>php mvc model:create AuthModel</code> et <code>php mvc controller:create AuthControler</code>)</li><li>Modifier le routeur pour n&#39;autoriser l&#39;accÃ¨s aux utilisateurs <strong>authentifiÃ©</strong>.</li></ul></div><ul><li>Quels impacts sont Ã  prÃ©voir dans le routeur ?</li><li>Est-ce nÃ©cessaire de crÃ©er un nouveau modÃ¨le ?</li><li>Est-ce nÃ©cessaire de crÃ©er un nouveau contrÃ´leur ?</li><li>Combien de vue sera(ont) nÃ©cessaire(s) en plus de celles existantes ?</li></ul><div class="danger custom-block"><p class="custom-block-title">Attention</p><p>âš ï¸ Mot de passe et sÃ©curitÃ©â€¦</p><ul><li>Comment allez-vous enregistrer le mot de passe en base ? (<a href="https://www.php.net/manual/en/function.password-hash.php" target="_blank" rel="noreferrer">Un peu d&#39;aide</a>)</li><li>Comment allez-vous vÃ©rifier l&#39;authentification ? (<a href="https://www.php.net/manual/en/function.password-verify.php" target="_blank" rel="noreferrer">Un peu d&#39;aide</a>)</li></ul></div><h2 id="evolution-1-qui-a-cree-la-todo" tabindex="-1">Ã‰volution 1 : Qui a crÃ©Ã© la TODO ? <a class="header-anchor" href="#evolution-1-qui-a-cree-la-todo" aria-label="Permalink to &quot;Ã‰volution 1 : Qui a crÃ©Ã© la TODO ?&quot;">â€‹</a></h2><p>Maintenant que nous avons un systÃ¨me d&#39;authentification, je vous propose de sauvegarder qui a crÃ©Ã© la TODO pour ce faire :</p><ul><li>Modifier la base de donnÃ©es afin d&#39;ajouter Â« l&#39;email / nom d&#39;utilisateur Â» de la personne ayant crÃ©Ã© la TODO (Ã©videment, il faudra utiliser une clÃ© Ã©trangÃ¨re).</li><li>Modifier la mÃ©thode d&#39;ajout dans le modÃ¨le pour enregistrer l&#39;information <ul><li>Attention, comment allez-vous procÃ©der pour rÃ©cupÃ©rer la personne actuellement connectÃ©e ?</li></ul></li><li>Ajouter <strong>dans la vue</strong>, l&#39;affichage de l&#39;identitÃ© de la personne. <ul><li>IdÃ©alement en groupant les TODO par nom d&#39;utilisateur / email.</li><li>Ou via l&#39;ajout d&#39;une image de profil (avatar / gravatar) Ã  cÃ´tÃ© de la TODO.</li></ul></li></ul><h2 id="evolution-2-envoi-d-email" tabindex="-1">Ã‰volution 2 : Envoi d&#39;email <a class="header-anchor" href="#evolution-2-envoi-d-email" aria-label="Permalink to &quot;Ã‰volution 2 : Envoi d&#39;email&quot;">â€‹</a></h2><p>Vous avez mis en place un systÃ¨me de connexion, mais pour l&#39;instant l&#39;utilisateur ne reÃ§ois aucun email. Il serait intÃ©ressant de lui envoyer un email aprÃ¨s la crÃ©ation du compte afin de lui confirmer la bonne crÃ©ation de celui-ci. Il existe plein de faÃ§on d&#39;envoyer des emails en PHP. Dans ce TP je vous propose d&#39;utiliser PHPMailer.</p><p>PHPMail est une librairie PHP permettant d&#39;envoyer des emails. Celle-ci s&#39;installe via composer. Pour l&#39;installer, il suffit de lancer la commande suivante (Ã  la racine de votre projet)</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> require</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> phpmailer/phpmailer</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="danger custom-block"><p class="custom-block-title">Installation de composer</p><p>Pour que la commande prÃ©cÃ©dente fonctionne, il faut que composer soit installÃ© sur votre machine. Pour l&#39;installer, je vous invite Ã  suivre la documentation officielle <a href="https://getcomposer.org/download/" target="_blank" rel="noreferrer">disponible ici</a>. Composer est un outil permettant de gÃ©rer les dÃ©pendances d&#39;un projet PHP, il est trÃ¨s utilisÃ© dans le monde PHP (notamment avec Laravel).</p></div><p>Dans l&#39;AP, vous avez dans le code source un utilitaire permettant la gestion de l&#39;envoi d&#39;email. Celui-ci est prÃ©sent dans le dossier <code>utils</code>, pour les besoin de cette Ã©volution nous allons en avoir besoin :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">php</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> utils</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PHPMailer\\PHPMailer\\PHPMailer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EmailUtils</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sendEmail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($to, $subject, $template, $data)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> bool</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // RÃ©cupÃ©ration des informations de configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> include</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;configs.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Construction du message avec la librairie Template</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;views/emails/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$template</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, $data, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $mail </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PHPMailer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $mail</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isSMTP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $mail</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Host </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $config[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MAIL_SERVER&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;localhost&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $mail</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SMTPAuth </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $mail</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1025</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $mail</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setFrom</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($config[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;FROM_EMAIL&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Contact&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $mail</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($to);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $mail</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Subject </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $subject;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $mail</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Body </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $message;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $mail</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isHTML</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $mail</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>Modifier maintenant le fichier <code>index.php</code> afin d&#39;ajouter l&#39;include des librairies :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">include</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vendor/autoload.php&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Pour les librairies externes. (PHPMailer, etc.)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">Avant de continuer</p><p>Appeler-moi nous allons discuter un peu de ce code, il y a plein de choses Ã  dire dessus !</p></div><p>Voici un exemple d&#39;utilisation de cette classe :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">EmailUtils</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sendEmail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;you@test.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Mon sujet&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;monTemplate&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;John Doe&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>Quels sont les paramÃ¨tres de la mÃ©thode ?</li><li>Ã€ quoi correspond l&#39;array de donnÃ©es ?</li><li>Ã€ quoi correspond le paramÃ¨tre <code>monTemplate</code>, ou doit-il Ãªtre dans votre projet ?</li><li>Est-ce que le code proposÃ© est suffisant pour envoyer un email ?</li></ul><div class="tip custom-block"><p class="custom-block-title">C&#39;est Ã  vous</p><p>Je vous laisse mettre en place l&#39;envoi d&#39;email dans votre projet. Celui-ci doit Ãªtre fait <strong>aprÃ¨s la crÃ©ation du compte</strong>.</p></div><h2 id="bonus-mot-de-passe-oublie" tabindex="-1">Bonus, mot de passe oubliÃ© <a class="header-anchor" href="#bonus-mot-de-passe-oublie" aria-label="Permalink to &quot;Bonus, mot de passe oubliÃ©&quot;">â€‹</a></h2><p>Je vous laisse rÃ©flÃ©chir Ã  la mise en place d&#39;un systÃ¨me de mot de passe oubliÃ©. Celui-ci doit permettre Ã  l&#39;utilisateur de rÃ©initialiser son mot de passe en cas d&#39;oubli.</p><div class="tip custom-block"><p class="custom-block-title">Quelques Ã©lÃ©ments pour vous aider</p><ul><li>Il faudra certainement ajouter une nouvelle table en base de donnÃ©es.</li><li>Il faudra certainement ajouter une nouvelle page dans votre projet.</li><li>Il faudra certainement ajouter une nouvelle mÃ©thode dans votre contrÃ´leur.</li><li>Il faudra certainement ajouter une nouvelle mÃ©thode dans votre modÃ¨le.</li><li>Il faudra certainement ajouter une nouvelle mÃ©thode dans votre routeur.</li><li>Il faudra certainement ajouter un nouvel email dans votre projet.</li></ul></div><h2 id="bonus-une-page-d-accueil-personnalisee" tabindex="-1">Bonus, une page d&#39;accueil personnalisÃ©e <a class="header-anchor" href="#bonus-une-page-d-accueil-personnalisee" aria-label="Permalink to &quot;Bonus, une page d&#39;accueil personnalisÃ©e&quot;">â€‹</a></h2><p>Il serait intÃ©ressant d&#39;arriver sur une page d&#39;accueil personnalisÃ©e. Pour ce faire, je vous propose de :</p><ul><li>CrÃ©er dans votre contrÃ´leur une mÃ©thode qui sera appelÃ©e par dÃ©faut.</li><li>Modifier votre routeur afin de rediriger vers cette mÃ©thode par dÃ©faut (si non connectÃ©).</li><li>CrÃ©er votre page d&#39;accueil personnalisÃ©e (elle doit contenir au minimum un titre, une bouton invitant Ã  la crÃ©ation d&#39;un compte, un bouton invitant Ã  la connexion)</li><li>Si l&#39;utilisateur est dÃ©jÃ  connectÃ©, rediriger vers la TODOList.</li></ul><p>Pour vous aider dans la conception de votre page d&#39;accueil, vous pouvez utiliser un template Â« bootstrap Â» disponible <a href="https://bootstrapmade.com/bootstrap-landing-page-templates/" target="_blank" rel="noreferrer">ici</a>.</p><p>ğŸ‘‹ Bon courage !</p>`,95),P=[C,f,A,D,q,B,j];function x(L,T,_,M,w,z){return o(),r("div",null,P)}const I=p(v,[["render",x]]);export{$ as __pageData,I as default};
