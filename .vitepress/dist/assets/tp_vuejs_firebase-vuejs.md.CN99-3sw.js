import{_ as t}from"./chunks/vuejs-init.Du3E_Ssu.js";import{_ as r,c as p,I as n,w as l,U as e,D as h,o,k as s,a as i}from"./chunks/framework.aGaNZw_P.js";const k="/assets/carte_marker.ChPODiCK.png",d="/assets/creation-firebase.CRx9wa_q.png",u="/assets/configuration-web.B2jhlf-f.png",c="/assets/init_firebase.CofbddAR.png",E="/assets/security_firebase.DErICK68.png",g="/assets/serve_npm.CaNs1x33.png",m="/assets/first-map.Bw9h2Uvh.png",b="/assets/evolution_carte.B8skbKub.png",G=JSON.parse('{"title":"Firebase + VueJS 2.0","description":"Dans ce TP nous allons dÃ©couvrir Firebase RealtimeDB (base de donnÃ©es temps rÃ©el). Nous allons coupler cette base de donnÃ©es temps rÃ©el Ã  la puissance de VueJS pour obtenir en un rien de temps une application web surpuissante.","frontmatter":{"description":"Dans ce TP nous allons dÃ©couvrir Firebase RealtimeDB (base de donnÃ©es temps rÃ©el). Nous allons coupler cette base de donnÃ©es temps rÃ©el Ã  la puissance de VueJS pour obtenir en un rien de temps une application web surpuissante."},"headers":[],"relativePath":"tp/vuejs/firebase-vuejs.md","filePath":"tp/vuejs/firebase-vuejs.md","lastUpdated":1643396127000}'),y={name:"tp/vuejs/firebase-vuejs.md"},v=e('<h1 id="firebase-vuejs-2-0" tabindex="-1">Firebase + VueJS 2.0 <a class="header-anchor" href="#firebase-vuejs-2-0" aria-label="Permalink to &quot;Firebase + VueJS 2.0&quot;">â€‹</a></h1><p>Dans ce TP nous allons dÃ©couvrir Firebase RealtimeDB (base de donnÃ©es temps rÃ©el). Nous allons coupler cette base de donnÃ©es temps rÃ©el Ã  la puissance de VueJS pour obtenir en un rien de temps une application web surpuissante.</p><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">â€‹</a></h2><p>Nous allons mettre en place une carte du monde qui affiche en temps rÃ©el l&#39;emplacement des utilisateurs qui interagissent avec la carte. Mais nous pourrions Ã©galement afficher les personnes prÃ©sentes sur votre site.</p><p><img src="'+k+'" alt="Carte Marker fin" loading="lazy"></p><h2 id="la-mise-en-place" tabindex="-1">La mise en place <a class="header-anchor" href="#la-mise-en-place" aria-label="Permalink to &quot;La mise en place&quot;">â€‹</a></h2><p>Nous allons utiliser VueCLI pour initialiser le projet, premiÃ¨re Ã©tape l&#39;installation.</p><h2 id="installer-nodejs-vuecli" tabindex="-1">Installer NodeJS + VueCLI <a class="header-anchor" href="#installer-nodejs-vuecli" aria-label="Permalink to &quot;Installer NodeJS + VueCLI&quot;">â€‹</a></h2><p>Avant de commencer, nous allons avoir besoin de plusieurs outils :</p><ul><li>NodeJS</li><li>VueCli</li></ul><h2 id="nodejs" tabindex="-1">NodeJS <a class="header-anchor" href="#nodejs" aria-label="Permalink to &quot;NodeJS&quot;">â€‹</a></h2><p>La premiÃ¨re Ã©tape va Ãªtre lâ€™installation de NodeJS, la dÃ©marche est diffÃ©rente en fonction de votre environnement, mais pour rÃ©sumer <a href="https://nodejs.org/en/download/" target="_blank" rel="noreferrer">sous Windows câ€™est ici</a> prendre la version CURRENT, sous OSX le plus simple câ€™est via Brew <code>brew install nodejs</code>, et sous Linux câ€™est via le gestionnaire de paquet <code>apt install nodejs</code></p><p>Une fois installÃ©, vous Ãªtes prÃªt, votre PC est prÃªt Ã  accueillir lâ€™outil Vue-Cli.</p><h2 id="vue-cli" tabindex="-1">Vue-Cli <a class="header-anchor" href="#vue-cli" aria-label="Permalink to &quot;Vue-Cli&quot;">â€‹</a></h2><p>Vue-Cli est un outil qui simplifie la crÃ©ation dâ€™un nouveau projet Vue-JS Ã  partir de template fourni par la communautÃ©.</p><p>Dans un terminal lancer la commande suivante dans le <code>Node.js Command Prompt</code> :</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @vue/cli</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Maintenant que vue-cli est installÃ©, vous avez Ã  votre disposition sur votre ordinateur une nouvelle commande, la commande <code>vue</code>.</p><p>Pour crÃ©er un nouveau projet, câ€™est simple il suffit de lancer la commande suivante dans le <code>Node.js Command Prompt</code>.</p><h2 id="initialiser-le-projet" tabindex="-1">Initialiser le projet <a class="header-anchor" href="#initialiser-le-projet" aria-label="Permalink to &quot;Initialiser le projet&quot;">â€‹</a></h2><p>La crÃ©ation d&#39;un nouveau projet est trÃ¨s simple. Il suffit de rentrer la commande suivante :</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">vue create firebase</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">vuejs</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Choisir l&#39;option Â« Default Â».</p><p>ğŸ¤“ git est dÃ©jÃ  initialisÃ©, vous pouvez en profiter pour pusher votre code sur Github / Gitlab.</p><h3 id="questions" tabindex="-1">Questions <a class="header-anchor" href="#questions" aria-label="Permalink to &quot;Questions&quot;">â€‹</a></h3><ul><li>Pourquoi git est dÃ©jÃ  initialisÃ© ?</li><li>Allez jeter un coup d&#39;Å“il au fichier <code>.gitignore</code></li></ul><h2 id="tester" tabindex="-1">Tester <a class="header-anchor" href="#tester" aria-label="Permalink to &quot;Tester&quot;">â€‹</a></h2><p>Le projet initialisÃ© par <code>Vue-Cli</code> est immÃ©diatement fonctionnel. Testez-le en saisissant :</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npm run serve</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+t+`" alt="VueJS init" loading="lazy"></p><h2 id="les-dependances" tabindex="-1">Les dÃ©pendances <a class="header-anchor" href="#les-dependances" aria-label="Permalink to &quot;Les dÃ©pendances&quot;">â€‹</a></h2><p>Maintenant que notre projet est Â« initialisÃ© Â», nous allons avoir besoin de quelques dÃ©pendances NPM pour faire fonctionner notre projet. Notre projet va utiliser les technologies suivantes :</p><ul><li>firebase</li><li>leaflet</li></ul><p>Firebase comme vous le savez va nous servir de systÃ¨me de base de donnÃ©es. <a href="http://leafletjs.com/" target="_blank" rel="noreferrer">Leaflet</a> quant Ã  lui est une librairie qui va nous permettre d&#39;afficher trÃ¨s rapidement une carte sur notre site internet.</p><h3 id="ajouter-les-dependances" tabindex="-1">Ajouter les dÃ©pendances <a class="header-anchor" href="#ajouter-les-dependances" aria-label="Permalink to &quot;Ajouter les dÃ©pendances&quot;">â€‹</a></h3><p>Les deux outils / librairies que nous allons utiliser sont disponibles via NPM, nous allons donc les installer / ajouter au projet via les commandes suivantes :</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> firebase@7.24.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> leaflet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vue2-leaflet</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --save</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="danger custom-block"><p class="custom-block-title">Firebase 7.24 ?</p><ul><li>Heu ? Nous n&#39;installons pas la derniÃ¨re version Mr ?</li><li>Et bien non ! Cette fois-ci nous allons volontairement choisir une version un peu plus ancienneâ€¦</li><li>Pourquoi ?</li><li>Et bienâ€¦ Ã€ cause d&#39;une librairie que nous utilisons ! Dans ce projet nous utilisons Vuefire 2.0 qui n&#39;est compatible qu&#39;avec Firebase 7.X.</li></ul></div><h3 id="configuration-de-la-dependance-carte" tabindex="-1">Configuration de la dÃ©pendance carte <a class="header-anchor" href="#configuration-de-la-dependance-carte" aria-label="Permalink to &quot;Configuration de la dÃ©pendance carte&quot;">â€‹</a></h3><p>Certains plugins nÃ©cessitent de la configuration supplÃ©mentaire, Ã§a sera le cas pour Vue2-Leaflet (et Firebase). Comme vous, je ne connais pas la configuration de l&#39;ensemble des dÃ©pendances existantes. PremiÃ¨re Ã©tape :</p><ul><li><a href="https://vue2-leaflet.netlify.app/quickstart/" target="_blank" rel="noreferrer">Lire la documentation sur le site de Vue2-Leaflet</a></li></ul><p>Maintenant que nous avons vu comment s&#39;intÃ¨gre le Leaflet, rÃ©flÃ©chissons comment intÃ©grer Ã§a dans notre projet :</p><ul><li>Ã€ l&#39;arrache dans le fichier <code>main.js</code> ? âœ‹ =&gt; NON</li><li>Dans un dossier <code>plugins</code> =&gt; ğŸ‘ Oui</li></ul><p>Ã€ votre avis pourquoi ?</p><h3 id="creation-de-la-partie-plugin" tabindex="-1">CrÃ©ation de la partie plugin <a class="header-anchor" href="#creation-de-la-partie-plugin" aria-label="Permalink to &quot;CrÃ©ation de la partie plugin&quot;">â€‹</a></h3><p>CrÃ©er le fichier <code>src/plugins/vue2-leaflet.js</code> y mettre dedans :</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Icon } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;leaflet&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;leaflet/dist/leaflet.css&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// this part resolve an issue where the markers would not appear</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Icon.Default.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._getIconUrl;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Icon.Default.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mergeOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  iconRetinaUrl: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;leaflet/dist/images/marker-icon-2x.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  iconUrl: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;leaflet/dist/images/marker-icon.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  shadowUrl: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;leaflet/dist/images/marker-shadow.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>D&#39;oÃ¹ vient le code ?</li></ul><h3 id="declarer-le-plugin" tabindex="-1">DÃ©clarer le plugin <a class="header-anchor" href="#declarer-le-plugin" aria-label="Permalink to &quot;DÃ©clarer le plugin&quot;">â€‹</a></h3><p>Maintenant que la configuration du Â« plugin Â» est effective nous devons le dÃ©clarer dans notre fichier <code>main.js</code> pour Ã§a rien de compliquer.</p><p>Ajouter l&#39;import :</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./plugins/vue2-leaflet&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ğŸ¤“ Avec les autres imports dÃ©jÃ  existants.</p><h3 id="questions-1" tabindex="-1">Questions <a class="header-anchor" href="#questions-1" aria-label="Permalink to &quot;Questions&quot;">â€‹</a></h3><ul><li>Pourquoi l&#39;import est-il nÃ©cessaire ?</li><li>Pourquoi vue2-leaflet et pas juste leaflet ?</li></ul><h3 id="dependance-supplementaire" tabindex="-1">DÃ©pendance supplÃ©mentaire <a class="header-anchor" href="#dependance-supplementaire" aria-label="Permalink to &quot;DÃ©pendance supplÃ©mentaire&quot;">â€‹</a></h3><p>Le gros avantage de NPM (et de NodeJS) c&#39;est la quantitÃ© de librairies disponibles pour rÃ©pondre Ã  un besoin, nous allons donc en profiter pour gagner du temps dans notre rÃ©alisation.</p><p>Firebase est plutÃ´t simple Ã  utiliser, mais nativement celle-ci ne s&#39;intÃ¨gre pas directement avec le Â« state Â» d&#39;un composant VueJS! Mais grÃ¢ce Ã  d&#39;excellents dÃ©veloppeurs c&#39;est maintenant possible et trÃ¨s simplement. Pour Ã§a nous allons utiliser :</p><ul><li><a href="https://vuefire.vuejs.org/" target="_blank" rel="noreferrer">Vuefire</a></li></ul><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vuefire@2.2.5</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --save</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>âš ï¸ Dans une prochaine Ã©tape, nous allons configurer Vuefire. Pour l&#39;instant le package est disponible, mais non actif.</p><p>ğŸ¤“ Je vous invite quand mÃªme Ã  aller voir <a href="https://github.com/vuejs/vuefire/tree/v1" target="_blank" rel="noreferrer">la documentation</a> de VueFire pour voir de quoi il en retourne !</p><h2 id="creation-du-projet-sur-firebase" tabindex="-1">CrÃ©ation du projet sur Firebase <a class="header-anchor" href="#creation-du-projet-sur-firebase" aria-label="Permalink to &quot;CrÃ©ation du projet sur Firebase&quot;">â€‹</a></h2><p>Maintenant que nos dÃ©pendances sont installÃ©es et que notre projet est initialisÃ©, nous allons configurer le projet sur Firebase :</p><p>PremiÃ¨re Ã©tape <a href="https://console.firebase.google.com/u/0/" target="_blank" rel="noreferrer">crÃ©er le projet sur le site de Firebase</a></p><p><img src="`+d+'" alt="CrÃ©ation Firebase" loading="lazy"></p><p>Maintenant que le projet est crÃ©Ã©, nous allons rÃ©cupÃ©rer la configuration :</p><p><img src="'+u+`" alt="Configuration Web" loading="lazy"></p><p>Nous allons rÃ©cupÃ©rer une partie du code fourniâ€¦ Nous allons prendre la configuration (dans mon cas) :</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Initialize Firebase</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  apiKey: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;âœ‹-CHANGE-CHANGE-CHANGE-CHANGE-âœ‹&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  authDomain: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;reatlime-maps.firebaseapp.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  databaseURL: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://reatlime-maps.firebaseio.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  projectId: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;reatlime-maps&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  storageBucket: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;reatlime-maps.appspot.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  messagingSenderId: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;âœ‹âœ‹âœ‹âœ‹âœ‹âœ‹âœ‹âœ‹&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Nous allons mettre le code dans le fichier <code>src/config/firebase.js</code> â¬…ï¸</p><p>âš ï¸ âœ‹ Attention Ã  bien changer la valeur de <code>apiKey</code> et <code>messagingSenderId</code>. âœ‹ âš ï¸</p><p>BRAVO ! Votre projet est maintenant capable de Â« se connecter Â» avec Firebase !</p><h3 id="questions-2" tabindex="-1">Questions <a class="header-anchor" href="#questions-2" aria-label="Permalink to &quot;Questions&quot;">â€‹</a></h3><ul><li>Et la sÃ©curitÃ© ? Ã€ votre avis, comment Ã§a fonctionne ?</li><li>Est-il possible de faire autrement ?</li></ul><h2 id="activer-la-realtime-db" tabindex="-1">Activer la Realtime DB <a class="header-anchor" href="#activer-la-realtime-db" aria-label="Permalink to &quot;Activer la Realtime DB&quot;">â€‹</a></h2><p>Dans l&#39;interface de Firebase, activez la Realtime DB.</p><p><img src="`+c+'" alt="Init Firebase" loading="lazy"></p><p><img src="'+E+`" alt="Security Firebase" loading="lazy"></p><h2 id="modification-du-code-pour-inclure-la-configuration-firebase" tabindex="-1">Modification du code pour inclure la configuration Firebase <a class="header-anchor" href="#modification-du-code-pour-inclure-la-configuration-firebase" aria-label="Permalink to &quot;Modification du code pour inclure la configuration Firebase&quot;">â€‹</a></h2><p>Maintenant que nous avons ajoutÃ© la configuration, nous devons la dÃ©clarer dans notre code. Comme pour Vue2-Leaflet nous allons ajouter un fichier de Â« configuration du plugin Â» dans le dossier, <code>src/plugins/</code> ajouter un fichier nommÃ© <code>firebase.js</code> avec le contenu suivant :</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> firebaseConfig </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;../config/firebase&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> firebase </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;firebase/app&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;firebase/database&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> firebaseApp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> firebase.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initializeApp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(firebaseConfig);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> db</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> firebaseApp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">database</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.$db </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> firebaseApp;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Comme pour leaflet, ajouter un import dans le fichier <code>main.js</code> pour rÃ©fÃ©rencer notre Â« configuration de plugin Â» :</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./plugins/firebase&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="questions-3" tabindex="-1">Questions <a class="header-anchor" href="#questions-3" aria-label="Permalink to &quot;Questions&quot;">â€‹</a></h3><ul><li>Que fait le code ?</li><li>Comment connaitre les autres options ?</li><li>Vue.prototype ? KÃ©zako ? On en parle !</li></ul><h2 id="testons" tabindex="-1">Testons <a class="header-anchor" href="#testons" aria-label="Permalink to &quot;Testons&quot;">â€‹</a></h2><p>Bien maintenant, que nous avons mis en place les bases de notre projet, testons si celui-ci fonctionne correctement. Pour Ã§a (dans un terminal) :</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> serve</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>AprÃ¨s quelques secondes de compilation (prÃ©-processing) vous devriez avoir sur votre Ã©cran :</p><p><img src="`+g+'" alt="serve npm" loading="lazy"></p><p>Et dans votre navigateur toujours la mÃªme chose Ã  savoir :</p><p><img src="'+t+`" alt="VueJS init" loading="lazy"></p><h2 id="creation-de-notre-premiere-vue-composant" tabindex="-1">CrÃ©ation de notre premiÃ¨re vue / composant. <a class="header-anchor" href="#creation-de-notre-premiere-vue-composant" aria-label="Permalink to &quot;CrÃ©ation de notre premiÃ¨re vue / composant.&quot;">â€‹</a></h2><p>Notre projet est maintenant prÃªt Ã  recevoir son premier <code>.vue</code> bien Ã  vous. Toujours dans le but d&#39;organiser son travail, nous allons commencer par crÃ©er un dossier :</p><ul><li><code>src/views/</code></li></ul><p>Ce dossier nous servira Ã  ranger l&#39;ensemble de nos vues, pour l&#39;instant nous allons crÃ©er une vue nommÃ©e <code>map.vue</code> ce fichier contiendra le code source de notre carte.</p><p>CrÃ©er le fichier <code>src/views/map.vue</code> avec le contenu suivant :</p><div class="language-vue vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">l-map</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;map&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">zoom</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">zoom</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">center</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">center</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;myMap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">l-tile-layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">url</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">l-tile-layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">l-map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { LMap, LTileLayer, LMarker, LControl } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vue2-leaflet&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;myMap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://{s}.tile.osm.org/{z}/{x}/{y}.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      zoom: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">13</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      center: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">47.472092</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.550589</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  components: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    LMap,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    LTileLayer,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    LMarker,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    LControl,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  methods: {},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> scoped</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">#map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>âœ‹ D&#39;oÃ¹ vient le code ? Tout simplement une adaptation du <a href="https://vue2-leaflet.netlify.app/components/LMap.html" target="_blank" rel="noreferrer">code de dÃ©monstration fourni par Vue2-Leaflet</a></p><h2 id="utiliser-notre-premiere-vue" tabindex="-1">Utiliser notre premiÃ¨re vue <a class="header-anchor" href="#utiliser-notre-premiere-vue" aria-label="Permalink to &quot;Utiliser notre premiÃ¨re vue&quot;">â€‹</a></h2><p>CrÃ©er la vue ne dÃ©clenche rien, il faut maintenant l&#39;importer. Comme vu en cours, la Â« base Â» de notre application est rÃ©partie entre deux fichiers :</p><ul><li>Le main.js : qui contient les imports de base et la dÃ©claration de notre objet <code>.vue</code>.</li><li>l&#39;App.vue : qui contient la Â« racine Â» de notre HTML (c&#39;est dans celui-ci que nous allons rÃ©fÃ©rencer notre nouvelle vue / composant).</li></ul><p>Modifier le <code>App.vue</code> par :</p><div class="language-vue vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;container&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">myMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> myMap </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./views/map.vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;app&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  components: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    myMap,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.container</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  margin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  padding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="questions-4" tabindex="-1">Questions <a class="header-anchor" href="#questions-4" aria-label="Permalink to &quot;Questions&quot;">â€‹</a></h3><ul><li>Quelles sont les diffÃ©rences ?</li><li>Pourquoi le CSS n&#39;est pas <code>scoped</code> ?</li><li>Ã€ quoi correspond <code>components</code> ?</li></ul><h2 id="tester-1" tabindex="-1">Tester <a class="header-anchor" href="#tester-1" aria-label="Permalink to &quot;Tester&quot;">â€‹</a></h2><p>Votre projet doit maintenant afficher une carte, tester rapidement via la commande :</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> serve</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="`+m+'" alt="PremiÃ¨re carte" loading="lazy"></p><h2 id="configurer-vuefire" tabindex="-1">Configurer VueFire <a class="header-anchor" href="#configurer-vuefire" aria-label="Permalink to &quot;Configurer VueFire&quot;">â€‹</a></h2><p>Comme pour Vue2-Leaflet et firebase, VueFire nÃ©cessite une dÃ©claration pour Ãªtre utilisÃ© dans le projet.</p><ul><li><a href="https://vuefire.vuejs.org/" target="_blank" rel="noreferrer">Lire la documentation</a>.</li><li>CrÃ©er le fichier dans le dossier <code>plugins</code>.</li><li>RÃ©aliser l&#39;import dans le fichier <code>main.js</code>.</li></ul>',114),F=s("p",null,[s("code",null,"src/plugins/vuefire.js")],-1),f=s("div",{class:"language-js vp-adaptive-theme line-numbers-mode"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"js"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"import"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Vue "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"from"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "vue"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"import"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," { rtdbPlugin } "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"from"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "vuefire"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Vue."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"use"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(rtdbPlugin);")])])]),s("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br")])],-1),C=s("p",null,[s("code",null,"main.js")],-1),q=s("div",{class:"language-js vp-adaptive-theme line-numbers-mode"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"js"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// [â€¦]")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"import"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "./plugins/vuefire"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// [â€¦]")])])]),s("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br")])],-1),j=s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},"TIP"),s("p",null,"Et voilÃ  ! Votre base RealtimeDB est accessible !")],-1),B=e(`<h2 id="connecter-firebase-a-notre-vue" tabindex="-1">Connecter Firebase Ã  notre vue <a class="header-anchor" href="#connecter-firebase-a-notre-vue" aria-label="Permalink to &quot;Connecter Firebase Ã  notre vue&quot;">â€‹</a></h2><p>GrÃ¢ce au plugin l&#39;intÃ©gration de Firebase va Ãªtre trÃ¨s simplifiÃ©e. DÃ©jÃ  vous avez mis en place Firebase et injecter le connecteur de base de donnÃ©es grÃ¢ce au Â« plugin Â» et Â« Vue.prototype Â», nous allons devoir l&#39;utiliser. Pour Ã§a, modifiez le fichier <code>maps.vue</code> pour ajouter (aprÃ¨s name) :</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firebase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    markerList: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.$db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/markerList/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Ajouter Ã©galement dans les <code>data</code> de votre composant une variable nommÃ©e <code>markerList</code> avec comme valeurs <code>[]</code>.</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">markerList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [];</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="questions-5" tabindex="-1">Questions : <a class="header-anchor" href="#questions-5" aria-label="Permalink to &quot;Questions :&quot;">â€‹</a></h3><ul><li>D&#39;oÃ¹ vient <code>this.$db</code> ?</li><li>Ã€ quoi correspond le <code>/markerList/</code> ?</li></ul><p>Et c&#39;est tout ! Vous avez maintenant dans votre objet vue une nouvelle variable de disponible, <code>markerList</code> celle-ci est synchronisÃ©e avec votre base de donnÃ©es temps rÃ©el (Firebase RealtimeDB).</p><h2 id="manipuler-la-base-realtimedb" tabindex="-1">Manipuler la base RealtimeDB <a class="header-anchor" href="#manipuler-la-base-realtimedb" aria-label="Permalink to &quot;Manipuler la base RealtimeDB&quot;">â€‹</a></h2><p>La manipulation de la base RealtimeDB va se faire via l&#39;objet <code>this.$firebaseRefs</code>. VoilÃ  l&#39;ensemble des actions possibles :</p><h3 id="ajouter-une-nouvelle-entree" tabindex="-1">Ajouter une nouvelle entrÃ©e : <a class="header-anchor" href="#ajouter-une-nouvelle-entree" aria-label="Permalink to &quot;Ajouter une nouvelle entrÃ©e :&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.$firebaseRefs.markerList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/*â€¦*/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="modifier-une-entree" tabindex="-1">Modifier une entrÃ©e : <a class="header-anchor" href="#modifier-une-entree" aria-label="Permalink to &quot;Modifier une entrÃ©e :&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.$firebaseRefs.markerList[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/*...*/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Marker updated!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><ul><li><code>0</code> Ã©tant l&#39;index de l&#39;Ã©lÃ©ment Ã  modifier.</li><li><code>/* ... */</code> Ã©tant le nouveau contenu, par exemple <code>[0, 0]</code></li></ul></div><h3 id="supprimer-un-element" tabindex="-1">Supprimer un Ã©lÃ©ment : <a class="header-anchor" href="#supprimer-un-element" aria-label="Permalink to &quot;Supprimer un Ã©lÃ©ment :&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.$firebaseRefs.markerList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(identifiant).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><code>identifiant</code> Ã©tant la clÃ© unique reprÃ©sentant votre Ã©lÃ©ment en base.</p></div><p><a href="https://vuefire.vuejs.org/vuefire/writing-data.html#updates-to-collection-and-documents" target="_blank" rel="noreferrer">Plus de dÃ©tail ici sur la documentation</a></p><h2 id="ajouter-un-marker" tabindex="-1">Ajouter un marker <a class="header-anchor" href="#ajouter-un-marker" aria-label="Permalink to &quot;Ajouter un marker&quot;">â€‹</a></h2><p>Pour ajouter un marker sur la carte, nous allons utiliser la directive <code>@click</code> sur l&#39;objet <code>l-map</code> :</p><ul><li>Ajouter sur l&#39;objet <code>&lt;l-map&gt;</code> la directive suivante <code>@click=&quot;addMarker&quot;</code>.</li><li>Ajouter la mÃ©thode <code>addMarker</code> dans les mÃ©thodes de votre objet VueJS <code>addMarker(position){â€¦}</code> .</li><li>Ã€ votre avis Ã  quoi doit ressembler le code ?</li><li>Ajouter un <code>console.log(position)</code> avez-vous une propriÃ©tÃ© <code>latlng</code> ?</li><li>Remplacez-le <code>console.log</code> par le bon push pour ajouter dans la base de donnÃ©es la position.</li></ul>`,22),A=s("div",{class:"language-js vp-adaptive-theme line-numbers-mode"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"js"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"addMarker"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(position) {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  this"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".$firebaseRefs.markerList."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"push"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"([")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    position.latlng.lat,")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    position.latlng.lng")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ]);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"},")])])]),s("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br")])],-1),_=e('<h2 id="tester-2" tabindex="-1">Tester <a class="header-anchor" href="#tester-2" aria-label="Permalink to &quot;Tester&quot;">â€‹</a></h2><ul><li>Ouvrer la <a href="https://console.firebase.google.com/" target="_blank" rel="noreferrer">console de Firebase</a> rendez-vous dans la partie <code>Database</code>.</li><li>Lancer votre projet local <code>npm run serve</code>.</li><li>Cliquer sur la carte.</li><li>Que constatez-vous ?</li></ul><h2 id="afficher-les-markers" tabindex="-1">Afficher les markers <a class="header-anchor" href="#afficher-les-markers" aria-label="Permalink to &quot;Afficher les markers&quot;">â€‹</a></h2><p>Les markers ne s&#39;affichent pas ? C&#39;est normal! Pour l&#39;instant nous n&#39;avons pas mis le code permettant de les afficher. C&#39;est l&#39;Ã©tape Ã  laquelle nous sommes.</p><p>La logique va Ãªtre simpliste, nous devons afficher TOUS les Ã©lÃ©ments contenus dans la variable <code>markerList</code> dÃ©clarÃ©e prÃ©cÃ©demment.</p><p>Les Ã©tapes :</p><ul><li>Utilisation de <a href="https://vue2-leaflet.netlify.app/components/LMarker.html" target="_blank" rel="noreferrer">l-marker</a></li><li>Le mettre en place dans le <code>l-map</code> en suivant la documentation.</li><li>Mise en place d&#39;une boucle v-for.</li><li>etâ€¦ c&#39;est tout</li><li>Essayer sans regarder la solution.</li></ul>',7),D=s("p",null,[i("Le marker est Ã  mettre dans le "),s("code",null,"l-map"),i(".")],-1),P=s("div",{class:"language-html vp-adaptive-theme line-numbers-mode"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"html"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"l-marker")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  v-for"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"(marker,i) in markerList"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  :key"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"i"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  :lat-lng"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"marker"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"></"),s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"l-marker"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">")])])]),s("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br")])],-1),x=s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},"Nous avons"),s("p",null,"Nous avons donc ici :"),s("ul",null,[s("li",null,"Un Ã©lÃ©ment que nous allons rÃ©pÃ©ter autant de fois que nous avons d'enregistrement en base de donnÃ©es."),s("li",null,[s("code",null,":key"),i(" qui permet d'optimiser les affichages.")]),s("li",null,[s("code",null,":lat-lng"),i(" qui positionne le marker (le picto) Ã  l'endroit du click.")])])],-1),V=e(`<h2 id="tester-3" tabindex="-1">Tester <a class="header-anchor" href="#tester-3" aria-label="Permalink to &quot;Tester&quot;">â€‹</a></h2><p>Toujours avec <code>npm run serve</code>, normalement des markers doivent s&#39;afficher. Tenter d&#39;en ajouter d&#39;autres.</p><h2 id="suppression-d-un-marker" tabindex="-1">Suppression d&#39;un marker <a class="header-anchor" href="#suppression-d-un-marker" aria-label="Permalink to &quot;Suppression d&#39;un marker&quot;">â€‹</a></h2><p>Bon maintenant qu&#39;il y a plein de marker partout nous allons mettre en place le code pour les supprimer ! VoilÃ  la procÃ©dure Ã  suivre :</p><ul><li>Ajout d&#39;une mÃ©thode <code>removeMarker</code></li></ul><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeMarker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(markerKey) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.$firebaseRefs.markerList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(markerKey).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>Ajouter la directive sur <code>l-marker</code> :</li></ul><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@click=&quot;() =&gt; removeMarker(marker[&#39;.key&#39;])&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">Qu&#39;avons nous ici ?</p><p><code>() =&gt; removeMarker(marker[&#39;.key&#39;])</code> ReprÃ©sente une fonction qui sera appelÃ©e au click. Cette fonction dÃ©clenchera la suppression du marker. Le <code>marker[&#39;.key&#39;]</code> est l&#39;identifiant de l&#39;Ã©lÃ©ment que l&#39;on souhaite supprimer.</p><p>le <code>â€¦[&#39;.key&#39;]</code> est automatiquement ajoutÃ© par la librairie <code>Vuefire</code>.</p></div><h2 id="tester-4" tabindex="-1">Tester <a class="header-anchor" href="#tester-4" aria-label="Permalink to &quot;Tester&quot;">â€‹</a></h2><p>Tenter de supprimer un marker en cliquant dessus.</p><h2 id="tester-a-plusieurs" tabindex="-1">Tester Ã  plusieurs <a class="header-anchor" href="#tester-a-plusieurs" aria-label="Permalink to &quot;Tester Ã  plusieurs&quot;">â€‹</a></h2><p>AccÃ©der Ã  plusieurs au mÃªme projet (via votre IP) pour tester la synchronisation.</p><h2 id="centrer-la-carte-sur-votre-position" tabindex="-1">Centrer la carte sur votre position <a class="header-anchor" href="#centrer-la-carte-sur-votre-position" aria-label="Permalink to &quot;Centrer la carte sur votre position&quot;">â€‹</a></h2><p>Profitons des nouvelles fonctionnalitÃ©s de nos navigateurs pour amÃ©liorer notre carte. Actuellement la carte est centrÃ©e sur Angersâ€¦ C&#39;est pratiqueâ€¦ Si on se trouve Ã  Angersâ€¦ dans tous les autres cas, ce nâ€™est pas forcÃ©ment adaptÃ©. Nous allons donc utiliser l&#39;API <code>geolocation</code> de notre navigateur.</p><p>Celle-ci permet de localiser une personne en fonction de sa connexion Internet (ou GPS / RÃ©seau tÃ©lÃ©phonique si disponible)</p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Geolocation_API" target="_blank" rel="noreferrer">Documentation de l&#39;API geolocation</a>.</li><li>Ajouter une mÃ©thode dans le code dans le composant <code>map.vue</code>.</li><li>La mÃ©thode doit mettre Ã  jour la Data <code>this.center = [lat, lng]</code>.</li><li>La mÃ©thode doit Ãªtre appelÃ©e via un clique utilisateur <a href="https://vue2-leaflet.netlify.app/examples/custom-control.html" target="_blank" rel="noreferrer">Documentation de LControl</a></li></ul>`,17),L=s("p",null,[i("template : Dans le "),s("code",null,"l-map")],-1),T=s("div",{class:"language-html vp-adaptive-theme line-numbers-mode"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"html"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"l-control"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> <"),s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"button"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," @click"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"getUserLocation"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">Localisez-moi</"),s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"button"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> </"),s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"l-control"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">")])])]),s("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[s("span",{class:"line-number"},"1"),s("br")])],-1),M=s("p",null,"methods :",-1),w=s("div",{class:"language-js vp-adaptive-theme line-numbers-mode"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"js"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getUserLocation"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  if"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"geolocation"'),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," in"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," navigator) {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    navigator.geolocation."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getCurrentPosition"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"      position"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," =>"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        this"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".$refs.myMap.mapObject."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"setView"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"([position.coords.latitude, position.coords.longitude], "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"22"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      },")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"      error"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," =>"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        console."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"error"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(error);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      }")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    );")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  }")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),s("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br")])],-1),S=e(`<h3 id="integrer-bootstrap" tabindex="-1">IntÃ©grer Bootstrap <a class="header-anchor" href="#integrer-bootstrap" aria-label="Permalink to &quot;IntÃ©grer Bootstrap&quot;">â€‹</a></h3><p>En utilisant la documentation fournie sur le site de <a href="https://bootstrap-vue.org/docs" target="_blank" rel="noreferrer">Vue-Bootstrap</a></p><p>Modifier l&#39;affichage du <code>button</code> prÃ©cÃ©demment ajoutÃ© pour lui donner un style plus propre.</p><h3 id="ajouter-une-confirmation" tabindex="-1">Ajouter une confirmation <a class="header-anchor" href="#ajouter-une-confirmation" aria-label="Permalink to &quot;Ajouter une confirmation&quot;">â€‹</a></h3><p>Actuellement la suppression d&#39;un Marker est faite sans confirmation. En utilisant le composant <a href="https://bootstrap-vue.org/docs/components/modal#confirm-message-box" target="_blank" rel="noreferrer">Dialog de VueBootstrap</a> ajoutez une confirmation de suppression.</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.$bvModal.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">msgBoxConfirm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Are you sure?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">confirmation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Confirmation peut-Ãªtre true ou false en fonction du choix de l&#39;utilisateur.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="personalisation-du-marker" tabindex="-1">Personalisation du Marker <a class="header-anchor" href="#personalisation-du-marker" aria-label="Permalink to &quot;Personalisation du Marker&quot;">â€‹</a></h3><p>La carte est basiqueâ€¦ beaucoup trop ! Et si nous placions des markers diffÃ©rents en fonction du navigateur de l&#39;utilisateur. Je vous laisse rÃ©flÃ©chir Ã  comment nous pouvons faire Ã§a :</p><ul><li>Ã€ la fois dans le code.</li><li>Ã€ la fois dans la base de donnÃ©es.</li></ul><h3 id="modification-du-marker" tabindex="-1">Modification du Marker <a class="header-anchor" href="#modification-du-marker" aria-label="Permalink to &quot;Modification du Marker&quot;">â€‹</a></h3><p>En utilisant Â« Une Dialog Â» de Bootstrap ajouter le code nÃ©cessaire Ã  la modification du Marker :</p><ul><li>Un click sur un Marker permet de choisis une nouvelle icÃ´ne.</li><li>Un bouton Â« valider Â» enregistre la modification.</li></ul><h3 id="ajouter-une-ui-a-votre-projet" tabindex="-1">Ajouter une UI Ã  votre projet <a class="header-anchor" href="#ajouter-une-ui-a-votre-projet" aria-label="Permalink to &quot;Ajouter une UI Ã  votre projet&quot;">â€‹</a></h3><p>Actuellement nous avons une carte pleine page qui s&#39;affiche dÃ¨s notre arrivÃ©e sur le site Internet. C&#39;est pratique, mais finalement je souhaite avoir une interface plus classique avec une NavBar (comme celle de bootstrap).</p><p>En utilisant mes talents de design, voilÃ  l&#39;interface que je souhaite obtenir. Vous noterez que j&#39;ai en haut deux boutons me permettant d&#39;accÃ©der Ã  deux fonctions de mon site (Carte &amp; Liste).</p><ul><li>La Vue carte, est similaire Ã  celle actuelle, elle nâ€™est par contre pas pleine page.</li><li>La Vue liste est une vision liste de l&#39;ensemble des points prÃ©sent en base de donnÃ©es.</li></ul><p><img src="`+b+'" alt="Ã‰volution" loading="lazy"></p><div class="danger custom-block"><p class="custom-block-title">Vous allez avoir besoin de plug-in</p><p>Je vous rappelle, que si vous souhaitez avoir plusieurs pages dans votre projet. Vous allez avoir besoin du plug-in Vue Router.</p><p>Je vous laisse choisir la bonne faÃ§on de l&#39;installer.</p><p><a href="https://router.vuejs.org/installation.html#npm" target="_blank" rel="noreferrer">Vue Router</a></p></div>',18);function I(N,z,R,J,U,Q){const a=h("Reveal");return o(),p("div",null,[v,n(a,{text:"Voir la solution"},{default:l(()=>[F,f,C,q,j]),_:1}),B,n(a,{text:"Voir la solution"},{default:l(()=>[A]),_:1}),_,n(a,{text:"Voir la solution"},{default:l(()=>[D,P,x]),_:1}),V,n(a,{text:"Voir la solution"},{default:l(()=>[L,T,M,w]),_:1}),S])}const K=r(y,[["render",I]]);export{G as __pageData,K as default};
