import{_ as s,a as e,b as i,c as a,d as n,e as t}from"./chunks/le_contenu.PE7MFgD4.js";import{_ as l,c as r,o as p,U as d}from"./chunks/framework.aGaNZw_P.js";const o="/assets/server_bdd.D1nShcBy.png",h="/assets/exemple_MLD.DS0HBqlW.png",u="/assets/pagination.DgyK4rq4.png",k="/assets/sql_join.B2TeAuPH.png",f=JSON.parse('{"title":"ComplÃ©ment Cours Base de donnÃ©es","description":"","frontmatter":{},"headers":[],"relativePath":"tp/php/sql/support.md","filePath":"tp/php/sql/support.md","lastUpdated":1619182110000}'),c={name:"tp/php/sql/support.md"},g=d('<h1 id="complement-cours-base-de-donnees" tabindex="-1">ComplÃ©ment Cours Base de donnÃ©es <a class="header-anchor" href="#complement-cours-base-de-donnees" aria-label="Permalink to &quot;ComplÃ©ment Cours Base de donnÃ©es&quot;">â€‹</a></h1><p>Nous allons maintenant voir la base de donnÃ©es via le PHP. La base de donnÃ©es est un Ã©lÃ©ment important des systÃ¨mes d&#39;information moderne.</p><details class="details custom-block"><summary>Table des matiÃ¨res</summary><nav class="table-of-contents"><ul><li><a href="#introduction">Introduction</a></li><li><a href="#php-et-les-base-de-donnees">PHP et les base de donnÃ©es</a></li><li><a href="#le-langage-sql">Le langage SQL</a></li><li><a href="#modeliser-la-base-de-donnees">ModÃ©liser la base de donnÃ©es</a></li><li><a href="#les-contraintes">Les Contraintes</a></li><li><a href="#les-cardinalites">Les cardinalitÃ©s</a></li><li><a href="#cles-etrangere-et-comportement">ClÃ©s Ã©trangÃ¨re et comportement</a></li><li><a href="#phpmyadmin">PHPMyAdmin</a></li><li><a href="#sql-le-langage-de-requetage">SQL : Le langage de requÃªtage</a></li><li><a href="#obtenir-des-donnees">Obtenir des donnÃ©es</a><ul><li><a href="#gerer-de-la-pagination">GÃ©rer de la pagination</a></li><li><a href="#ordre-de-recuperation">Ordre de rÃ©cupÃ©ration</a></li><li><a href="#obtenir-de-donnees-de-plusieurs-tables">Obtenir de donnÃ©es de plusieurs tables</a></li></ul></li><li><a href="#ajouter-des-donnees">Ajouter des donnÃ©es</a></li><li><a href="#modifier-des-donnees">Modifier des donnÃ©es</a></li><li><a href="#supprimer-une-donnee">Supprimer une donnÃ©e</a></li><li><a href="#sql-et-php">SQL et PHP</a><ul><li><a href="#utils-db-php">utils/db.php</a></li></ul></li><li><a href="#requete-prepare-ou-requete-normal">RequÃªte prÃ©parÃ© ou requÃªte normal ?</a></li><li><a href="#pratiquer">Pratiquer</a></li></ul></nav></details><div class="warning custom-block"><p class="custom-block-title">Un instant</p><p>La base de donnÃ©es est un vaste sujet. Nous avons ici une introduction Ã  ce qu&#39;il faut connaitre au minimum pour avancer dans nos diffÃ©rents projets.</p><p><a href="/cheatsheets/sql/">Voir l&#39;aide mÃ©moire SQL</a></p></div><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">â€‹</a></h2><p>Une base de donnÃ©es va Ãªtre en charge de sauvegarder et d&#39;organiser les donnÃ©es pour qu&#39;il soit utilisable. Nous avons actuellement deux types de bases de donnÃ©es :</p><ul><li>Relationnelle</li><li>Non Relationnelle</li></ul><p>Les bases de donnÃ©es relationnelles, est celle que l&#39;on rencontre pour l&#39;instant le plus, mais Ã§a change petit Ã  petit et vous rencontrerez trÃ¨s certainement (et trÃ¨s rapidement des BDD non relationnelles).</p><p>Pour faire simple, une base de donnÃ©es Â« Relationnelle Â», indique que la structure et les rÃ¨gles de validations de vos donnÃ©es seront portÃ©es par votre <strong>moteur de base de donnÃ©es</strong>.</p><p>Une base de donnÃ©es non relationnelle sera plus ouverte. Elle stocke de l&#39;information sans forcÃ©ment avoir de structure forte. Votre logique de donnÃ©es et la validation des Ã©lÃ©ments en base seront traitÃ©es par <strong>votre code</strong>.</p><p><img src="'+o+'" alt="Serveur de base de donnÃ©es" loading="lazy"></p><h2 id="php-et-les-base-de-donnees" tabindex="-1">PHP et les base de donnÃ©es <a class="header-anchor" href="#php-et-les-base-de-donnees" aria-label="Permalink to &quot;PHP et les base de donnÃ©es&quot;">â€‹</a></h2><p>Dans le cours PHP, nous utiliserons des bases de donnÃ©es relationnelles, plus tard avec le JavaScript nous utiliserons des bases de donnÃ©es non relationnelles.</p><p>Il existe plusieurs systÃ¨mes de base de donnÃ©es (MySQL, Oracle, MariaDB, Postgresql, â€¦). PHP est compatible avec presque tous les systÃ¨mes de base de donnÃ©es Â« connu Â» et Ã§a par dÃ©faut ! Il intÃ¨gre une API qui s&#39;appelle <a href="https://www.php.net/manual/fr/book.pdo.php" target="_blank" rel="noreferrer">PDO</a>, cette API est de base avec PHP, il suffit juste de l&#39;utiliser.</p><div class="tip custom-block"><p class="custom-block-title">Petite note</p><p>AprÃ¨s avoir longtemps Â« stagnÃ© Â» le PHP, depuis quelques annÃ©es change, s&#39;adapte, se modernise. Les bonnes pratiques en PHP pour l&#39;accÃ¨s aux Bases de donnÃ©es (BDD) ont changÃ© pour que celle-ci soit plus sÃ©curisÃ©e.</p><p>Les exemples que vous pourriez trouver en ligne peuvent Ãªtre pour la plupart Â« obsolÃ¨te Â». Je vous conseille vivement de regarder la documentation officielle, plutÃ´t qu&#39;une simple recherche Google.</p></div><p><img src="'+s+'" alt="PDO &amp; MYSQLi" loading="lazy"></p><p>MySQL Ã©tant intÃ©grÃ© Ã  XAMPP / WAMP je vais l&#39;utiliser dans la suite de mon cours. Mais rien ne vous empÃªche d&#39;utiliser d&#39;autre systÃ¨me tel que PostgreSQL.</p><h2 id="le-langage-sql" tabindex="-1">Le langage SQL <a class="header-anchor" href="#le-langage-sql" aria-label="Permalink to &quot;Le langage SQL&quot;">â€‹</a></h2><p>Nous allons maintenant voir un gros sujet. Nous avons vu qu&#39;il Ã©tait possible de stocker des donnÃ©es dans des bases de donnÃ©es. Ces entrepÃ´ts de donnÃ©es sont le coeur de nos programmes modernes, tous les programmes que vous allez rÃ©aliser existent toujours pour afficher, traiter, emmagasiner de l&#39;information ; cette donnÃ©e est le coeur de votre mÃ©tier encore plus sur Internet.</p><p>Nous allons donc prendre un peu de temps, pour voir comment :</p><ul><li>ModÃ©liser.</li><li>Sauvegarder.</li><li>RequÃªter.</li></ul><p>Nous allons donc modÃ©liser les bases de donnÃ©es grÃ¢ce Ã  des MLD et nous rÃ©cupÃ¨rerons / modifierons les donnÃ©es avec le langage SQL (le mot langage est important).</p><h2 id="modeliser-la-base-de-donnees" tabindex="-1">ModÃ©liser la base de donnÃ©es <a class="header-anchor" href="#modeliser-la-base-de-donnees" aria-label="Permalink to &quot;ModÃ©liser la base de donnÃ©es&quot;">â€‹</a></h2><p>ModÃ©liser une base de donnÃ©es est une Ã©tape trÃ¨s importante, elle fait partie intÃ©grante de la phase de conception et <strong>elle ne doit surtout pas Ãªtre nÃ©gligÃ©e</strong>.</p><p>Cette Ã©tape de modÃ©lisation doit Ãªtre faite avant chaque crÃ©ation d&#39;une base de donnÃ©es, mais Ã©galement lors de la modification de celle-ci, je pense qu&#39;il est intÃ©ressant de faire Ã§a en dehors d&#39;un ordinateur avec une simple feuille de papier; vous pouvez bien Ã©videmment utiliser un outil en ligne pour crÃ©er votre modÃ©lisation.</p><p>Cette modÃ©lisation s&#39;appelle un <strong>MLD</strong> (ModÃ¨le Conceptuel de DonnÃ©es), ce MLD va regrouper l&#39;ensemble de la structure de notre base de donnÃ©es (nom des tables, nom des colonnes, types de donnÃ©es), mais Ã©galement les contraintes <strong>relationnelles</strong>, c&#39;est-Ã -dire les contraintes entre les tables (nombre maximum, jointures, etc.)</p><p>Pour rÃ©aliser le MLD nous avons plusieurs solutions :</p><ul><li>Avec un papier et un crayon.</li><li><a href="https://dbdiagram.io/home" target="_blank" rel="noreferrer">DBDiagram</a></li><li><a href="http://draw.io/" target="_blank" rel="noreferrer">draw.io</a></li></ul><p>Avant d&#39;aller plus loin, nous allons modÃ©liser ensemble une premiÃ¨re base de donnÃ©es trÃ¨s simple. Cette base de donnÃ©es sera la suivante :</p><ul><li>Des Utilisateurs (Identifiant, Nom, PrÃ©nom, Date de naissance, Sexe, Code Pays).</li><li>Des pays (Code Pays, Nom)</li></ul><p>Un MLD repose toujours sur le mÃªme principe, c&#39;est un ensemble de Â« rectangle Â» reliÃ© ensemble par des traits.</p><table><thead><tr><th>Table</th></tr></thead><tbody><tr><td><u>#idTable (int)</u></td></tr><tr><td>nom (varchar)</td></tr><tr><td>prÃ©nom (varchar)</td></tr></tbody></table><p><em>Nous avons donc :</em></p><ul><li>Un rectangle.</li><li>En titre le nom de la table.</li><li>En dessous la liste des champs avec le type de la donnÃ©e. <ul><li>L&#39;Ã©lÃ©ment soulignÃ© est une clÃ© (Ã©galement prÃ©fixÃ© par un <code>#</code>)</li></ul></li></ul><div class="tip custom-block"><p class="custom-block-title">Une clÃ© ?</p><p>Une clÃ© ou un identifiant sont une colonne que l&#39;on va Â« marquer Â» comme Ã©tant particuliÃ¨re. Cette colonne va Ãªtre utilisÃ©e par le moteur de base de donnÃ©es pour :</p><ul><li>Obligatoire.</li><li>ReprÃ©sente une valeur unique dans la base.</li><li>Effectuer des opÃ©rations sur la table (UPDATE, DELETE, â€¦).</li><li>Permettre la jointure entre les tables.</li><li>NommÃ©e correctement</li></ul><p>âš ï¸ Vous devez <strong>toujours</strong> avoir une clÃ© âš ï¸</p></div><p>Maintenant que nous avons posÃ© la base, rÃ©flÃ©chissons Ã  notre problÃ©matique Â« Utilisateurs et Pays Â».</p><details class="details custom-block"><summary>VoilÃ  Ã  quoi Ã§a peut ressembler</summary><p><img src="'+h+'" alt="Exemple de MLD" loading="lazy"></p></details><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Ne vous inquiÃ©tez pas, nous allons nous entrainer de multiple fois.</p></div><p><img src="'+e+'" alt="MCD" loading="lazy"></p><h2 id="les-contraintes" tabindex="-1">Les Contraintes <a class="header-anchor" href="#les-contraintes" aria-label="Permalink to &quot;Les Contraintes&quot;">â€‹</a></h2><ul><li>La clÃ© primaire sert Ã  identifier une ligne de maniÃ¨re unique.</li><li>La clÃ© Ã©trangÃ¨re permet de gÃ©rer des relations entre plusieurs tables, <strong>et garantissent la cohÃ©rence des donnÃ©es.</strong></li><li>L&#39;INDEX est utilisÃ© pour accÃ©lÃ©rer les requÃªtes indispensable Ã  la crÃ©ation de clÃ©s primaires et de clÃ©s Ã©trangÃ¨res.</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Ne vous inquiÃ©tez pas, nous allons nous entrainer de multiple fois.</p></div><h2 id="les-cardinalites" tabindex="-1">Les cardinalitÃ©s <a class="header-anchor" href="#les-cardinalites" aria-label="Permalink to &quot;Les cardinalitÃ©s&quot;">â€‹</a></h2><p>Les cardinalitÃ©s seront les liens entre nos tables, elle vont dans les schÃ©mas relationnels en modÃ©lisation des donnÃ©es, sert Ã  compter le nombre minimum et maximum de possibilitÃ©s que chaque classe contient dans la relation liant deux ou plusieurs objets.</p><table><thead><tr><th style="text-align:center;">CardinalitÃ©s</th><th style="text-align:center;">Usages</th></tr></thead><tbody><tr><td style="text-align:center;">0..1</td><td style="text-align:center;">Aucune ou une instance</td></tr><tr><td style="text-align:center;">1</td><td style="text-align:center;">Une instance exactement</td></tr><tr><td style="text-align:center;">0..* ou *</td><td style="text-align:center;">Aucune ou plusieurs instances</td></tr><tr><td style="text-align:center;">1..*</td><td style="text-align:center;">Une instance ou plusieurs (au moins une)</td></tr></tbody></table><h2 id="cles-etrangere-et-comportement" tabindex="-1">ClÃ©s Ã©trangÃ¨re et comportement <a class="header-anchor" href="#cles-etrangere-et-comportement" aria-label="Permalink to &quot;ClÃ©s Ã©trangÃ¨re et comportement&quot;">â€‹</a></h2><p>Nous avons vu ensemble qu&#39;il Ã©tait possible de dÃ©finir des liens entre les tables, c&#39;est ce que l&#39;on appelle des contraintes, les contraintes ont plusieurs comportements possibles en cas de modifications :</p><ul><li>NO ACTION</li><li>CASCADE</li><li>SET NULL</li><li>SET DEFAULT</li></ul><p>Il est possible de combiner CASCADE, SET NULL, SET DEFAULT et NO ACTION pour des tables liÃ©es par des relations.</p><p>Nous allons donc pouvoir dÃ©finir le comportement que le moteur de base de donnÃ©es va avoir en cas de :</p><ul><li>Suppression (ON DELETE)</li><li>De mise Ã  jour (ON UPDATE)</li></ul><div class="tip custom-block"><p class="custom-block-title">L&#39;objectif est l&#39;intÃ©gritÃ© des donnÃ©es</p><p>L&#39;important dans une base de donnÃ©es relationnelle c&#39;est de s&#39;assurer que les donnÃ©es sont Â« cohÃ©rentes Â». Le concept de comportement en cas de suppression est donc primordial.</p><p>Le moteur de base de donnÃ©es sera en charge de s&#39;assurer que la donnÃ©e reste logique et cohÃ©rente en fonction des rÃ¨gles que <strong>vous</strong> avez dÃ©finies lors de la conception de la base de donnÃ©es.</p></div><h2 id="phpmyadmin" tabindex="-1">PHPMyAdmin <a class="header-anchor" href="#phpmyadmin" aria-label="Permalink to &quot;PHPMyAdmin&quot;">â€‹</a></h2><p>PHPMyAdmin est un outil qui va nous permettre d&#39;administrer notre serveur de base de donnÃ©es. Celui-ci est intÃ©grÃ© Ã  votre serveur XAMPP, vu que c&#39;est un site Internet il sera directement accessible par votre navigateur :</p><p><a href="http://localhost/phpmyadmin/" target="_blank" rel="noreferrer">AccÃ©der Ã  PHPMyAdmin</a></p><p><img src="'+i+'" alt="PhpMyAdmin" loading="lazy"></p><p>L&#39;interface de PHPMyAdmin est dÃ©coupÃ©e en 3 morceaux :</p><p><em>La liste des bases de donnÃ©es</em>:</p><p><img src="'+a+'" alt="Les BDD" loading="lazy"></p><p><em>Les actions possibles</em>:</p><p><img src="'+n+'" alt="Les BDD" loading="lazy"></p><p><em>La partie centrale sera diffÃ©rente en fonction de la page / actions (contenu, crÃ©ation, etc)</em>:</p><p><img src="'+t+`" alt="Les BDD" loading="lazy"></p><div class="tip custom-block"><p class="custom-block-title">Un instant</p><p>Avant d&#39;aller plus loin, nous allons faire le tour ensemble de l&#39;interface de phpMyAdmin. Pour dÃ©couvrir quelques fonctionnalitÃ©s.</p><p>ğŸ‘‹ phpMyAdmin est trÃ¨s complet et permet de tout faire. <strong>Mais</strong> ce n&#39;est pas le seul outil qui permet d&#39;administrer une base de donnÃ©es, nous avons Ã©galement :</p><ul><li><a href="https://www.mysql.com/fr/products/workbench/" target="_blank" rel="noreferrer">MySQLWorkbench (gratuit)</a></li><li><a href="https://www.jetbrains.com/datagrip/features/" target="_blank" rel="noreferrer">DataGrip (payant)</a></li><li><a href="https://dbeaver.io/" target="_blank" rel="noreferrer">DBeaver (gratuit)</a></li></ul><p>D&#39;ailleurs, je vous propose de tester DBeaver si Ã§a vous dit.</p></div><h2 id="sql-le-langage-de-requetage" tabindex="-1">SQL : Le langage de requÃªtage <a class="header-anchor" href="#sql-le-langage-de-requetage" aria-label="Permalink to &quot;SQL : Le langage de requÃªtage&quot;">â€‹</a></h2><p>Nous avons un langage Â« universel Â» pour accÃ©der / manipuler une base de donnÃ©es. Ce langage est dÃ©coupÃ© en 4 grandes catÃ©gories.</p><table><thead><tr><th>CatÃ©gorie</th><th>Mot-clÃ©</th><th>Usage</th></tr></thead><tbody><tr><td>DÃ©finition d&#39;une base</td><td><code>CREATE</code>, <code>ALTER</code>, <code>TRUNCATE</code>, <code>DROP</code>, <code>RENAME</code></td><td>Structure de la base</td></tr><tr><td>Manipulation des donnÃ©es</td><td><code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code>, <code>MERGE</code></td><td>Gestion des donnÃ©es en base</td></tr><tr><td>Transaction</td><td><code>COMMIT</code>, <code>ROLLBACK</code></td><td>Groupement d&#39;opÃ©rations</td></tr><tr><td>ContrÃ´le d&#39;accÃ¨s</td><td><code>GRANT</code>, <code>REVOKE</code></td><td>Droit d&#39;accÃ¨s aux donnÃ©es</td></tr><tr><td>AccÃ¨s aux donnÃ©es</td><td><code>SELECT</code></td><td>RÃ©cupÃ©ration d&#39;enregistrements de table(s)</td></tr></tbody></table><h2 id="obtenir-des-donnees" tabindex="-1">Obtenir des donnÃ©es <a class="header-anchor" href="#obtenir-des-donnees" aria-label="Permalink to &quot;Obtenir des donnÃ©es&quot;">â€‹</a></h2><p>Comme vu prÃ©cÃ©demment le SQL va nous permettre diffÃ©rentes opÃ©rations autour des tables de notre base donnÃ©es. Celle que nous allons nous servir le plus est Â« l&#39;obtention de donnÃ©es Â». L&#39;obtention de donnÃ©es se rÃ©alise avec la commande.</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>La commande <code>SELECT</code> permet d&#39;obtenir des donnÃ©es. Cette requÃªte est trÃ¨s simple elle est <strong>toujours</strong> formÃ©e de la mÃªme maniÃ¨re Ã  savoir :</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> quoi </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> votreTable </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> condition(s);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><code>quoi</code> : Ce que vous souhaitez obtenir, <code>*</code> pour l&#39;ensemble, sinon <code>nom_colonne</code> sÃ©parÃ© par des virgules.</li><li><code>table</code> : La table que vous souhaitez requÃªter.</li><li><code>condition(s)</code> : La ou les condition(s) que vous souhaitez appliquer Ã  votre rÃ©cupÃ©ration de donnÃ©es.</li></ul><p><em>Quelques exemples :</em></p><p>Avec une table telle que</p><table><thead><tr><th>#id</th><th>nom</th><th>prenom</th><th>age</th><th>pays</th></tr></thead><tbody><tr><td>1</td><td>Brosseau</td><td>Valentin</td><td>33</td><td>FR</td></tr><tr><td>2</td><td>Doe</td><td>John</td><td>14</td><td>US</td></tr><tr><td>3</td><td>Bernard</td><td>Michel</td><td>56</td><td>FR</td></tr></tbody></table><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- RÃ©cupÃ¨re l&#39;ensemble des utilisateurs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Utilisateur de plus de 18ans</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> age </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 18</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Utilisateurs de plus de 18ans et de France</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> age </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 18</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> AND</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pays </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;FR&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Nom et PrÃ©nom des Utilisateurs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nom, prenom </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><table><thead><tr><th>Liste des opÃ©rateurs de conditions</th></tr></thead><tbody><tr><td>=</td></tr><tr><td>&gt;</td></tr><tr><td>&lt;</td></tr><tr><td>=&gt;</td></tr><tr><td>&gt;=</td></tr><tr><td>!=</td></tr><tr><td>BETWEEN</td></tr><tr><td>LIKE</td></tr><tr><td>IN</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">C&#39;est Ã  vous</p><ul><li>Nous allons maintenant crÃ©er notre premiÃ¨re <code>base de donnÃ©es</code> et notre premiÃ¨re <code>table</code> grÃ¢ce Ã  PHPMyAdmin.</li><li>InsÃ©rer un jeu de donnÃ©es fictif.</li><li>RÃ©aliser des requÃªtes pour s&#39;entrainer.</li></ul></div><h3 id="gerer-de-la-pagination" tabindex="-1">GÃ©rer de la pagination <a class="header-anchor" href="#gerer-de-la-pagination" aria-label="Permalink to &quot;GÃ©rer de la pagination&quot;">â€‹</a></h3><p>Rapidement vous allez devoir faire des requÃªtes avec de la pagination, c&#39;est-Ã -dire avec un nombre restreint de rÃ©sultats pour gÃ©rer des choses que vous avez certainement dÃ©jÃ  vu :</p><p><img src="`+u+`" alt="Pagination exemple" loading="lazy"></p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- PremiÃ¨re page (0 Ã  10)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OFFSET </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Seconde page (10 Ã  20)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OFFSET </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--- â€¦</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="ordre-de-recuperation" tabindex="-1">Ordre de rÃ©cupÃ©ration <a class="header-anchor" href="#ordre-de-recuperation" aria-label="Permalink to &quot;Ordre de rÃ©cupÃ©ration&quot;">â€‹</a></h3><p>Trier les rÃ©sultats est aussi Ã©galement utile.</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Trier page age croissante</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ORDER BY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> age </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ASC</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Trier page age dÃ©croissante</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ORDER BY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> age </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DESC</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="obtenir-de-donnees-de-plusieurs-tables" tabindex="-1">Obtenir de donnÃ©es de plusieurs tables <a class="header-anchor" href="#obtenir-de-donnees-de-plusieurs-tables" aria-label="Permalink to &quot;Obtenir de donnÃ©es de plusieurs tables&quot;">â€‹</a></h3><p>Votre donnÃ©es peut-Ãªtre Â« dÃ©coupÃ©e Â» dans plusieurs table afin d&#39;Ã©viter les doublons. Cette opÃ©ration est <strong>trÃ¨s courante</strong> en SQL, en effet il est important de dÃ©couper la donnÃ©es dans plusieurs tables pour Ã©viter la redondances d&#39;informations (comme vu ensemble prÃ©cÃ©demment).</p><p>Cette opÃ©ration en SQL est appelÃ© une <code>jointure</code>. Nous avons plusieurs faÃ§on de joindre les donnÃ©es</p><p><img src="`+k+`" alt="Jointure SQL" loading="lazy"></p><div class="danger custom-block"><p class="custom-block-title">Trop de choix ?</p><p>Le choix dÃ©pend des donnÃ©es et des opÃ©rations que vous souhaitez faire. Mais sachez que dans 90% du temps ce que vous souhaiter faire c&#39;est un <strong>LEFT JOIN</strong>.</p></div><div class="tip custom-block"><p class="custom-block-title">C&#39;est Ã  vous</p><p>Nous allons Ã  nouveau mettre en pratique. Nous allons crÃ©er une seconde table. Nous allons crÃ©er une table de <code>pays</code> elle contiendra la liste des pays en lien avec la table <code>utilisateurs</code> crÃ©Ã© prÃ©cÃ©demment.</p><table><thead><tr><th>#code</th><th>nom</th><th>iso_code</th></tr></thead><tbody><tr><td>FR</td><td>France</td><td>FRA</td></tr><tr><td>DE</td><td>Allemagne</td><td>DEU</td></tr><tr><td>IT</td><td>Italie</td><td>ITA</td></tr></tbody></table><ul><li>InsÃ©rer une liste de pays suffisamment importante</li><li>CrÃ©er la requÃªte qui permet d&#39;afficher les informations du pays en plus de l&#39;utilisateur</li></ul></div><h2 id="ajouter-des-donnees" tabindex="-1">Ajouter des donnÃ©es <a class="header-anchor" href="#ajouter-des-donnees" aria-label="Permalink to &quot;Ajouter des donnÃ©es&quot;">â€‹</a></h2><p>Nous avons vu qu&#39;il Ã©tait possible d&#39;ajouter des donnÃ©es via une interface graphique (PHPMyAdmin), mais bien Ã©videmment notre code va Ã©galement devoir ajouter des donnÃ©es. Les requÃªtes d&#39;ajout de donnÃ©es s&#39;appellent un <code>INSERT</code>, cette requÃªte prend la forme suivante :</p><p><em>Ajout de certains champs</em>:</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">insert into</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs (nom, prenom, age) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">values</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Test&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Insert&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">22</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><em>Tout les champs</em>:</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INSERT INTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VALUES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">99</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Test&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Insert&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;IT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="modifier-des-donnees" tabindex="-1">Modifier des donnÃ©es <a class="header-anchor" href="#modifier-des-donnees" aria-label="Permalink to &quot;Modifier des donnÃ©es&quot;">â€‹</a></h2><p>Ce type de requÃªte s&#39;appelle un <code>UPDATE</code>, c&#39;est Ã©galement disponible directement dans PHPMyAdmin mais comme l&#39;<code>INSERT</code> nous serons amenÃ© Ã  le faire directement dans le code.</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UPDATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;valentin&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> WHERE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Valentin-Update&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UPDATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Valentine&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="supprimer-une-donnee" tabindex="-1">Supprimer une donnÃ©e <a class="header-anchor" href="#supprimer-une-donnee" aria-label="Permalink to &quot;Supprimer une donnÃ©e&quot;">â€‹</a></h2><p>Pour supprimer une donnÃ©e il suffit de</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DELETE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utilisateurs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="danger custom-block"><p class="custom-block-title">ATTENTION</p><p>Attention !!! Si vous oubliez le <strong>WHERE</strong> vous allez vider l&#39;ensemble de la table. (Et aucun retour en arriÃ¨re possible)</p></div><h2 id="sql-et-php" tabindex="-1">SQL et PHP <a class="header-anchor" href="#sql-et-php" aria-label="Permalink to &quot;SQL et PHP&quot;">â€‹</a></h2><p>Nous allons maintenant Ã©crire le code qui va nous permettre d&#39;accÃ©der Ã  la base de donnÃ©es. En PHP, nous avons Ã  notre disposition plusieurs connecteurs SQL (API).</p><ul><li>mysql_* (dÃ©prÃ©ciÃ©, n&#39;existe plus, mais vous trouverez encore peut-Ãªtre des exemples en ligne <strong>Ã  Ã©viter</strong>)</li><li>MySQLi (le remplacement de mysql_*)</li><li>PDO (PDO_MySQL)</li></ul><p>Nous avons donc deux possibilitÃ©s, la diffÃ©rence entre les deux ? Il y en a plusieurs, mais PDO Ã  un grand avantage c&#39;est qu&#39;il permet de changer simplement de base de donnÃ©es (via des connecteurs pour MariaDB, Oracle, â€¦). Ã€ mon avis <strong>PDO</strong> est doit-Ãªtre votre choix par dÃ©faut dans le cas d&#39;un nouveau projet.</p><p><img src="`+s+`" alt="PDO vs MySQL" loading="lazy"></p><p>Nous allons travailler intelligemment, nous allons utiliser les includes et les variables pour Ã©viter de mettre le code de la connexion Ã  la base de donnÃ©es dans chaque page de notre site.</p><p>Nous allons Ã©galement Â« sortir Â» / Â« mettre Â» en variables les informations de connexion Ã  notre base de donnÃ©es Ã  savoir :</p><ul><li>l&#39;IP du serveur de base de donnÃ©es.</li><li>Le login.</li><li>Le mot de passe.</li><li>Le nom de la base de donnÃ©es</li></ul><p>ğŸ”¥ L&#39;organisation est trÃ¨s importante ! Cette Ã©tape de Â« dÃ©coupage Â» peut paraitre superflue, mais c&#39;est lÃ  oÃ¹ se jouera votre rÃ©ussite.</p><h3 id="utils-db-php" tabindex="-1">utils/db.php <a class="header-anchor" href="#utils-db-php" aria-label="Permalink to &quot;utils/db.php&quot;">â€‹</a></h3><p>Nous allons Ã©crire dans ce fichier le code nous permettant de nous connecter Ã  la base de donnÃ©es. Cette partie du code est fournie directement dans la documentation PHPâ€¦ Comme je suis sympa, je vous fournis directement le code :</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Cette partie est Ã  customiser</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;localhost&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$db </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;bart&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;root&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$passwd </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Fin de la partie customisable</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Cette partie est gÃ©nÃ©rique Ã  l&#39;ensemble de vos projets utilisant une base de donnÃ©es.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$dsn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;mysql:host=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">;dbname=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$db</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$pdo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PDO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($dsn, $user, $passwd);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>ğŸ”¥ Et c&#39;est tout ! VoilÃ , si vous utilisez un <code>include</code> du fichier <code>utils/db.php</code> votre code sera connectÃ© Ã  la base de donnÃ©es et vous pourrez rÃ©aliser des requÃªtes SQL.</p><div class="tip custom-block"><p class="custom-block-title">Nous venons d&#39;Ã©crire une <code>librairie</code></p><p>Ce que vous venez d&#39;Ã©crire est une Â« librairie Â», vous allez pouvoir rÃ©utiliser ce code autant de fois que vous le souhaitez. Il est gÃ©nÃ©rique, vous n&#39;avez plus qu&#39;Ã  le Â« copier / coller Â» dans vos diffÃ©rents projets nÃ©cessitant une base de donnÃ©es.</p></div><h2 id="requete-prepare-ou-requete-normal" tabindex="-1">RequÃªte prÃ©parÃ© ou requÃªte normal ? <a class="header-anchor" href="#requete-prepare-ou-requete-normal" aria-label="Permalink to &quot;RequÃªte prÃ©parÃ© ou requÃªte normal ?&quot;">â€‹</a></h2><p>Nous avons deux faÃ§ons d&#39;Ã©crire les requÃªtes avec PDO :</p><ul><li>Les requÃªtes Â« classique Â».</li><li>Et les requÃªtes prÃ©parÃ©es.</li></ul><p>Dans quel cas utiliser l&#39;un, et dans quel cas utiliser l&#39;autre ? C&#39;est simple, vous avez des valeurs variables (paramÃ¨tres, saisie utilisateur, etc.) ?</p><ul><li><strong>OUI</strong> : RequÃªte prÃ©parÃ©e.</li><li><strong>NON</strong> : RequÃªte classique.</li></ul><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// RequÃªte prÃ©parÃ©e :</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$results </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $pdo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetchAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\PDO</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">FETCH_ASSOC</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$stmt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $pdo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">prepare</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> phrases </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$stmt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">execute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">22</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ParamÃ¨tre qui va remplacer le Â« ? Â».</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$results </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $stmt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetchAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\PDO</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">FETCH_ASSOC</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// RequÃªte classique</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$results </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $pdo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> phrases&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetchAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\PDO</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">FETCH_ASSOC</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="pratiquer" tabindex="-1">Pratiquer <a class="header-anchor" href="#pratiquer" aria-label="Permalink to &quot;Pratiquer&quot;">â€‹</a></h2><p>Nous allons maintenant mettre en pratique avec deux projets :</p><ul><li><a href="/tp/php/sql/tp5.html">Persister Bart en Base de donnÃ©es</a></li><li><a href="/tp/php/sql/tp6.html">Greta TV personnalisable</a></li></ul>`,128),m=[g];function E(b,y,v,F,q,D){return p(),r("div",null,m)}const P=l(c,[["render",E]]);export{f as __pageData,P as default};
