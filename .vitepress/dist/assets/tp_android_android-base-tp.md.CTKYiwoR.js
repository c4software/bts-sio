import{_ as i}from"./chunks/sync.C-wA2TXQ.js";import{_ as a,c as e,o as n,U as s,k as l}from"./chunks/framework.aGaNZw_P.js";const t="/assets/avd.D5LBtKvm.jpg",r="/assets/change_icon.CxEdTIdw.png",p="/assets/split.TsViunQ5.png",h="/assets/create_new_resources.CyG-rxZj.png",o="/assets/resources.UQb5XYa_.png",d="/assets/resources_strings.C6Z_7IMg.png",k="/assets/exemple_res_alt.C4QWCeAI.png",c="/assets/constrainte.tCbpKTVr.png",u="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdsAAAD2CAAAAAC7VHK0AAAPmUlEQVR4AezRMQ0AAAACIPtH9rKHgwqkr3DrFre4xS1ucesWt7jFLW5x6xa3uMUtbnGLW7e4xS1ucYtbt7jFLW5xi1vcusUtbnGLW9y6HXv0jJhBHMQB9LTzX+92sW1bXdTFdhW0sZ3P1q8KLhHM5F3h/QCko/7H26sLbq5uH/3RNOTeIu07muuvK/AMRcwYXn5t3+yBLwWJt8j6Dscqvlq5UrpbMXrwmoG0W/i2Wjziz23YfIOoW/jXK02SwSxfe4Wc2+x5v0NyOJ1nGSG3iK4UKZJEFS5GIeEWoUmPpHEmfAJuc4/9OsmjdzzkuN/ibdAkifT+Z+a3eOtRJJPqeAXnWySmLZLKnIyC7y0ymxbJZS1kGN+elZNkhSc5trfhPo0kUz1BrrfYc0k2Zws8b/HaQNLVvIDlbW7TJenstQzL22gT/ftgzy6cGkvSAID/b+c3QoQkT9q7X4IzjLu74rrLjTHu7u6OrfsyCwmDBuKQdy8vwWpZkq26stR9M9B5X3d/TdUvX3S3LxttIx2l7v9HyetIFtoGzrjnDi0RySEV0+Y448KdWYHkOBGCc6FNTs+6IU3Fifjf4B4OZKGtd08aGUExNRg0nhg5JURMQTFR4qZaGllOMBOJGwwD1QyAKSwpwsKcZoSwmSVSO/44BEOTlfhcx2eOv6Un+2wj7cvT2JINTWuI5hZ4a9NyTJadWE1NW8EoF6g+ehrMpWAu3FdXlNDjtLqutramtra2vlJ2hr0SMx15YyPhM+lQzVHC5qjJWdNEpX1YzEXLKRMZ4S7+EMk629DNojS26vlIiyrcXLkdaVDh0egVohlpQRavFAzURE9IaWyZ6OhfhxO24he/3x8OG79+cFjCPXZq2hb09pbNhOTKb5HldI6azOM3IhIa9vtbwVy2nK1ZnMBPHwXXgllnGzjkSWMrXdBbDD/uuqvXy3DVzS0JW43jt4OrkVoVPe5kIvUoLbjQEiGMmBop7fSvQmbfllcdqAoO7S+vPiBZQj1WlFjP2fGTlBvtbe5O2oKDVxmbkUqVT11yWld1oFH37S6v3o2FEcn85IaJp3MNL9bfSSyTxvU0j2SdrX+vO61t/GjC1nnHsCWKolDNoIWOVwNlLldl9OhCSAFJGAJEAWSCY1WGGkmMxPjPKWkfXoGS9wfgkId9OU6AoTXU/S8XA4hzKMuQc6ISqmBuGgksGSlBVWT8Z0lOLVGOqMaK5AXI5fqP/5YApsg8RhieVMWJv0AzphVKjGrUla+/WghFJri7B7POdnDdn7GV4PqTG4hhSzad6AperwYV0Zb1tx82EMIJ2HH96YW1gKLdLSvPPqFYLTj26F4TQ4S0Di9Dqc5GyN/rxELDtlA3O/HkXCmg/NAhTCFvevD4SBE06ThoPkUognV3npxarCY1BSw48ujh0QIoUpVgXvwnKxFMKT728F4dg1wQXHn36bk1gHFYeOjJw0ah0qbLelfLepqJ7dq+rLMdWJyB7ZFcTJHttl7vkg9GD0Ph1nBzd3Cs9zGtiHX3dI9EzssInhnp6/IPbJGl6yFvwM/l1d+NdvsC9znA74eWmrZGYOzvdRFNI7bQ6E/evugXharb60WAvwz29IS+y8OJdczZFcOA3gh++i34y2okzFYu/SrQ7Q13FJNkJQ3l6z/bqICrfwwYx7wuQATdDPo+BgY3qTDvp+BHX/g9IB+8erC7nmRiW9abdbZ9Belt9eZ/WGw5f79h2LqaY4dUw5Z6SlqHthW4KseGazzbR3uoc7u/YwU/EHwD7Nfiffu3AntrpMFT2BraLqG3Q4tnsR2/XVraNrbfybw+1VURfJHveaAfBwlIau8aB9Kmoc4y7Zz+WBWJtgXX4qfdhS8jlXCGLUWtoRZP0eP4Jae6L/hhETscu++SjsWvsZLOWJVcuF5vzXOzTGwLvNln605re14f7evv7+8LxQ3bz01btyCu1wOLZbkydiXXqbQPL3VcCe7IsatfeJdZrsbq7UB1j305z76wXL9uB68Hy2axHZAd1s/0czbi9SmOQ9Hm+bbil0ewlrJVnfuil+bZ8Itryb5FJ28j67y62AkgptkSuGKs1S67PL7ufHnvnbXWhfkD7TD3TmTLfNvGl7VQKtRfW3Bm74J6ss/Wk4FtV2tbW9uHXn3KVuPqm4FlUK2KHnMg9GpkpfxmoPhfC+bdG96YczW0VeHqFv3mX+f/K09/Y1VfDZbOYtuTg6Qq/ao1YesqD36/zmp3AjZpa/Ttx/1Wm0NJvp2mstWiFR+LnQFCm2ar1OpnHJTgt0MbFMW+EBdv7e/EzpZ42yKjGmSwRH+dyzL7Ejf7bPtLMnhMPrTQKTnn34rPZntcItiwVTrj4VAoNBbYadhuB1zZr8eM67D+hQ28GCzFs9jasFKlX7Ng4zEZwDMD4a/KGeATtkCFn/VFv28SKjNtCWz8GPIH46dVPs0WS4f1Zokz+HBkhyxt7AiOjox3YoAf+YPvt6I/ZVviyzrbgeUZ2Jqvpey3p/Wt+3e2X4RePHz86PH91daroR2Gbbn+44NHjx89OSPhF4Nl5A9s40lbBOWNryOh5xqetAXItfZWOPp2CU7elaqDXc2bLsV+Zxv/PGF7f2SHY3HX6IWtVUOdBAG448vYyC1EYEk8U9tln7LOdnhbBrZHJaFx5505+7a1v8TqkiQV5iZshbo7fvXfDkmSISb7D3rYnH2rAAKcjsUfxq/IImWrKgQ6HUUPx1tdPJFSvxvKt+VUR2faEqVBP+FkFL0Y3pB7LlRts+V/SvSt6nCu/yl2SAFm32b0qfKWgayzHanNzDb5/nam7RJFrkzZrnI+DGyyq6oCkMO0hUvjrfMkoCiIYUWC3D2XrUwvPi5zWspG2ySeslVcJ1+vcljRcL/5sTMp8v0oO6w10TPKDFu4Pv4yR1XZj73F6lP/aruj8FMnzLt90+PM2RO+a9paMSeI8HS41cNZZxs8V5ChretuvF5yNadshfQkuIu7JmzXWCtCH0pk7eAtkXvNsNWI45doOQYrXuxEeEOlmOxb4u+VErb2CVsrMWzVy+HTRNoXeeiasFWdR6I3Ndeq8A9OlkiRXwLr6Kqv4pem962dEvR1oBbAlvG7ucq1aAvLvz7+FQEvA/VAaYmeVZA29h1n6urz61Aa2/zTgayzDT9dlMZWvqgfUwxb6Z7eKMsHY0egaauciPfcJFXRkwqlr0fWS/Tt2C/vvg50FDhvhHchjasV/uHODz2hBuhuG9k+8dEQ4f5ehWoGfbjHQdQa/Yad+3xAXt4d/LJ1ILQdCPOzi4/jSC75Jvz9B2/4YPLpXboU7/3a6xt7hFK2uEj/2cE42DM43N4R+HWZqu4aHf3258HRn4pcm0Ij7e2jgysQoR+j31U4HsSfq2lsix+Fs842+tPGNLao4t4erLkFqr+3FaEdd3eZThohlzsu0A139mHOD91YihH6/FXn6xaGYM3t1YYek1ffamu/sx4Q+p97Jam+1bi4fglzY1a9fREwsulejcovXaIELLrU1nFnAzDXcXD+HiXQc+5d56PtkCWPw83v2o+uuHGKiaQtK7h3FnCNKctvtH04kQc4VXY+7biz/NjlJVhZe6Oj/coywDla96xjp7TnVXm6vl39QzT7bIca0thyBBDXzBEzjkHq43qBYT5H0JgTDAIiOJaph6qEG7pYaAYfNHoFQiYo4USkqglqZIzJxEiFUQ1RYt4yFnugQWvWNgoaKaQKD1JpMiWI0b+ypEBziZkACfbEMW6hIK5pFBAPlBRAOAPA41ahkWOA5xOCBOZpbA8MZqFt+HFeGtypb9A0I8yL5PfePPXtWjKpCc640Kat54wlJ2Z8UydSNiK1MVnX3D2xbJaUkUueN7NSMs+N5RO3klun54RmJNPQ/pe9e0AOIIiCAHrZ2LZt2yxvIbadQmzbHvwpJefozr/CW+9Mt/+IBbSVm0Tf/0k4EUBbp3oD6GkDur4w9xVsJ9Dbxm5aSFv33eVHTuvX9o261+s0ndw29UhAbZ0eDaOmDR5WuHurn5v9mK/IVU8CnHdxnk2Mm3UgyDk1Zj2Z99V2TWPnS5nZWFLamEmNngv3s8B55sbNfTt0W1HLKYS0STNK0G3/Rm8XBZLJBhZsKY78ZLnqjaCiDe2+EJZsbPleLwuhkQ0uXfwWor4Cez+Yw3FhDsjuvzNkXRT2daE+PhgcNiiubvrFCF8/kH3bHixPCsKFTSwd2HqzpN1PYtXD9pzXWV9diTXV9R3eL3t3TAQACEUxDPyrQgMDEjDAwN+wwb1LLFRAx9znVvnx8XdbtEVbtEVbbdEWbdEWbdEWbbVFW7RFW7RFW23RFm3RFm3RVlu0RVu0RVu0RVtt0RZt0RZt0VZbtEVbtEVbtEVbbdEWbdEWbdFWW7RFW7RFW7RFW23RFm3RFm3RVlu0RVu0RVu0RVtt0RZt0RZt0VZbtEVbtEVbtNV2paLFAQAAAAAAAAAAoL926gE4li2KwvAez3vXtm3btm3btm3btm3btu04mZnus645KQXdVSf7Kxt/rZVx1egYxEKNvUSLjAbSg6nsHSg7U1PoYOa0C167TkQjHVhqPxWqUA9nMZC2IsR2F5Gkk7DfawAiEWnP3sMDAevPAXeLaxs38Q6Bf4l9yUguUZteccDPW5e20cZ6C68RkdNsceJhQxtpqL4L4l9wNSOZWEvuc0C90XkOoH3beGsdeNvKThRjtgPe3f8n7TQBto362zqgDcnDkmr+S6hvpqeyjtZht2m2K+JJLcu3AY/wguf4yJq2bUh/KydV29gjngI+K3KZyDha+93mviJwNb+BvjF3eguxKAG3DRlRm5xzCL8zFSIR6dDWXPMmXHuy0k/WqveF82AaA7cNASU2uID7XWIR6dHW2uQDlHXx6Q9FLwmcLcBtg8uUY66Hqr4YlcxI+rQd4gGfsdHpT4YUh5zqy8LcNnhi9noihHN1cQORPm2NvvAYYqN/JF3twmqt2go522a4GCAcx2uGJ9KtLbA+PLmJ9QFbebfBMlXAd0IMIl3bLjOTm//ecdtgau0L9XGjGH+3FdxWhrb/d3sM+G7PZ+LdSteWDNEmPITwWZvFwruVrS2RNfc2B8Td/hF5t9K1JbKVO+kP5UbzKLxb6doSxW37WsBvS0ED71aCtm51x7wQCFic08i7la4tWYtvUYW43S3KmLC2W4Eza/92DKINScVUab8TuH0mjLWtHQA3IqARSSZB9ycKoPknP9+5w81uh1ZtYy7x8PyXx8rYJJ0EU18BnvG1bOtE4MRGClHMXmDt/YF20o5h1tOXgXpYk2uw4GCMMcYYY4wxxhhjjDHGGGOMMcY+A/gz+nIj/7aEAAAAAElFTkSuQmCC",E="/assets/viewBinding.DrEN4RDy.png",g="/assets/create_activity.L0qbE9cq.png",m="/assets/create_activity2.BbgjPesn.png",b="/assets/splash.B2butT74.png",y="/assets/vector_asset.COMkBXS2.png",v="/assets/vector_asset2.DOzpMFbw.png",F="/assets/sample_ui_test.CetvUT6O.png",C="/assets/flow_permissions.BBoHiED8.png",f="/assets/layout_locate_me.Dreb52OU.png",A="/assets/layout_list_item.DOUrp5CT.png",q="/assets/list_item_sample.CKpKeUg1.png",B="/assets/rv_sample_settings.CFoJwHTV.png",M=JSON.parse(`{"title":"D√©couverte des bases d'Android","description":"La premi√®re √©tape est la cr√©ation d'un projet. Pour √ßa nous allons utiliser ¬´ Android Studio ¬ª qui est l'IDE √† utiliser pour cr√©er une application Android.","frontmatter":{"description":"La premi√®re √©tape est la cr√©ation d'un projet. Pour √ßa nous allons utiliser ¬´ Android Studio ¬ª qui est l'IDE √† utiliser pour cr√©er une application Android."},"headers":[],"relativePath":"tp/android/android-base-tp.md","filePath":"tp/android/android-base-tp.md","lastUpdated":1704112852000}`),D={name:"tp/android/android-base-tp.md"},L=s('<h1 id="decouverte-des-bases-d-android" tabindex="-1">D√©couverte des bases d&#39;Android <a class="header-anchor" href="#decouverte-des-bases-d-android" aria-label="Permalink to &quot;D√©couverte des bases d&#39;Android&quot;">‚Äã</a></h1><details class="details custom-block"><summary>Sommaires</summary><nav class="table-of-contents"><ul><li><a href="#creer-un-projet">Cr√©er un projet</a></li><li><a href="#creation-de-l-emulateur">Cr√©ation de l&#39;√©mulateur</a></li><li><a href="#les-textes">Les textes</a></li><li><a href="#decouverte-des-dossiers">D√©couverte des dossiers</a></li><li><a href="#le-fichier-androidmanifest">Le fichier AndroidManifest</a><ul><li><a href="#a-faire">√Ä faire :</a></li></ul></li><li><a href="#personnalisation-de-votre-application">Personnalisation de votre application</a></li><li><a href="#les-layouts">Les layouts</a><ul><li><a href="#a-faire-1">√Ä faire :</a></li><li><a href="#les-ressources-alternatives">Les ressources alternatives</a></li><li><a href="#a-faire-2">√Ä faire :</a></li><li><a href="#les-dimensions-et-contraintes">Les dimensions et contraintes</a></li><li><a href="#a-faire-3">√Ä faire :</a></li></ul></li><li><a href="#l-activity">L&#39;activity</a><ul><li><a href="#a-faire-4">√Ä faire :</a></li><li><a href="#la-snackbar">La Snackbar</a></li></ul></li><li><a href="#rendre-un-element-clickable">Rendre un √©l√©ment clickable</a><ul><li><a href="#a-faire-5">√Ä faire</a></li></ul></li><li><a href="#rendre-un-element-clickable-2">Rendre un √©l√©ment clickable 2</a><ul><li><a href="#a-faire-6">√Ä faire</a></li><li><a href="#les-kotlin-android-extension">Les Kotlin Android Extension</a></li><li><a href="#creer-une-autre-activity">Cr√©er une autre activity</a></li></ul></li><li><a href="#demarrer-une-activite-avec-des-parametres">D√©marrer une activit√© avec des param√®tres</a><ul><li><a href="#dans-l-activity-a-demarrer">Dans l&#39;activity √† d√©marrer</a></li><li><a href="#dans-l-activity-qui-va-lancer-l-autre-activity">Dans l&#39;activity qui va lancer l&#39;autre activity</a></li></ul></li><li><a href="#theme-et-drawable">Th√®me et Drawable</a><ul><li><a href="#a-faire-7">√Ä faire</a></li></ul></li><li><a href="#theme-de-couleurs">Th√®me de couleurs</a><ul><li><a href="#a-faire-8">√Ä faire</a></li></ul></li><li><a href="#les-intent-externes-tierces">Les Intent externes / tierces</a><ul><li><a href="#ouvrir-les-parametres-bluetooth">Ouvrir les param√®tres Bluetooth</a></li><li><a href="#ouvrir-un-lien-web">Ouvrir un lien web</a></li><li><a href="#ouvrir-google-maps">Ouvrir Google Maps</a></li><li><a href="#a-faire-9">√Ä faire</a></li></ul></li><li><a href="#les-permissions">Les Permissions</a></li><li><a href="#declaration-des-permissions">D√©claration des permissions</a><ul><li><a href="#permission-acceptee">Permission accept√©e ?</a></li><li><a href="#demander-la-permission">Demander la permission</a></li><li><a href="#methode-surchargee-apres-l-acceptation">M√©thode surcharg√©e apr√®s l&#39;acceptation</a></li><li><a href="#obtenir-la-localisation">Obtenir la localisation</a></li><li><a href="#bonus-obtenir-l-adresse-par-rapport-au-lat-long">BONUS ! Obtenir l&#39;adresse par rapport au lat, long</a></li><li><a href="#a-faire-10">√Ä faire</a></li></ul></li><li><a href="#les-recyclerview">Les Recyclerview</a></li><li><a href="#les-¬´-plugins-¬ª-librairies">Les ¬´ Plugins ¬ª / Librairies</a><ul><li><a href="#les-dialogs">Les Dialogs</a></li><li><a href="#avec-le-material-design-de-google">Avec le Material Design de Google</a></li><li><a href="#recyclical">Recyclical</a></li></ul></li><li><a href="#activite-¬´-parametres-¬ª">Activit√© ¬´ Param√®tres ¬ª</a><ul><li><a href="#la-classe-localpreferences-aka-sauvegarder-des-parametres">La classe LocalPreferences (AKA Sauvegarder des param√®tres)</a></li></ul></li></ul></nav></details><div class="danger custom-block"><p class="custom-block-title">XML ou Compose ?</p><p>Nous sommes en 2023, le monde d&#39;Android √©volue‚Ä¶ Pendant des ann√©es l&#39;√©criture des ¬´ layouts ¬ª (interface) n&#39;√©tait possible que via du XML. Il est maintenant possible d&#39;√©crire les layouts de mani√®res bien plus modernes avec <a href="https://developer.android.com/jetpack/compose" target="_blank" rel="noreferrer">JetPack Compose</a>. Le TP que vous suivez est toujours valide, mais repose sur l&#39;utilisation de XML.</p></div><h2 id="creer-un-projet" tabindex="-1">Cr√©er un projet <a class="header-anchor" href="#creer-un-projet" aria-label="Permalink to &quot;Cr√©er un projet&quot;">‚Äã</a></h2><p>La premi√®re √©tape est la cr√©ation d&#39;un projet. Pour √ßa nous allons utiliser ¬´ Android Studio ¬ª qui est l&#39;IDE √† utiliser pour cr√©er une application Android.</p><p>Lors de la cr√©ation, Android Studio va nous poser plusieurs questions, nous allons donc choisir :</p><ul><li>Template : Empty View Activity</li><li>Language : Kotlin</li><li>SDK Min. : SDK 26.</li></ul><p>Je vous laisse suivre les √©tapes de cr√©ation d&#39;un nouveau projet.</p><div class="warning custom-block"><p class="custom-block-title">Mais quelques petites remarques :</p><ul><li>Le choix du package est tr√®s important. Comme nous avons vu ensemble en cours, le ¬´ Package ¬ª doit √™tre unique. En effet deux applications ne peuvent pas avoir le m√™me.</li><li>Choisir un min SDK qui correspond aux cibles des mobiles souhait√©s. (Si vous √™tes en France ou dans un autre pays, il conviendra de faire le bon choix).</li><li>Kotlin est maintenant le langage √† choisir, Java et Kotlin cohabite sans probl√®me vous n&#39;aurez donc aucun probl√®me de compatibilit√©.</li></ul></div><h2 id="creation-de-l-emulateur" tabindex="-1">Cr√©ation de l&#39;√©mulateur <a class="header-anchor" href="#creation-de-l-emulateur" aria-label="Permalink to &quot;Cr√©ation de l&#39;√©mulateur&quot;">‚Äã</a></h2><p>Comme vu ensemble pendant le cours, l&#39;√©mulateur va nous permettre de tester ¬´ simplement ¬ª notre application avec des performances <em>suffisante dans les cas simple</em>. La cr√©ation de celui-ci est int√©gr√©e √† Android Studio. Dans Android Studio la partie √©mulateur s&#39;appelle Device Manager et est disponible dans le menu <code>tools</code></p><p><img src="'+t+'" alt="AVD" loading="lazy"></p><p>Pour le choix du type de devices vous √™tes libres‚Ä¶ Mais le mieux est de choisir un ¬´ template de mobile ¬ª assez repr√©sentatif de ce que l&#39;on trouve chez les clients. Un bon choix est par exemple un ¬´ Pixel 6a ¬ª avec Android Oreo.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Le Logo Playstore pr√©sent sur la ligne d&#39;un simulateur indique que celui-ci est √©quip√© des Play Services. Bien que dans notre cas √ßa ne change pas grand-chose, je vous invite vivement √† choisir un √©mulateur avec les Play Services, car celui-ci sera tr√®s proche d&#39;un vrai t√©l√©phone trouvable dans le commerce.</p></div><p>Maintenant que votre √©mulateur est cr√©√©, nous allons pouvoir lancer l&#39;application ¬´ Run -&gt; Run App ¬ª.</p><h2 id="les-textes" tabindex="-1">Les textes <a class="header-anchor" href="#les-textes" aria-label="Permalink to &quot;Les textes&quot;">‚Äã</a></h2><p>Android est une plateforme ¬´ ouverte ¬ª et nativement pr√©vue pour fonctionner dans le monde entier (Android pour tous). Il est donc logique que le i18n (internationalisation) soit int√©gr√© et ~m√™me recommand√©~ obligatoire pour tout bon d√©veloppeur.</p><p>L&#39;ensemble des textes de votre application <em>doit √™tre</em> dans le fichier <code>values/strings.xml</code>. Je vous laisse y jeter un petit coup d&#39;≈ìil üëÄ</p><h2 id="decouverte-des-dossiers" tabindex="-1">D√©couverte des dossiers <a class="header-anchor" href="#decouverte-des-dossiers" aria-label="Permalink to &quot;D√©couverte des dossiers&quot;">‚Äã</a></h2><p>En compl√©ment de ce dont je vous ai parl√© en cours, je vous laisse quelques minutes d√©couvrir l&#39;ensemble des dossiers. Je vous laisse regarder plus en d√©tail le dossier <code>res</code>, mais √©galement les fichiers <code>gradle</code>.</p><p>Quelques points d&#39;attentions :</p><ul><li>Le dossier <code>res</code>.</li><li>Les images d√©j√† pr√©sentes dans votre projet, notamment le XML pour l&#39;ic√¥ne.</li><li>La structure en g√©n√©ral et l&#39;organisation en <code>package</code> qui reprend votre choix lors de la configuration.</li></ul><h2 id="le-fichier-androidmanifest" tabindex="-1">Le fichier AndroidManifest <a class="header-anchor" href="#le-fichier-androidmanifest" aria-label="Permalink to &quot;Le fichier AndroidManifest&quot;">‚Äã</a></h2><p>Pour rappel le fichier manifest va nous permettre d&#39;exposer ¬´ de la configuration ¬ª relative √† votre application sur le t√©l√©phone, cette configuration est tr√®s large :</p><ul><li>Le nom de votre application.</li><li>Les <code>activity</code> accessibles.</li><li>L&#39;ic√¥ne de votre application.</li><li>Les services de votre application.</li><li>Les param√©trages sp√©cifiques de vos activit√©s (Orientation, th√®me, comportement‚Ä¶)</li></ul><h3 id="a-faire" tabindex="-1">√Ä faire : <a class="header-anchor" href="#a-faire" aria-label="Permalink to &quot;√Ä faire :&quot;">‚Äã</a></h3><ul><li>√âditer le fichier <code>AndroidManifest.xml</code>.</li><li>Changer le nom de votre application (attention √† bien utiliser la m√©canique <code>i18n</code>).</li><li>Regarder l&#39;ensemble des param√®tres sp√©cifier dans le XML</li><li>Tester √† nouveau votre application</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Petit raccourci pratique d&#39;Android Studio. Si vous appuyez deux fois sur la touche <kbd>Shift</kbd><kbd>Shift</kbd> Android Studio vous proposera de chercher des actions / fichiers / menus dans l&#39;ensemble de votre projet.</p></div><h2 id="personnalisation-de-votre-application" tabindex="-1">Personnalisation de votre application <a class="header-anchor" href="#personnalisation-de-votre-application" aria-label="Permalink to &quot;Personnalisation de votre application&quot;">‚Äã</a></h2><p>Changer l&#39;ic√¥ne de l&#39;application en utilisant les outils fournis par Google dans Android Studio ¬´ Image asset ¬ª :</p><p><img src="'+r+'" alt="Change Icon" loading="lazy"></p><p>Une fois fait, regarder les modifications dans votre projet.</p><p><em>Notamment :</em></p><ul><li>Le fichier <code>AndroidManifest.xml</code> est-ce que celui-ci a √©t√© modifi√© ?</li><li>Si oui, quel(s) √©l√©ment(s) sont diff√©rents ?</li><li>Si non, pouvez-vous me dire pourquoi ?</li></ul><h2 id="les-layouts" tabindex="-1">Les layouts <a class="header-anchor" href="#les-layouts" aria-label="Permalink to &quot;Les layouts&quot;">‚Äã</a></h2><p>Si vous avez ouvert le fichier <code>activity_main.xml</code> vous avez certainement constat√© que celui-ci √©tait tr√®s simple. Nous allons donc le modifier un petit peu.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Android Studio vous propose un √©diteur graphique de l&#39;interface, c&#39;est pratique, mais pour apprendre ce n&#39;est pas id√©al. Je vous propose de changer de mode d&#39;√©dition afin de passer en mode XML via la vue <code>Split</code>. Qui nous affichera √† la fois le graphique ainsi que le XML.</p><p><img src="'+p+'" alt="SPLIT" loading="lazy"></p></div><h3 id="a-faire-1" tabindex="-1">√Ä faire : <a class="header-anchor" href="#a-faire-1" aria-label="Permalink to &quot;√Ä faire :&quot;">‚Äã</a></h3><ul><li>√âditer le layout <code>activity_main.xml</code>.</li><li>Ajouter une balise ImageView.</li><li>Ajouter √©galement une balise Button.</li></ul><h3 id="les-ressources-alternatives" tabindex="-1">Les ressources alternatives <a class="header-anchor" href="#les-ressources-alternatives" aria-label="Permalink to &quot;Les ressources alternatives&quot;">‚Äã</a></h3><p>Android int√®gre la gestion des ressources ¬´ alternative ¬ª, c&#39;est-√†-dire la possibilit√© de charger automatiquement des ressources en fonction de conditions li√©es au t√©l√©phone du client type :</p><ul><li>Taille de l&#39;√©cran.</li><li>Langue.</li><li>Rotation de l&#39;√©cran (Paysage / Portrait).</li><li>DPI</li><li>Th√®me sombre</li><li>Version d&#39;Android</li><li>etc.</li></ul><p>Cette cr√©ation de ressource est r√©alisable directement depuis Android Studio :</p><p><img src="'+h+'" alt="Create new resources" loading="lazy"><img src="'+o+'" alt="Cr√©ation de ressources alternatives" loading="lazy"></p><div class="tip custom-block"><p class="custom-block-title">Vous pouvez tout red√©finir</p><p>L&#39;ensemble des ressources (<code>res</code>) est red√©finissable sans √©crire de code. Par exemple si vous souhaitez red√©finir des <code>strings</code> dans diff√©rentes conditions il suffit de :</p><p><img src="'+d+'" alt="Popup de cr√©ation" loading="lazy"><img src="'+k+`" alt="Ressources alternatives" loading="lazy"></p></div><h3 id="a-faire-2" tabindex="-1">√Ä faire : <a class="header-anchor" href="#a-faire-2" aria-label="Permalink to &quot;√Ä faire :&quot;">‚Äã</a></h3><ul><li>√âditer le layout <code>activity_main.xml</code>.</li><li>Ajouter une balise TextView.</li><li>Dans le <code>android:text</code> utiliser une strings <code>android:text=&quot;@strings/monString&quot;</code>.</li><li>Celle-ci doit √™tre diff√©rente en fonction si l&#39;utilisateur a son t√©l√©phone en paysage (<code>land</code>) ou en portrait.</li><li>Ajuster √©galement la taille du logo pour que celui-ci soit plus petit si le t√©l√©phone est en portrait (<code>land</code>).</li></ul><h3 id="les-dimensions-et-contraintes" tabindex="-1">Les dimensions et contraintes <a class="header-anchor" href="#les-dimensions-et-contraintes" aria-label="Permalink to &quot;Les dimensions et contraintes&quot;">‚Äã</a></h3><p>Vous avez donc ajout√© deux nouveaux √©l√©ments dans votre layout, mais ils n&#39;ont n&#39;y taille ni ¬´ positions ¬ª. En effet, comme vu ensemble en cours, nous utilisons un layout de type ¬´ ConstraintLayout ¬ª c&#39;est-√†-dire que vos √©l√©ments doivent √™tre contraints les uns par rapport aux autres.</p><p>Vous allez donc devoir ajouter les attributs suivants sur vos deux nouveaux √©l√©ments :</p><div class="language-xml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">VotreElement</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    android:id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;@+id/monElement&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    android:layout_width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;wrap_content&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    android:layout_height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;wrap_content&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    app:layout_constraintBottom_toBottomOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;parent&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    app:layout_constraintEnd_toEndOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;parent&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    app:layout_constraintStart_toStartOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;parent&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    app:layout_constraintTop_toTopOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;parent&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><em>Un peu d&#39;explication :</em></p><ul><li><code>android:id</code> permet de rendre l&#39;√©l√©ment accessible depuis le code, ou tout simplement depuis un autre √©l√©ment afin de d√©finir une contrainte.</li><li><code>android:layout_width</code> et <code>android:layout_height</code> d√©finisse la taille de votre √©l√©ment. <code>wrap_content</code> indique que la taille doit √™tre celle du contenu. Je vous laisse d√©couvrir les autres propri√©t√©s avec <kbd>alt</kbd> + <kbd>entr√©e</kbd> sur <code>wrap_content</code>.</li><li><code>app:layout_constraint‚Ä¶</code> d√©finissent les contraintes entre l&#39;√©l√©ment et les autres √©l√©ments de layout. Dans notre cas ¬´ parent ¬ª signifie que les contraintes seront avec le parent, c&#39;est-√†-dire la fen√™tre dans le cas pr√©sent.</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Si vous souhaitez contraindre un √©l√©ment avec un autre, la syntaxe sera la m√™me, mais vous allez devoir indiquer une contrainte du type <code>&quot;@id/imageView&quot;</code>.</p></div><h3 id="a-faire-3" tabindex="-1">√Ä faire : <a class="header-anchor" href="#a-faire-3" aria-label="Permalink to &quot;√Ä faire :&quot;">‚Äã</a></h3><p>Je vous laisse r√©aliser l&#39;ensemble des contraintes afin que votre layout ressemble √† :</p><p><img src="`+c+'" alt="Constrainte" loading="lazy"></p><p>‚ö†Ô∏è Vous noterez l&#39;ic√¥ne de Playmoweb, je vous laisse l&#39;ajouter dans le dossier <code>drawable</code> de votre projet. Le fichier doit √™tre au format <code>png</code> ou <code>jpeg</code>. Une fois celle-ci ajout√©e modifier l&#39;ImageView pour l&#39;utiliser dans l&#39;<code>ImageView</code> avec par exemple <code>app:srcCompat=&quot;@drawable/logo&quot;</code>.</p><p>‚úã Relancer l&#39;application et tester que celle-ci fonctionne.</p><h2 id="l-activity" tabindex="-1">L&#39;activity <a class="header-anchor" href="#l-activity" aria-label="Permalink to &quot;L&#39;activity&quot;">‚Äã</a></h2><p>Nous avons une activity qui pour l&#39;instant ne fait pas grand-chose. Si vous regardez le code, celui-ci est presque vide. Je vous propose de la modifier, en premier lieu nous allons ajouter un message au lancement de celle-ci.</p><p>Un message simple sur Android s&#39;appelle un Toast :</p><p><img src="'+u+`" alt="Ceci est un toast" loading="lazy"></p><p>Ajouter celui-ci dans la m√©thode <code>onCreate</code> de votre <code>MainActivity.kt</code>.</p><p>Vous pouvez utiliser la compl√©tion de votre IDE, <code>toast</code> puis <kbd>tab</kbd>.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Les toasts sont rapides et simples √† mettre en place. Cependant, ils ne sont pas tr√®s beaux. C&#39;est pour √ßa que nous les utiliserons principalement que pour ¬´ les informations de tests ou sans grandes importances ¬ª.</p></div><h3 id="a-faire-4" tabindex="-1">√Ä faire : <a class="header-anchor" href="#a-faire-4" aria-label="Permalink to &quot;√Ä faire :&quot;">‚Äã</a></h3><ul><li>Ajouter le Toast.</li><li>Le context, comme vu ensemble pendant le cours correspond √† votre <code>activity</code> donc il faut indiquer <code>this</code>.</li><li>Pour le texte, pensez bien √† mettre celui-ci dans le fichier <code>strings.xml</code> puis √† le r√©cup√©rer via <code>getString(R.string.votreId)</code>.</li></ul><p>‚úã Tester votre modification.</p><h3 id="la-snackbar" tabindex="-1">La Snackbar <a class="header-anchor" href="#la-snackbar" aria-label="Permalink to &quot;La Snackbar&quot;">‚Äã</a></h3><p>Un autre moyen d&#39;interagir avec l&#39;utilisateur, c&#39;est via un Snackbar. Une snackbar est tr√®s similaire √† un Toast, cependant elle pourra servir pour afficher des messages importants et surtout des messages avec lesquels nous allons pouvoir interagir.</p><p>Je vous laisse modifier votre code pour remplacer le Toast par :</p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Snackbar.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findViewById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(android.R.id.content), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Je suis une Snackbar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Snackbar.LENGTH_LONG).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">show</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Ou</strong></p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Snackbar.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findViewById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(android.R.id.content), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Je suis une Snackbar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Snackbar.LENGTH_LONG).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setAction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Action&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   // Votre action</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">show</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">Vous souhaitez changer la dur√©e d&#39;affichage ?</p><p>Plusieurs options s&#39;offre √† vous :</p><ul><li><code>Snackbar.LENGTH_SHORT</code></li><li><code>Snackbar.LENGTH_LONG</code></li><li><code>Snackbar.LENGTH_INDEFINITE</code></li></ul></div><h2 id="rendre-un-element-clickable" tabindex="-1">Rendre un √©l√©ment clickable <a class="header-anchor" href="#rendre-un-element-clickable" aria-label="Permalink to &quot;Rendre un √©l√©ment clickable&quot;">‚Äã</a></h2><p>Pour rendre un √©l√©ment cliquable sur Android, nous avons plusieurs fa√ßons de faire. La premi√®re c&#39;est dans le code via son id et la m√©thode <code>findViewById</code>.</p><p>Ajouter dans votre m√©thode <code>onCreate</code> le code suivant :</p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    findViewById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(R.id.myButton).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOnClickListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Votre action</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Et voil√†‚Ä¶ Votre bouton est cliquable.</p><h3 id="a-faire-5" tabindex="-1">√Ä faire <a class="header-anchor" href="#a-faire-5" aria-label="Permalink to &quot;√Ä faire&quot;">‚Äã</a></h3><ul><li>Rendre votre bouton clickable.</li><li>Afficher un Toast sur le OnClick.</li></ul><p>‚ö†Ô∏è Attention √† bien r√©f√©rencer le bon <code>R.id.myButton</code> par rapport √† votre layout.</p><h2 id="rendre-un-element-clickable-2" tabindex="-1">Rendre un √©l√©ment clickable 2 <a class="header-anchor" href="#rendre-un-element-clickable-2" aria-label="Permalink to &quot;Rendre un √©l√©ment clickable 2&quot;">‚Äã</a></h2><p>Le <code>ViewBinding</code> est maintenant la nouvelle fa√ßon moderne de g√©rer ¬´ les r√©f√©rences √† la vue depuis le code Kotlin ¬ª. √áa fonctionne un peu comme le <code>findViewById</code> sauf que le Binding est automatique et surtout celui-ci g√®re automatiquement le typage !</p><p>Premi√®re √©tape, il faut activer dans votre build.gradle le ¬´ ViewBinding ¬ª, dans le block Android d√©j√† pr√©sent ajouter :</p><div class="language-txt vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>buildFeatures {</span></span>
<span class="line"><span>    viewBinding true</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Exemple dans mon cas :</p><p><img src="`+E+'" alt="viewBinding" loading="lazy"></p><p>‚úã N&#39;oubliez pas de resync l&#39;IDE</p><p><img src="'+i+`" alt="ide sync" loading="lazy"></p><p>Maintenant nous avons maintenant un Binding automatique entre ¬´ La vue et le Code Kotlin ¬ª, cependant pour que celui-ci soit accessible de l&#39;ensemble de notre classe, nous allons devoir modifier l√©g√®rement notre <code>class</code>.</p><p>Exemple de modification dans la <code>MainActivity</code> :</p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MainActivity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AppCompatActivity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> lateinit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> binding: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ActivityMainBinding</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // &lt;-- R√©f√©rence √† notre ViewBinding</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    override</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onCreate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(savedInstanceState: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Bundle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onCreate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(savedInstanceState)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // --&gt; Indique que l&#39;on utilise le ViewBinding</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        binding </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ActivityMainBinding.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">inflate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(layoutInflater)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        setContentView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(binding.root)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // L&#39;ensemble de nos r√©f√©rences sont disponibles directement dans ¬´ binding ¬ª</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        binding.button.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOnClickListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // Click sur le Button nomm√© ¬´ Button ¬ª dans notre Layout.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><a href="https://developer.android.com/topic/libraries/view-binding" target="_blank" rel="noreferrer">En savoir plus dans la documentation</a></p><h3 id="a-faire-6" tabindex="-1">√Ä faire <a class="header-anchor" href="#a-faire-6" aria-label="Permalink to &quot;√Ä faire&quot;">‚Äã</a></h3><p>Modifier le code pr√©c√©dent pour utiliser la nouvelle fa√ßon vue pr√©c√©demment.</p><h3 id="les-kotlin-android-extension" tabindex="-1">Les Kotlin Android Extension <a class="header-anchor" href="#les-kotlin-android-extension" aria-label="Permalink to &quot;Les Kotlin Android Extension&quot;">‚Äã</a></h3><p>Bien que pratique, cette m√©thode n&#39;est maintenant plus ¬´ la bonne fa√ßon de faire ¬ª. Si vous la trouvez sur Internet, passez votre chemin.</p><h3 id="creer-une-autre-activity" tabindex="-1">Cr√©er une autre activity <a class="header-anchor" href="#creer-une-autre-activity" aria-label="Permalink to &quot;Cr√©er une autre activity&quot;">‚Äã</a></h3><p>Nous allons ajouter une nouvelle activity, celle-ci sera un ¬´ Splash Screen ¬ª, elle sera donc affich√©e au lancement de l&#39;application.</p><h4 id="etape-1-creer-l-activity" tabindex="-1">√âtape 1 : Cr√©er l&#39;activity <a class="header-anchor" href="#etape-1-creer-l-activity" aria-label="Permalink to &quot;√âtape 1 : Cr√©er l&#39;activity&quot;">‚Äã</a></h4><p>Pour cr√©er une activity, Android Studio nous propose dans les menus une action qui automatise l&#39;ensemble du processus √† savoir :</p><ul><li>Cr√©ation du package</li><li>Cr√©ation de la class</li><li>Cr√©ation du layout</li><li>Modification du AndroidManifest.xml</li></ul><p>Cr√©er la nouvelle activity :</p><p><img src="`+g+'" alt="create_activity" loading="lazy"></p><p>Puis :</p><p><img src="'+m+`" alt="create_activity" loading="lazy"></p><h4 id="etape-2-voir-modifier-le-fichier-androidmanifest-xml" tabindex="-1">√âtape 2 : Voir / Modifier le fichier AndroidManifest.xml <a class="header-anchor" href="#etape-2-voir-modifier-le-fichier-androidmanifest-xml" aria-label="Permalink to &quot;√âtape 2 : Voir / Modifier le fichier AndroidManifest.xml&quot;">‚Äã</a></h4><p>L&#39;activity est maintenant cr√©√©e. Sauf que‚Ä¶ nous avons deux activity qui se lancent au d√©marrage. Modifier le AndroidManifest pour retirer :</p><div class="language-xml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">intent-filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">action</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> android:name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;android.intent.action.MAIN&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">category</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> android:name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;android.intent.category.LAUNCHER&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">intent-filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>De la <code>MainActivity</code>.</p><p>Modifier √©galement le th√®me de la SplashActivity afin de lui sp√©cifier un th√®me sans ¬´ ActionBar ¬ª. Pour √ßa il vous suffit d&#39;ajouter dans les attributs celui-ci :</p><p><code>android:theme=&quot;@style/Theme.AppCompat.DayNight.NoActionBar&quot;</code></p><p>Exemple :</p><p><code>&lt;activity android:name=&quot;.SplashActivity&quot; android:theme=&quot;@style/Theme.AppCompat.DayNight.NoActionBar&quot;&gt;</code></p><p>‚úã Lancer l&#39;application. Vous devez √™tre bloqu√© sur une ¬´ vue blanche ¬ª.</p><h4 id="etape-3-modifier-le-layout" tabindex="-1">√âtape 3 : Modifier le layout <a class="header-anchor" href="#etape-3-modifier-le-layout" aria-label="Permalink to &quot;√âtape 3 : Modifier le layout&quot;">‚Äã</a></h4><p>Je vous laisse modifier le layout pour que celui-ci ressemble √† :</p><p><img src="`+b+`" alt="Splash" loading="lazy"></p><h4 id="etape-4-lancer-une-activity" tabindex="-1">√âtape 4 : Lancer une activity <a class="header-anchor" href="#etape-4-lancer-une-activity" aria-label="Permalink to &quot;√âtape 4 : Lancer une activity&quot;">‚Äã</a></h4><p>Maintenant que notre ¬´ Splash ¬ª s&#39;affiche, nous allons pouvoir lancer l&#39;autre activity apr√®s <em>un d√©lai</em>. Dans cette partie, nous allons voir comment lancer une activit√©, et plus pr√©cis√©ment comment nous pouvons ¬´ simplifier ¬ª / ¬´ uniformiser ¬ª le lancement via une m√©thode static.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>ü§ì Si vous avez d√©j√† fait du d√©veloppement Android, rien de nouveau, je vous propose simplement juste <strong>une autre fa√ßon</strong> de vous organiser.</p></div><h4 id="etape-4-1-methode-¬´-static-¬ª" tabindex="-1">√âtape 4.1 : M√©thode ¬´ static ¬ª <a class="header-anchor" href="#etape-4-1-methode-¬´-static-¬ª" aria-label="Permalink to &quot;√âtape 4.1 : M√©thode ¬´ static ¬ª&quot;">‚Äã</a></h4><p>Lancer une activity sur Android est aussi simple que d&#39;appeler la m√©thode <code>startActivity</code> au moment voulu. Pour ¬´ simplifier l&#39;√©criture ¬ª et √©viter le code spaghetti, nous allons ajouter dans le code de la MainActivity une m√©thode qui sera en charge de ¬´ retourner les informations (appel√©e une <code>Intent</code>) ¬ª n√©cessaires au lancement de celle-ci.</p><p>En Kotlin les m√©thodes static <strong>doivent √™tre mise</strong> dans <code>companion object</code>. Nous allons donc ajouter ¬´ un compagnon ¬ª dans notre class. Un compagnon Object va nous permettre de cr√©er une m√©thode ¬´ static ¬ª qui sera accessible directement sans instancier l√† class.</p><p>√Ä faire :</p><p>Ajouter le code suivant dans la <em>MainActivity</em> :</p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">companion</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getStartIntent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Intent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Intent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context, MainActivity::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.java)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="etape-4-2-appeler-la-methode" tabindex="-1">√âtape 4.2 : Appeler la m√©thode <a class="header-anchor" href="#etape-4-2-appeler-la-methode" aria-label="Permalink to &quot;√âtape 4.2 : Appeler la m√©thode&quot;">‚Äã</a></h4><p>Dans le code de la <em>SplashActivity</em> nous allons lancer apr√®s quelques secondes le code permettant de lancer la <em>MainActivity</em>. Pour √ßa ajouter le code suivant dans le <code>onCreate</code> de votre <code>SplashActivity</code>.</p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Looper.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMainLooper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postDelayed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        startActivity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MainActivity.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getStartIntent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        finish</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">Analyse du code</p><p>Le code √† proprement dit qui lance l&#39;activity est le suivant :</p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    startActivity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MainActivity.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getStartIntent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Et oui c&#39;est aussi simple que √ßa!</p></div><ul><li>√Ä quoi correspond le <code>this</code> ?</li><li>√Ä quoi sert le <code>finish()</code> ?</li><li>Que se passe-t-il si vous ne le mettez pas ?</li><li>Pouvez-vous changer le temps d&#39;attente ?</li></ul><h2 id="demarrer-une-activite-avec-des-parametres" tabindex="-1">D√©marrer une activit√© avec des param√®tres <a class="header-anchor" href="#demarrer-une-activite-avec-des-parametres" aria-label="Permalink to &quot;D√©marrer une activit√© avec des param√®tres&quot;">‚Äã</a></h2><p>En reprenant le principe pr√©c√©dent, il est tout a fait possible de ¬´ passer des param√®tres ¬ª √† votre activity :</p><h3 id="dans-l-activity-a-demarrer" tabindex="-1">Dans l&#39;activity √† d√©marrer <a class="header-anchor" href="#dans-l-activity-a-demarrer" aria-label="Permalink to &quot;Dans l&#39;activity √† d√©marrer&quot;">‚Äã</a></h3><h4 id="le-code-pour-demarrer-l-activity" tabindex="-1">Le code pour d√©marrer l&#39;activity : <a class="header-anchor" href="#le-code-pour-demarrer-l-activity" aria-label="Permalink to &quot;Le code pour d√©marrer l&#39;activity :&quot;">‚Äã</a></h4><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">companion</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IDENTIFIANT_ID </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;IDENTIFIANT_ID&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getStartIntent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, identifiant: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Intent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Intent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context, RemoteActivity::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.java).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            putExtra</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(IDENTIFIANT_ID, identifiant)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="le-code-pour-recuperer-le-parametre" tabindex="-1">Le code pour r√©cup√©rer le param√®tre <a class="header-anchor" href="#le-code-pour-recuperer-le-parametre" aria-label="Permalink to &quot;Le code pour r√©cup√©rer le param√®tre&quot;">‚Äã</a></h4><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Retourne l&#39;identifiant pass√© en param√®tre √† l&#39;activit√©</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getIdentifiant</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">? {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> intent.extras?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(IDENTIFIANT_ID, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="dans-l-activity-qui-va-lancer-l-autre-activity" tabindex="-1">Dans l&#39;activity qui va lancer l&#39;autre activity <a class="header-anchor" href="#dans-l-activity-qui-va-lancer-l-autre-activity" aria-label="Permalink to &quot;Dans l&#39;activity qui va lancer l&#39;autre activity&quot;">‚Äã</a></h3><p>Et pour d√©marrer l&#39;activity :</p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">startActivity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(VotreActivityADemarrer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getStartIntent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;CECI-EST-UN-IDENTIFIANT&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="theme-et-drawable" tabindex="-1">Th√®me et Drawable <a class="header-anchor" href="#theme-et-drawable" aria-label="Permalink to &quot;Th√®me et Drawable&quot;">‚Äã</a></h2><p>Le grand chalenge d&#39;une application mobile c&#39;est ¬´ le c√¥t√© visuel ¬ª. Bien √©videmment je sais que vous n&#39;√™tes pas des experts UI/UX, Google le sait √©galement. C&#39;est pour √ßa qu&#39;ils ont int√©gr√© dans Android Studio un catalogue d&#39;ic√¥ne nous permettant nous d√©veloppeurs de travailler avec des √©l√©ments propres et de qualit√©.</p><p>Pour rappel, les images dans Android s&#39;appellent des <code>Drawables</code> et sont dans le dossier <code>Res</code>. Android Studio int√®gre un catalogue nomm√© ¬´ Vector Asset ¬ª, celui-ci est disponible dans les menus :</p><p><img src="`+y+'" alt="Vector Asset" loading="lazy"></p><p>Pour choisir une ic√¥ne :</p><p><img src="'+v+`" alt="Vector Asset choix" loading="lazy"></p><h3 id="a-faire-7" tabindex="-1">√Ä faire <a class="header-anchor" href="#a-faire-7" aria-label="Permalink to &quot;√Ä faire&quot;">‚Äã</a></h3><ul><li>Ajouter un nouveau drawable dans votre projet.</li><li>Que constatez-vous comme changement dans les Drawable ?</li><li>Utiliser l&#39;image choisie dans votre layout ¬´ Splash ¬ª. L&#39;image choisie doit-√™tre en bas √† droite.</li></ul><h2 id="theme-de-couleurs" tabindex="-1">Th√®me de couleurs <a class="header-anchor" href="#theme-de-couleurs" aria-label="Permalink to &quot;Th√®me de couleurs&quot;">‚Äã</a></h2><p>Comme vous avez pu le constater, les couleurs de votre application sont ¬´ principalement ¬ª violettes. Les couleurs en question sont d√©finies dans le th√®me de votre application.</p><p>Je vous propose de les modifier. Premi√®re √©tape, ajouter vos couleurs dans le fichier <code>colors.xml</code>. Une fois fait modifier le fichier <code>themes.xml</code> et plus particuli√®rement le <code>colorPrimary</code> pour utiliser la couleur que vous avez ajout√©e.</p><h3 id="a-faire-8" tabindex="-1">√Ä faire <a class="header-anchor" href="#a-faire-8" aria-label="Permalink to &quot;√Ä faire&quot;">‚Äã</a></h3><ul><li>Ajouter une couleur (<code>colors.xml</code>). Par exemple, ajouter une ¬´ mainPrimaryColor ¬ª.</li><li>L&#39;utiliser dans le th√®me (<code>themes.xml</code>) en modifiant par le <code>colorPrimary</code> pour utiliser votre nouvelle couleur.</li></ul><h2 id="les-intent-externes-tierces" tabindex="-1">Les Intent externes / tierces <a class="header-anchor" href="#les-intent-externes-tierces" aria-label="Permalink to &quot;Les Intent externes / tierces&quot;">‚Äã</a></h2><p>Dans le syst√®me Android, nous avons √† notre disposition en plus des Intents que vous d√©clarez la possibilit√© d&#39;appeler ceux du syst√®me. La liste est tr√®s grande :</p><ul><li>Lancer les param√®tres.</li><li>Ouvrir un lien.</li><li>Ouvrir une Carte Google Maps.</li><li>‚Ä¶</li></ul><h3 id="ouvrir-les-parametres-bluetooth" tabindex="-1">Ouvrir les param√®tres Bluetooth <a class="header-anchor" href="#ouvrir-les-parametres-bluetooth" aria-label="Permalink to &quot;Ouvrir les param√®tres Bluetooth&quot;">‚Äã</a></h3><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> targetIntent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Intent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    action </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> android.provider.Settings.ACTION_BLUETOOTH_SETTINGS</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">startActivity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(targetIntent);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="ouvrir-un-lien-web" tabindex="-1">Ouvrir un lien web <a class="header-anchor" href="#ouvrir-un-lien-web" aria-label="Permalink to &quot;Ouvrir un lien web&quot;">‚Äã</a></h3><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">startActivity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Intent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Intent.ACTION_VIEW, Uri.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://cours.brosseau.ovh&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="ouvrir-google-maps" tabindex="-1">Ouvrir Google Maps <a class="header-anchor" href="#ouvrir-google-maps" aria-label="Permalink to &quot;Ouvrir Google Maps&quot;">‚Äã</a></h3><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">startActivity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Intent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Intent.ACTION_VIEW, Uri.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;geo:47.472822,-0.5621756&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="a-faire-9" tabindex="-1">√Ä faire <a class="header-anchor" href="#a-faire-9" aria-label="Permalink to &quot;√Ä faire&quot;">‚Äã</a></h3><p>Maintenant que vous savez comment ouvrir une intent Externe :</p><ul><li>Ajouter sur la <code>MainActivity</code> une ic√¥ne en haut √† droite type ¬´ Settings ¬ª.</li><li>Celle-ci doit √™tre cliquable et doit permettre d&#39;ouvrir les param√®tres (<code>ACTION_SETTINGS</code>).</li><li>Ajouter sous le bouton ¬´ En bas de l&#39;activit√© ¬ª un texte cliquable <code>TextView</code> permettant d&#39;ouvrir le site de l&#39;√©cole.</li><li>Ajoute √† c√¥t√© du <code>TextView</code> un second <code>TextView</code> qui ouvre l&#39;adresse / la position GPS de l&#39;√©cole dans Google Maps.</li></ul><p>Exemple :</p><p><img src="`+F+'" alt="Sample UI TEST" loading="lazy"></p><h2 id="les-permissions" tabindex="-1">Les Permissions <a class="header-anchor" href="#les-permissions" aria-label="Permalink to &quot;Les Permissions&quot;">‚Äã</a></h2><p>Nous avons vu ensemble que la gestion des permissions √©tait un √©l√©ment important de la plateforme. Nous allons donc voir la th√©orie, puis la mettre en pratique.</p><p><img src="'+C+'" alt="Les permissions" loading="lazy"></p><p>Voil√† le plus simple pour expliquer la m√©canique des permissions c&#39;est ¬´ un sch√©ma ¬ª. Je vous propose de mettre en pratique avec la permission ¬´ LOCALISATION ¬ª. Je vais volontairement vous donner le code √† impl√©menter (celui-ci est disponible de toute mani√®re dans la documentation d&#39;Android).</p><p>Pour r√©aliser cette fonctionnalit√©, nous allons ajouter une nouvelle activit√© (en utilisant les options de votre IDE). Pour le layout je vous propose de r√©aliser un layout qui ressemble √† :</p><p><img src="'+f+`" alt="Layout" loading="lazy"></p><p>üëã C&#39;est bien √©videmment qu&#39;une proposition‚Ä¶ Vous pouvez faire autrement !</p><p>Pour le code, c&#39;est un poil plus compliqu√©, en reprenant le flow du graphique pr√©c√©dent, nous allons avoir besoin :</p><h2 id="declaration-des-permissions" tabindex="-1">D√©claration des permissions <a class="header-anchor" href="#declaration-des-permissions" aria-label="Permalink to &quot;D√©claration des permissions&quot;">‚Äã</a></h2><p>Dans le fichier Manifest ajoutez :</p><div class="language-xml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uses-permission</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> android:name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;android.permission.ACCESS_COARSE_LOCATION&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uses-permission</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> android:name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;android.permission.ACCESS_FINE_LOCATION&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="permission-acceptee" tabindex="-1">Permission accept√©e ? <a class="header-anchor" href="#permission-acceptee" aria-label="Permalink to &quot;Permission accept√©e ?&quot;">‚Äã</a></h3><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> hasPermission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ActivityCompat.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">checkSelfPermission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Manifest.permission.ACCESS_FINE_LOCATION) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PackageManager.PERMISSION_GRANTED</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="demander-la-permission" tabindex="-1">Demander la permission <a class="header-anchor" href="#demander-la-permission" aria-label="Permalink to &quot;Demander la permission&quot;">‚Äã</a></h3><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">companion</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Permet d&#39;identifier le fait que nous demandons la permission</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Le code peut-√™tre n&#39;importe quoi, mais il doit √™tre unique</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Il vous permettra de savoir si l&#39;utilisateur revient de la demande de permission (onRequestPermissionsResult)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PERMISSION_REQUEST_LOCATION </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 9999</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> requestPermission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hasPermission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ActivityCompat.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">requestPermissions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">arrayOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Manifest.permission.ACCESS_FINE_LOCATION), PERMISSION_REQUEST_LOCATION)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        getLocation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="methode-surchargee-apres-l-acceptation" tabindex="-1">M√©thode surcharg√©e apr√®s l&#39;acceptation <a class="header-anchor" href="#methode-surchargee-apres-l-acceptation" aria-label="Permalink to &quot;M√©thode surcharg√©e apr√®s l&#39;acceptation&quot;">‚Äã</a></h3><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">override</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onRequestPermissionsResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(requestCode: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, permissions: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">out</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;, grantResults: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IntArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onRequestPermissionsResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(requestCode, permissions, grantResults)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    when</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (requestCode) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        PERMISSION_REQUEST_LOCATION </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // If request is cancelled, the result arrays are empty.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((grantResults.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isNotEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> grantResults[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PackageManager.PERMISSION_GRANTED)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // Permission obtenue, Nous continuons la suite de la logique.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                getLocation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // TODO</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // Permission non accept√©, expliqu√© ici via une activit√© ou une dialog pourquoi nous avons besoin de la permission</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="danger custom-block"><p class="custom-block-title">Gestion de la permission refus√©e de mani√®re permanente</p><p>L&#39;utilisateur a le choix de refuser de mani√®re permanente la localisation. Dans ce cas vous devez g√©rer l&#39;erreur avec <code>shouldShowRequestPermissionRationale()</code> qui retournera <code>true</code> / <code>false</code> en fonction.</p><p>Je vous laisse √©crire le code afin d&#39;envoyer l&#39;utilisateur vers les param√®tres de son t√©l√©phone si cela doit √™tre le cas.</p></div><h3 id="obtenir-la-localisation" tabindex="-1">Obtenir la localisation <a class="header-anchor" href="#obtenir-la-localisation" aria-label="Permalink to &quot;Obtenir la localisation&quot;">‚Äã</a></h3><p>C&#39;est le code ¬´ m√©tier ¬ª. Les m√©thodes pr√©c√©dentes sont par contre g√©n√©riques, et toujours pr√©sentes, quelle que soit la probl√©matique.</p><p><em>Obtenir la location : Via ¬´ la derni√®re connue ¬ª :</em></p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> geoCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(location: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Location</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Toast.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">makeText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Lat: \${location.latitude} - Long: \${location.longitude}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Toast.LENGTH_SHORT).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">show</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getLocation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hasPermission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> locationManager </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> applicationContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSystemService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(LOCATION_SERVICE) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LocationManager?</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        locationManager?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            locationManager.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getLastKnownLocation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(LocationManager.PASSIVE_PROVIDER)?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                geoCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><em>Obtenir la localisation 2 pour avoir la position r√©elle (pas la derni√®re obtenue par le syst√®me) :</em></p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> geoCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(location: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Location</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Toast.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">makeText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Lat: \${location.latitude} - Long: \${location.longitude}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Toast.LENGTH_SHORT).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">show</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getLocation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hasPermission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> locationManager </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> applicationContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSystemService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(LOCATION_SERVICE) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LocationManager?</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        locationManager?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            locationManager.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">requestLocationUpdates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(LocationManager.NETWORK_PROVIDER, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10000F</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LocationListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">geoCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(it) });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><em>Obtenir la localisation 3 : Via les Play Services :</em></p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> geoCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(location: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Location</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Toast.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">makeText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Lat: \${location.latitude} - Long: \${location.longitude}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Toast.LENGTH_SHORT).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">show</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getLocation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hasPermission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        fusedLocationClient </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LocationServices.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getFusedLocationProviderClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        fusedLocationClient.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getCurrentLocation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(LocationRequest.PRIORITY_BALANCED_POWER_ACCURACY, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CancellationTokenSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().token)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addOnSuccessListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">geoCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(it) }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addOnFailureListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    // Remplacer par un vrai bon message</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    Toast.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">makeText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Localisation impossible&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Toast.LENGTH_SHORT).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">show</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="danger custom-block"><p class="custom-block-title">Vous devez choisir une fa√ßon de faire</p><p>Nous avons donc trois fa√ßons de faire, si votre t√©l√©phone a les Play Services la derni√®re solution sera la bonne.</p></div><h3 id="bonus-obtenir-l-adresse-par-rapport-au-lat-long" tabindex="-1">BONUS ! Obtenir l&#39;adresse par rapport au lat, long <a class="header-anchor" href="#bonus-obtenir-l-adresse-par-rapport-au-lat-long" aria-label="Permalink to &quot;BONUS ! Obtenir l&#39;adresse par rapport au lat, long&quot;">‚Äã</a></h3><p>Latitude, Longitude c&#39;est triste‚Ä¶ Android int√®gre de base un Geocoder permettant d&#39;obtenir une adresse textuelle en fonction d&#39;une <code>lat,long</code>.</p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> geoCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(location: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Location</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> geocoder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Geocoder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Locale.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getDefault</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> results </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> geocoder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getFromLocation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(location.latitude, location.longitude, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (results?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isNotEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        locationText.text </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> results[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAddressLine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="a-faire-10" tabindex="-1">√Ä faire <a class="header-anchor" href="#a-faire-10" aria-label="Permalink to &quot;√Ä faire&quot;">‚Äã</a></h3><p>Je vous laisse impl√©menter le code‚Ä¶ N&#39;h√©siter pas √† reprendre le ¬´ graph ¬ª il vous sera utile pour d√©terminer qu&#39;elle m√©thode appeler en premier lors de l&#39;appui sur le bouton ¬´ Localiser Moi ¬ª. Un petit indice‚Ä¶ on commence toujours par v√©rifier si l&#39;application a le droit d&#39;acc√©der ¬´ √† la fonctionnalit√© ¬ª.</p><div class="tip custom-block"><p class="custom-block-title">La toolbar</p><p>Pour activer l&#39;action retour dans la Toolbar d&#39;une activit√©. <strong>Vous devez</strong> ajouter le code suivant dans le <code>OnCreate</code> :</p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">supportActionBar?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    setTitle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(R.string.whatever)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    setDisplayHomeAsUpEnabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    setDisplayShowHomeEnabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Puis vous devez override la m√©thode <code>onSupportNavigateUp</code> qui est appel√©e lors de l&#39;appui sur le ¬´ l&#39;ic√¥ne retour ¬ª:</p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">override</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onSupportNavigateUp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    finish</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></div><details class="details custom-block"><summary>Voir une solution compl√®te</summary><p>Vous s√©chez ? _<em>Je vous invite √† me demander avant de regarder la solution‚Ä¶</em> cependant, si vous souhaitez par contre v√©rifier votre solution.</p><p><a href="https://gist.github.com/c4software/a3fa7f584a464a6308648b7fcce28add" target="_blank" rel="noreferrer">Sachez que vous avez une version du code ici</a></p></details><h2 id="les-recyclerview" tabindex="-1">Les Recyclerview <a class="header-anchor" href="#les-recyclerview" aria-label="Permalink to &quot;Les Recyclerview&quot;">‚Äã</a></h2><p>‚úã Parlons-en üëã</p><p>Nous allons faire cette √©tape ensemble.</p><p>Mais dans les grandes lignes :</p><ul><li>Ajouter une nouvelle activit√©.</li><li>Ajout d&#39;un bouton sur la home permettant de la lancer.</li><li>Dans la nouvelle activity, un RecyclerView qui contiendra ¬´ des √©l√©ments de type Strings ¬ª. (<code>&lt;androidx.recyclerview.widget.RecyclerView android:layout_width=&quot;wrap_content&quot;android:layout_height=&quot;wrap_content&quot; ‚Ä¶</code>)</li><li>Chaque √©l√©ment de la liste doit ressembler √† (je vous laisse cr√©er le fichier nomm√© <code>item_list.xml</code> dans les layouts).</li></ul><p><img src="`+A+'" alt="List Item Layout" loading="lazy"></p>',212),S=l("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/28GgLW7vCRM?si=z9kwjf4zHq60pFLl",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""},null,-1),P=s('<div class="tip custom-block"><p class="custom-block-title">Les RecyclerView c&#39;est important</p><p>Comme je le disais en cours, les RecyclerView c&#39;est un concept important. Il faut prendre du temps pour bien comprendre le fonctionnement et les ¬´ limites ¬ª. En vous inspirant de <a href="https://gist.github.com/c4software/95e51417890c68078c14555b2f1d9a03" target="_blank" rel="noreferrer">l&#39;exemple ici</a></p><p>Je vous laisse impl√©menter votre propre RecyclerView.</p><p>‚úã <strong>Attention</strong>, dans notre cas le RecyclerView sera du type String et non pas <strong>Device</strong></p></div><h2 id="les-¬´-plugins-¬ª-librairies" tabindex="-1">Les ¬´ Plugins ¬ª / Librairies <a class="header-anchor" href="#les-¬´-plugins-¬ª-librairies" aria-label="Permalink to &quot;Les ¬´ Plugins ¬ª / Librairies&quot;">‚Äã</a></h2><p>Comme vu en cours, je vous laisse ajouter les librairies :</p><ul><li>MaterialDialog.</li><li>Recyclical dans votre projet.</li></ul><h3 id="les-dialogs" tabindex="-1">Les Dialogs <a class="header-anchor" href="#les-dialogs" aria-label="Permalink to &quot;Les Dialogs&quot;">‚Äã</a></h3><h4 id="avec-materialdialog" tabindex="-1">Avec MaterialDialog <a class="header-anchor" href="#avec-materialdialog" aria-label="Permalink to &quot;Avec MaterialDialog&quot;">‚Äã</a></h4><p>Ajouter une dialog dans votre projet. Avec la librairie <a href="https://github.com/afollestad/material-dialogs/blob/main/documentation/CORE.md" target="_blank" rel="noreferrer">MaterialDialog</a>. Celle-ci doit s&#39;afficher lors du clic sur le bouton de la home.</p><h3 id="avec-le-material-design-de-google" tabindex="-1">Avec le Material Design de Google <a class="header-anchor" href="#avec-le-material-design-de-google" aria-label="Permalink to &quot;Avec le Material Design de Google&quot;">‚Äã</a></h3><p>Ajouter une dialog dans votre projet. Avec la librairie <a href="https://material.io/develop/android/docs/getting-started" target="_blank" rel="noreferrer">Material Design de Google</a>. Celle-ci doit s&#39;afficher lors du clic sur le bouton de la home.</p><h3 id="recyclical" tabindex="-1">Recyclical <a class="header-anchor" href="#recyclical" aria-label="Permalink to &quot;Recyclical&quot;">‚Äã</a></h3><p>R√©impl√©menter le code pr√©c√©demment √©crit (ou cr√©er une autre activit√©) avec <a href="https://github.com/afollestad/recyclical" target="_blank" rel="noreferrer">Recyclical</a>.</p><h2 id="activite-¬´-parametres-¬ª" tabindex="-1">Activit√© ¬´ Param√®tres ¬ª <a class="header-anchor" href="#activite-¬´-parametres-¬ª" aria-label="Permalink to &quot;Activit√© ¬´ Param√®tres ¬ª&quot;">‚Äã</a></h2><p>Je vous laisse cr√©er une nouvelle activit√©. Celle-ci <strong>doit √™tre</strong> constitu√©e :</p><ul><li>Une Toolbar avec un bouton Retour et un titre ¬´ Param√®tres ¬ª.</li><li>un RecyclerView qui va contenir : <ul><li>Param√®tres Bluetooth -&gt; ouvre les param√®tres du t√©l√©phone.</li><li>Informations -&gt; ouvre une activit√© (ou un dialogue avec un message texte).</li><li>Un √©l√©ment ouvrant ¬´ les param√®tres de l&#39;application ¬ª</li><li>Un lien vers le site de l&#39;√©cole.</li><li>Un lien vers le Google Maps de l&#39;√©cole.</li></ul></li></ul><div class="danger custom-block"><p class="custom-block-title">Votre RecyclerView</p><p>Votre RecyclerView va contenir des objets du type SettingsItem (class a cr√©√©). Chaque √©l√©ment va ressembler √† :</p><p><em>Exemple d&#39;un √©l√©ment de liste :</em></p><p><img src="'+q+'" alt="ressources list_item_sample.png" loading="lazy"></p><p><img src="'+B+`" alt="ressources list_item_sample.png" loading="lazy"></p><p><em>Les objet de type <code>SettingsItem.kt</code></em>:</p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// D√©finition de la Class qui sera dans notre RecyclerView</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SettingsItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> icon: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> onClick: (() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Unit))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Exemple de d√©claration dans la datasource (√† d√©clarer dans votre Activity)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mesItems </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> arrayOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    SettingsItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Param√®tre Bluetooth&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, R.drawable.bluetooth) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Action lors du click</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    SettingsItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Informations&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, R.drawable.info) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Action lors du click</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    SettingsItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Param√®tres&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, R.drawable.settings) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Action lors du click</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    SettingsItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Site de l&#39;√©cole&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, R.drawable.logo_eseo) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Action lors du click</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Je vous laisse impl√©menter votre ViewHolder, pour r√©f√©rencer dans votre vue (via des findViewById comme vus ensemble)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// -&gt; name</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// -&gt; icon</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// -&gt; l&#39;action aux cliques</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></div><div class="tip custom-block"><p class="custom-block-title">La toolbar</p><p>Pour activer l&#39;action retour dans la Toolbar d&#39;une activity. <strong>Vous devez</strong> ajouter le code suivant dans le <code>OnCreate</code> :</p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">supportActionBar?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    setTitle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(R.string.whatever)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    setDisplayHomeAsUpEnabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    setDisplayShowHomeEnabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Puis vous devez override la m√©thode <code>onSupportNavigateUp</code> qui est appel√©e lors de l&#39;appui sur le ¬´ l&#39;ic√¥ne retour ¬ª:</p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">override</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onSupportNavigateUp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    finish</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></div><h3 id="la-classe-localpreferences-aka-sauvegarder-des-parametres" tabindex="-1">La classe LocalPreferences (AKA Sauvegarder des param√®tres) <a class="header-anchor" href="#la-classe-localpreferences-aka-sauvegarder-des-parametres" aria-label="Permalink to &quot;La classe LocalPreferences (AKA Sauvegarder des param√®tres)&quot;">‚Äã</a></h3><p>Cette classe va nous permettre de sauvegarder de mani√®re ¬´ persistant ¬ª des param√®tres.</p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> android.content.Context</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> android.content.SharedPreferences</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> LocalPreferences</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> private</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sharedPreferences: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SharedPreferences</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> context.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSharedPreferences</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MyPref&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Context.MODE_PRIVATE)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> saveStringValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(yourValue: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        sharedPreferences.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">edit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">putString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;saveStringValue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, yourValue).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getSaveStringValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">? {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sharedPreferences.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;saveStringValue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    companion</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> INSTANCE: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LocalPreferences</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">? </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LocalPreferences</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> INSTANCE?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                INSTANCE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            } ?: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                INSTANCE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> LocalPreferences</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> INSTANCE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!!</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>Et pour l&#39;utiliser dans vos activity :</p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ‚Ä¶ Reste de votre code</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Exemple sauvegarde d&#39;information √† chaque click.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">button.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOnClickListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    LocalPreferences.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">saveStringValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Votre valeur&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Exemple de r√©cup√©ration</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(LocalPreferences.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSaveStringValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Toast.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">makeText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, LocalPreferences.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSaveStringValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), Toast.LENGTH_SHORT).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">show</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ‚Ä¶ Suite de votre code</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="a-faire-11" tabindex="-1">√Ä faire <a class="header-anchor" href="#a-faire-11" aria-label="Permalink to &quot;√Ä faire&quot;">‚Äã</a></h4><p>Cette classe est g√©n√©rique, il vous suffit d&#39;impl√©menter les bonnes m√©thodes.</p><p>J&#39;aimerais que nous puissions sauvegarder l&#39;ensemble des positions de l&#39;utilisateur :</p><ul><li>Cr√©er la class <code>LocalPreferences</code>. (attention dans le bon package)</li><li>Ajouter les deux m√©thodes permettant la sauvegarde des donn√©es dans la class <code>LocalPreferences</code>. (nous allons avoir besoin de <code>putStringSet</code> et de <code>getStringSet</code> deux m√©thodes fournies par <code>SharedPreferences</code>, permettant de sauvegarder des listes de donn√©es).</li></ul><details class="details custom-block"><summary>Voir une solution (comme √† chaque fois cherchez par vous-m√™me en vous inspirant de mon exemple)</summary><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> addToHistory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(newEntry: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> history </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getHistory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        history?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(newEntry)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        sharedPreferences.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">edit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">putStringSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;histories&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, history).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getHistory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MutableSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;? {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sharedPreferences.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getStringSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;histories&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">emptySet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></details><ul><li>Modifier votre activity ¬´ Localisation ¬ª pour sauvegarder chaque position ¬´ d√©tect√© ¬ª. (vous pouvez valider la bonne insertion de votre donn√©e via un point d&#39;arr√™t dans votre code)</li><li>Cr√©er une nouvelle <code>activity</code> qui va afficher l&#39;ensemble des donn√©es pr√©sent dans votre historique (via un <code>RecyclerView</code>).</li><li>Rendre cette nouvelle activity accessible depuis ¬´ la home de votre application ¬ª. (uniquement s‚Äôil y a des donn√©es).</li></ul>`,27),x=[L,S,P];function I(w,T,_,R,V,N){return n(),e("div",null,x)}const z=a(D,[["render",I]]);export{M as __pageData,z as default};
